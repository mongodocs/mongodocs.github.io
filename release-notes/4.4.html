<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css' /><title>Release Notes for MongoDB 4.4 &mdash; MongoDB Manual</title><link rel="shortcut icon" href="https://www.mongodb.com/docs/assets/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index" />
      <link rel="canonical" href="https://www.mongodb.com/docs/manual/release-notes/4.4/" />

  <meta name="release" content="5.0.0"/>
  <meta name="version" content="5.0"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs/blob/master/source/release-notes/4.4.txt"/>
  <meta property="og:image" content="http://s3.amazonaws.com/info-mongodb-com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
  <meta property="og:image:secure_url" content="https://webassets.mongodb.com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css" />
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/css/navbar.min.css?t=nocache" type="text/css" />
    
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/lib/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/controller.js"></script>
      <link rel="search" type="application/opensearchdescription+xml" href="https://www.mongodb.com/docs/osd.xml" title="MongoDB Help"/>
<link rel="author" title="About these documents" href="../about.html" />
<!-- <link rel="index" title="Index" href="../genindex.html" /> -->
<link rel="search" title="Search" href="../search.html" />
<link rel="top" title="MongoDB Manual" href="../index.html" />
<link rel="up" title="Release Notes" href="../release-notes.html" />
<link rel="next" title="Compatibility Changes in MongoDB 4.4" href="4.4-compatibility.html" />
<link rel="prev" title="5.0 Changelog" href="5.0-changelog.html" /><script type='text/javascript'>
   var gptadslots=[];
   var googletag = googletag || {};
   googletag.cmd = googletag.cmd || [];
   (function(){ var gads = document.createElement('script');
      gads.async = true; gads.type = 'text/javascript';
      var useSSL = 'https:' == document.location.protocol;
      gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
      var node = document.getElementsByTagName('script')[0];
      node.parentNode.insertBefore(gads, node);
   })();
</script>

<script type="text/javascript">
   googletag.cmd.push(function() {

      var pathname = location.href;
      
      if ( (pathname.indexOf("auth") >= 0) || (pathname.indexOf("security") >= 0) ) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/security', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if ( (pathname.indexOf("crud") >= 0) ||  (pathname.indexOf("query") >= 0) || (pathname.indexOf("insert") >= 0) || (pathname.indexOf("update") >= 0) || (pathname.indexOf("remove") >= 0) || (pathname.indexOf("delete") >= 0) || (pathname.indexOf("aggregation") >= 0) ) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/crud', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("shard") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/sharding', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("replica") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/replication', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("model") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/data-modeling', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("administration") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/support', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("install-mongodb-on-windows") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/install-mongodb-on-windows', [160, 600], 'mongodb-docs-1').addService(googletag.pubads());
      } else if (pathname.indexOf("tutorial/getting-started") >= 0) {
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org/docs_server_gettingstarted', [160, 600], 'mongodb-docs-1').addService(googletag.pubads());
      } else {
         //Adslot 1 declaration
         gptadslots[1]= googletag.defineSlot('/40039723/docs.mongodb.org', [[160,600],[243,202],[293,244]],'mongodb-docs-1').addService(googletag.pubads());
      }
      googletag.pubads().enableSingleRequest();
      googletag.pubads().enableAsyncRendering();
      googletag.enableServices();
   });
</script></head>
<body data-project="manual" data-project-title="MongoDB Manual" data-branch="master" data-enable-marian=1 data-eol="">
  <!-- Google Tag Manager -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-GDFN"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
  {'gtm.start':new Date().getTime(),event:'gtm.js'}
  );var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-GDFN');
  </script>
  <!-- End Google Tag Manager -->
      <script>
        window.googleSearchCx = "017213726194841070573:WMX6838984"
	window.googleSearchPlaceholder = "Search Documentation"
        window.googleSearchResultsUrl = "https://www.mongodb.com/docs/manual/search/"
      </script><div class="content" >

   <div id="left-column">
         <aside id="sidebar" class="sidebar">
             
  <div class="sphinxsidebar" id="sphinxsidebar">
    <div id="sphinxsidebarwrapper" class="sphinxsidebarwrapper"><a href="javascript:void(0)" class="closeNav" id="closeNav">Close &times;</a>


<h3>
  <a class="index-link" href="../index.html">MongoDB Manual</a>
</h3>


    <div class="btn-group version-sidebar">
      
        <button type="button" class="version-button dropdown-toggle" data-toggle="dropdown">
          
          
          Version 6.0 (upcoming)<span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
          
            
            <li class="active">
            
              <a href="#" data-path="docs/master">
                
                Version 6.0 (upcoming)
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="docs/v5.3">
                
                Atlas Rapid Release (v5.3)
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="docs/manual">
                
                Version 5.0 (current)
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="docs/v4.4">
                
                Version 4.4
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="docs/v4.2">
                
                Version 4.2
              </a>
            </li>
          
        </ul>
      
    </div>


<ul class="current"><li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/getting-started.html">Getting Started</a></li><li class="toctree-l2"><a class="reference external" href="https://docs.atlas.mongodb.com/getting-started/">Create an Atlas Free Tier Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../core/databases-and-collections.html">Databases and Collections</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/views.html">Views</a><ul><li class="toctree-l4"><a class="reference internal" href="../core/views/create-view.html">Create and Query a View</a></li><li class="toctree-l4"><a class="reference internal" href="../core/views/join-collections-with-view.html">Use a View to Join Two Collections</a></li><li class="toctree-l4"><a class="reference internal" href="../core/views/specify-collation.html">Create a View with Default Collation</a></li><li class="toctree-l4"><a class="reference internal" href="../core/views/update-view.html">Modify a View</a></li><li class="toctree-l4"><a class="reference internal" href="../core/views/drop-view.html">Remove a View</a></li><li class="toctree-l4"><a class="reference internal" href="../core/views/supported-operations.html">Supported Operations for Views</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/materialized-views.html">On-Demand Materialized Views</a></li><li class="toctree-l3"><a class="reference internal" href="../core/capped-collections.html">Capped Collections</a></li><li class="toctree-l3"><a class="reference internal" href="../core/clustered-collections.html">Clustered Collections</a></li><li class="toctree-l3"><a class="reference internal" href="../core/timeseries-collections.html">Time Series Collections</a><ul><li class="toctree-l4"><a class="reference internal" href="../core/timeseries/timeseries-procedures.html">Create and Query a Time Series Collection</a></li><li class="toctree-l4"><a class="reference internal" href="../core/timeseries/timeseries-automatic-removal.html">Set up Automatic Removal for Time Series Collections (TTL)</a></li><li class="toctree-l4"><a class="reference internal" href="../core/timeseries/timeseries-granularity.html">Set Granularity for Time Series Data</a></li><li class="toctree-l4"><a class="reference internal" href="../core/timeseries/timeseries-secondary-index.html">Add Secondary Indexes to Time Series Collections</a></li><li class="toctree-l4"><a class="reference internal" href="../core/timeseries/timeseries-migrate-data-into-timeseries-collection.html">Migrate Data into a Time Series Collection</a></li><li class="toctree-l4"><a class="reference internal" href="../core/timeseries/timeseries-build-materialized-views.html">Build Materialized Views on Top of Time Series Data</a></li><li class="toctree-l4"><a class="reference internal" href="../core/timeseries/timeseries-shard-collection.html">Shard a Time Series Collection</a></li><li class="toctree-l4"><a class="reference internal" href="../core/timeseries/timeseries-best-practices.html">Best Practices for Time Series Collections</a></li><li class="toctree-l4"><a class="reference internal" href="../core/timeseries/timeseries-reference.html">Reference</a><ul><li class="toctree-l5"><a class="reference internal" href="../core/timeseries/timeseries-compression.html">Time Series Compression</a></li><li class="toctree-l5"><a class="reference internal" href="../core/timeseries/timeseries-limitations.html">Limitations</a></li></ul></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/document.html">Documents</a></li><li class="toctree-l2"><a class="reference internal" href="../query-api.html">MongoDB Query API</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/bson-types.html">BSON Types</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/bson-type-comparison-order.html">Comparison/Sort Order</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongodb-extended-json.html">MongoDB Extended JSON (v2)</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongodb-extended-json-v1.html">MongoDB Extended JSON (v1)</a></li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul><li class="toctree-l2"><a class="reference internal" href="../administration/install-community.html">Install MongoDB Community Edition</a><ul><li class="toctree-l3"><a class="reference internal" href="../administration/install-on-linux.html">Install on Linux</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-on-red-hat.html">Install on Red Hat</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-on-red-hat-tarball.html">Install using .tgz Tarball</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-on-ubuntu.html">Install on Ubuntu</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-on-ubuntu-tarball.html">Install using .tgz Tarball</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/installation-ubuntu-community-troubleshooting.html">Troubleshoot Ubuntu Installation</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-on-debian.html">Install on Debian</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-on-debian-tarball.html">Install using .tgz Tarball</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-on-suse.html">Install on SUSE</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-on-suse-tarball.html">Install using .tgz Tarball</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-on-amazon.html">Install on Amazon</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-on-amazon-tarball.html">Install using .tgz Tarball</a></li></ul></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/install-mongodb-on-os-x.html">Install on macOS</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-on-os-x-tarball.html">Install using .tgz Tarball</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/install-mongodb-on-windows.html">Install on Windows</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-on-windows-unattended.html">Install using msiexec.exe</a></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../administration/install-enterprise.html">Install MongoDB Enterprise</a><ul><li class="toctree-l3"><a class="reference internal" href="../administration/install-enterprise-linux.html">Install on Linux</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-red-hat.html">Install on Red Hat</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-red-hat-tarball.html">Install using .tgz Tarball</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-ubuntu.html">Install on Ubuntu</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-ubuntu-tarball.html">Install using .tgz Tarball</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-debian.html">Install on Debian</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-debian-tarball.html">Install using .tgz Tarball</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-suse.html">Install on SUSE</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-suse-tarball.html">Install using .tgz Tarball</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-amazon.html">Install on Amazon</a><ul><li class="toctree-l5"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-amazon-tarball.html">Install using .tgz Tarball</a></li></ul></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-os-x.html">Install on macOS</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-windows.html">Install on Windows</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-windows-unattended.html">Install using msiexec.exe</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/install-mongodb-enterprise-with-docker.html">Install with Docker</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../administration/upgrade-community-to-enterprise.html">Upgrade MongoDB Community to MongoDB Enterprise</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/upgrade-to-enterprise-standalone.html">Upgrade to MongoDB Enterprise (Standalone)</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/upgrade-to-enterprise-replica-set.html">Upgrade to MongoDB Enterprise (Replica Set)</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/upgrade-to-enterprise-sharded-cluster.html">Upgrade to MongoDB Enterprise (Sharded Cluster)</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/verify-mongodb-packages.html">Verify Integrity of MongoDB Packages</a></li></ul></li><li class="toctree-l1"><a class="reference external" href="https://www.mongodb.com/docs/mongodb-shell/">MongoDB Shell (mongosh)</a></li><li class="toctree-l1"><a class="reference internal" href="../crud.html">MongoDB CRUD Operations</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorial/insert-documents.html">Insert Documents</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/insert-methods.html">Insert Methods</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/query-documents.html">Query Documents</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/query-embedded-documents.html">Query on Embedded/Nested Documents</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/query-arrays.html">Query an Array</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/query-array-of-documents.html">Query an Array of Embedded Documents</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/project-fields-from-query-results.html">Project Fields to Return from Query</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/query-for-null-fields.html">Query for Null or Missing Fields</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/iterate-a-cursor.html">Iterate a Cursor in <code class="docutils literal"><span class="pre">mongosh</span></code></a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/update-documents.html">Update Documents</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/update-documents-with-aggregation-pipeline.html">Updates with Aggregation Pipeline</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/update-methods.html">Update Methods</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/remove-documents.html">Delete Documents</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/delete-methods.html">Delete Methods</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/bulk-write-operations.html">Bulk Write Operations</a></li><li class="toctree-l2"><a class="reference internal" href="../core/retryable-writes.html">Retryable Writes</a></li><li class="toctree-l2"><a class="reference internal" href="../core/retryable-reads.html">Retryable Reads</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/sql-comparison.html">SQL to MongoDB Mapping Chart</a></li><li class="toctree-l2"><a class="reference internal" href="../text-search.html">Text Search</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/link-text-indexes.html">Perform a Text Search (Legacy)</a></li><li class="toctree-l3"><a class="reference internal" href="../core/text-search-operators.html">Text Search Operators (Legacy)</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/text-search-in-aggregation.html">Text Search in the Aggregation Pipeline</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/text-search-languages.html">Text Search Languages</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../geospatial-queries.html">Geospatial Queries</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/geospatial-tutorial.html">Find Restaurants with Geospatial Queries</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/geojson.html">GeoJSON Objects</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/read-concern.html">Read Isolation (Read Concern)</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/read-concern-local.html">Read Concern <code class="docutils literal"><span class="pre">&quot;local&quot;</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/read-concern-available.html">Read Concern <code class="docutils literal"><span class="pre">&quot;available&quot;</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/read-concern-majority.html">Read Concern <code class="docutils literal"><span class="pre">&quot;majority&quot;</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/read-concern-linearizable.html">Read Concern <code class="docutils literal"><span class="pre">&quot;linearizable&quot;</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/read-concern-snapshot.html">Read Concern <code class="docutils literal"><span class="pre">&quot;snapshot&quot;</span></code></a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/write-concern.html">Write Acknowledgement (Write Concern)</a></li><li class="toctree-l2"><a class="reference internal" href="../core/crud.html">MongoDB CRUD Concepts</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/analyze-query-plan.html">Analyze Query Performance</a></li><li class="toctree-l3"><a class="reference internal" href="../core/write-operations-atomicity.html">Atomicity and Transactions</a></li><li class="toctree-l3"><a class="reference internal" href="../core/distributed-queries.html">Distributed Queries</a></li><li class="toctree-l3"><a class="reference internal" href="../core/dot-dollar-considerations.html">Field Names with Periods (<code class="docutils literal"><span class="pre">.</span></code>) and Dollar Signs (<code class="docutils literal"><span class="pre">$</span></code>)</a></li><li class="toctree-l3"><a class="reference internal" href="../core/read-isolation-consistency-recency.html">Read Isolation, Consistency, and Recency</a><ul><li class="toctree-l4"><a class="reference internal" href="../core/causal-consistency-read-write-concerns.html">Causal Consistency and Read and Write Concerns</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/query-optimization.html">Query Optimization</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/evaluate-operation-performance.html">Evaluate Performance of Current Operations</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/optimize-query-performance-with-indexes-and-projections.html">Optimize Query Performance</a></li><li class="toctree-l4"><a class="reference internal" href="../core/write-performance.html">Write Operation Performance</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/explain-results.html">Explain Results</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/query-plans.html">Query Plans</a></li><li class="toctree-l3"><a class="reference internal" href="../core/tailable-cursors.html">Tailable Cursors</a></li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../aggregation.html">Aggregation Operations</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/aggregation-pipeline.html">Aggregation Pipeline</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/aggregation-pipeline-optimization.html">Aggregation Pipeline Optimization</a></li><li class="toctree-l3"><a class="reference internal" href="../core/aggregation-pipeline-limits.html">Aggregation Pipeline Limits</a></li><li class="toctree-l3"><a class="reference internal" href="../core/aggregation-pipeline-sharded-collections.html">Aggregation Pipeline and Sharded Collections</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/aggregation-zip-code-data-set.html">Example with ZIP Code Data</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/aggregation-with-user-preference-data.html">Example with User Preference Data</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/aggregation.html">Aggregation Reference</a><ul><li class="toctree-l3"><a class="reference internal" href="../meta/aggregation-quick-reference.html">Aggregation Pipeline Quick Reference</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation/interface.html">Aggregation Commands</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/aggregation-commands-comparison.html">Aggregation Commands Comparison</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/aggregation-variables.html">Variables in Aggregation Expressions</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/sql-aggregation-comparison.html">SQL to Aggregation Mapping Chart</a></li><li class="toctree-l3"><a class="reference external" href="https://www.practical-mongodb-aggregations.com">Practical MongoDB Aggregations (e-book)</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/map-reduce.html">Map-Reduce</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/map-reduce-sharded-collections.html">Map-Reduce and Sharded Collections</a></li><li class="toctree-l3"><a class="reference internal" href="../core/map-reduce-concurrency.html">Map-Reduce Concurrency</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/map-reduce-examples.html">Map-Reduce Examples</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/perform-incremental-map-reduce.html">Perform Incremental Map-Reduce</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/troubleshoot-map-function.html">Troubleshoot the Map Function</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/troubleshoot-reduce-function.html">Troubleshoot the Reduce Function</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/map-reduce-to-aggregation-pipeline.html">Map-Reduce to Aggregation Pipeline</a></li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../data-modeling.html">Data Models</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/data-modeling-introduction.html">Data Modeling Introduction</a></li><li class="toctree-l2"><a class="reference internal" href="../core/schema-validation.html">Schema Validation</a></li><li class="toctree-l2"><a class="reference internal" href="../core/data-models.html">Data Modeling Concepts</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/data-model-design.html">Data Model Design</a></li><li class="toctree-l3"><a class="reference internal" href="../core/data-model-operations.html">Operational Factors and Data Models</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../applications/data-models.html">Data Model Examples and Patterns</a><ul><li class="toctree-l3"><a class="reference internal" href="../applications/data-models-relationships.html">Model Relationships Between Documents</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-embedded-one-to-one-relationships-between-documents.html">Model One-to-One Relationships with Embedded Documents</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-embedded-one-to-many-relationships-between-documents.html">Model One-to-Many Relationships with Embedded Documents</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-referenced-one-to-many-relationships-between-documents.html">Model One-to-Many Relationships with Document References</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../applications/data-models-tree-structures.html">Model Tree Structures</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-tree-structures-with-parent-references.html">Model Tree Structures with Parent References</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-tree-structures-with-child-references.html">Model Tree Structures with Child References</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-tree-structures-with-ancestors-array.html">Model Tree Structures with an Array of Ancestors</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-tree-structures-with-materialized-paths.html">Model Tree Structures with Materialized Paths</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-tree-structures-with-nested-sets.html">Model Tree Structures with Nested Sets</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../applications/data-models-applications.html">Model Specific Application Contexts</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-data-for-atomic-operations.html">Model Data for Atomic Operations</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-data-for-keyword-search.html">Model Data to Support Keyword Search</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-data-for-schema-versioning.html">Model Data for Schema Versioning</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-monetary-data.html">Model Monetary Data</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-iot-data.html">Model IoT Data</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/model-computed-data.html">Model Computed Data</a></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/data-models.html">Data Model Reference</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/database-references.html">Database References</a></li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../core/transactions.html">Transactions</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/transactions-in-applications.html">Drivers API</a></li><li class="toctree-l2"><a class="reference internal" href="../core/transactions-production-consideration.html">Production Considerations</a></li><li class="toctree-l2"><a class="reference internal" href="../core/transactions-sharded-clusters.html">Production Considerations (Sharded Clusters)</a></li><li class="toctree-l2"><a class="reference internal" href="../core/transactions-operations.html">Transactions and Operations</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../indexes.html">Indexes</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/index-single.html">Single Field Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../core/index-compound.html">Compound Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../core/index-multikey.html">Multikey Indexes</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/multikey-index-bounds.html">Multikey Index Bounds</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/index-text.html">Text Indexes</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/specify-language-for-text-index.html">Specify a Language for Text Index</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/avoid-text-index-name-limit.html">Specify Name for <code class="docutils literal"><span class="pre">text</span></code> Index</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/control-results-of-text-search.html">Control Search Results with Weights</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/limit-number-of-items-scanned-for-text-search.html">Limit the Number of Entries Scanned</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/index-wildcard.html">Wildcard Indexes</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/index-wildcard-restrictions.html">Wildcard Index Restrictions</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/2dsphere.html"><code class="docutils literal"><span class="pre">2dsphere</span></code> Indexes</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/query-a-2dsphere-index.html">Query a <code class="docutils literal"><span class="pre">2dsphere</span></code> Index</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/2d.html"><code class="docutils literal"><span class="pre">2d</span></code> Indexes</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/build-a-2d-index.html">Create a <code class="docutils literal"><span class="pre">2d</span></code> Index</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/query-a-2d-index.html">Query a <code class="docutils literal"><span class="pre">2d</span></code> Index</a></li><li class="toctree-l3"><a class="reference internal" href="../core/geospatial-indexes.html"><code class="docutils literal"><span class="pre">2d</span></code> Index Internals</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/calculate-distances-using-spherical-geometry-with-2d-geospatial-indexes.html">Calculate Distance Using Spherical Geometry</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/geohaystack.html"><code class="docutils literal"><span class="pre">geoHaystack</span></code> Indexes</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/build-a-geohaystack-index.html">Create a Haystack Index</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/query-a-geohaystack-index.html">Query a Haystack Index</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/index-hashed.html">Hashed Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../core/index-properties.html">Index Properties</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/index-ttl.html">TTL Indexes</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/expire-data.html">Expire Data from Collections by Setting TTL</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/index-unique.html">Unique Indexes</a></li><li class="toctree-l3"><a class="reference internal" href="../core/index-partial.html">Partial Indexes</a></li><li class="toctree-l3"><a class="reference internal" href="../core/index-case-insensitive.html">Case Insensitive Indexes</a></li><li class="toctree-l3"><a class="reference internal" href="../core/index-hidden.html">Hidden Indexes</a></li><li class="toctree-l3"><a class="reference internal" href="../core/index-sparse.html">Sparse Indexes</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/index-creation.html">Index Builds on Populated Collections</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/build-indexes-on-replica-sets.html">Rolling Index Builds on Replica Sets</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/build-indexes-on-sharded-clusters.html">Rolling Index Builds on Sharded Clusters</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/index-intersection.html">Index Intersection</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/manage-indexes.html">Manage Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/measure-index-use.html">Measure Index Use</a></li><li class="toctree-l2"><a class="reference internal" href="../applications/indexes.html">Indexing Strategies</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/equality-sort-range-rule.html">The ESR (Equality, Sort, Range) Rule</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/create-indexes-to-support-queries.html">Create Indexes to Support Your Queries</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/sort-results-with-indexes.html">Use Indexes to Sort Query Results</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/ensure-indexes-fit-ram.html">Ensure Indexes Fit in RAM</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/create-queries-that-ensure-selectivity.html">Create Queries that Ensure Selectivity</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/indexes.html">Indexing Reference</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a><ul><li class="toctree-l2"><a class="reference internal" href="../administration/security-checklist.html">Security Checklist</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/enable-authentication.html">Enable Access Control</a></li><li class="toctree-l2"><a class="reference internal" href="../core/authentication.html">Authentication</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/security-scram.html">SCRAM</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/configure-scram-client-authentication.html">Use SCRAM to Authenticate Clients</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/security-x.509.html">x.509</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/configure-x509-client-authentication.html">Use x.509 Certificates to Authenticate Clients</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/kerberos.html">Kerberos Authentication</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/control-access-to-mongodb-with-kerberos-authentication.html">Configure MongoDB with Kerberos Authentication on Linux</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/control-access-to-mongodb-windows-with-kerberos-authentication.html">Configure MongoDB with Kerberos Authentication on Windows</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/troubleshoot-kerberos.html">Troubleshoot Kerberos Authentication</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/kerberos-auth-activedirectory-authz.html">Configure MongoDB with Kerberos Authentication and Active Directory Authorization</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/security-ldap.html">LDAP Proxy Authentication</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/configure-ldap-sasl-activedirectory.html">Authenticate Using SASL and LDAP with ActiveDirectory</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/configure-ldap-sasl-openldap.html">Authenticate Using SASL and LDAP with OpenLDAP</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/authenticate-nativeldap-activedirectory.html">Authenticate and Authorize Users Using Active Directory via Native LDAP</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/security-internal-authentication.html">Internal/Membership Authentication</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/deploy-replica-set-with-keyfile-access-control.html">Deploy Replica Set With Keyfile Authentication</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/enforce-keyfile-access-control-in-existing-replica-set.html">Update Replica Set to Keyfile Authentication</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/enforce-keyfile-access-control-in-existing-replica-set-without-downtime.html">Update Replica Set to Keyfile Authentication (No Downtime)</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/deploy-sharded-cluster-with-keyfile-access-control.html">Deploy Sharded Cluster with Keyfile Authentication</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/enforce-keyfile-access-control-in-existing-sharded-cluster.html">Update Sharded Cluster to Keyfile Authentication</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/enforce-keyfile-access-control-in-existing-sharded-cluster-no-downtime.html">Update Sharded Cluster to Keyfile Authentication (No Downtime)</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/rotate-key-replica-set.html">Rotate Keys for Replica Sets</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/rotate-key-sharded-cluster.html">Rotate Keys for Sharded Clusters</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/configure-x509-member-authentication.html">Use x.509 Certificate for Membership Authentication</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/upgrade-keyfile-to-x509.html">Upgrade from Keyfile Authentication to x.509 Authentication</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/rotate-x509-membership-certificates.html">Rolling Update of x.509 Cluster Certificates that Contain New DN</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/localhost-exception.html">Localhost Exception</a></li><li class="toctree-l3"><a class="reference internal" href="../core/security-users.html">Users</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/create-users.html">Create a User</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/authenticate-a-user.html">Authenticate a User</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/list-users.html">List Users</a></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/authorization.html">Role-Based Access Control</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/built-in-roles.html">Built-In Roles</a></li><li class="toctree-l3"><a class="reference internal" href="../core/security-user-defined-roles.html">User-Defined Roles</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/manage-users-and-roles.html">Manage Users and Roles</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/change-own-password-and-custom-data.html">Change Your Password and Custom Data</a></li><li class="toctree-l3"><a class="reference internal" href="../core/collection-level-access-control.html">Collection-Level Access Control</a></li><li class="toctree-l3"><a class="reference internal" href="../core/security-ldap-external.html">LDAP Authorization</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/security-data-encryption.html">Encryption</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/security-in-use-encryption.html">In-Use Encryption</a><ul><li class="toctree-l4"><a class="reference internal" href="../core/queryable-encryption.html">Introduction</a><ul><li class="toctree-l5"><a class="reference internal" href="../core/queryable-encryption/features.html">Features</a></li><li class="toctree-l5"><a class="reference internal" href="../core/queryable-encryption/install.html">Installation Requirements</a></li><li class="toctree-l5"><a class="reference internal" href="../core/queryable-encryption/quick-start.html">Quick Start</a></li><li class="toctree-l5"><a class="reference internal" href="../core/queryable-encryption/fundamentals.html">Fundamentals</a><ul><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/fundamentals/encrypt-and-query.html">Field Encryption and Queryability</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/fundamentals/manage-collections.html">Encrypted Collection Management</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/fundamentals/keys-key-vaults.html">Keys and Key Vaults</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/fundamentals/manage-keys.html">Encryption Key Management</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/fundamentals/kms-providers.html">KMS Providers</a></li></ul></li><li class="toctree-l5"><a class="reference internal" href="../core/queryable-encryption/tutorials.html">Tutorials</a><ul><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/tutorials/aws/aws-automatic.html">Use Automatic  with AWS</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/tutorials/azure/azure-automatic.html">Use Automatic  with Azure</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/tutorials/gcp/gcp-automatic.html">Use Automatic  with GCP</a></li></ul></li><li class="toctree-l5"><a class="reference internal" href="../core/queryable-encryption/reference.html">Reference</a><ul><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/reference/compatibility.html">Compatibility</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/reference/limitations.html">Limitations</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/reference/supported-operations.html">Supported Operations for</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/reference/qe-options-clients.html">MongoClient Options for</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/reference/shared-library.html">Overview</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/reference/libmongocrypt.html">Install libmongocrypt</a></li><li class="toctree-l6"><a class="reference internal" href="../core/queryable-encryption/reference/mongocryptd.html">Install and Configure mongocryptd</a></li></ul></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../core/csfle.html">Introduction</a><ul><li class="toctree-l5"><a class="reference internal" href="../core/csfle/features.html">Features</a></li><li class="toctree-l5"><a class="reference internal" href="../core/csfle/install.html">Installation Requirements</a></li><li class="toctree-l5"><a class="reference internal" href="../core/csfle/quick-start.html">Quick Start</a></li><li class="toctree-l5"><a class="reference internal" href="../core/csfle/fundamentals.html">Fundamentals</a><ul><li class="toctree-l6"><a class="reference internal" href="../core/csfle/fundamentals/automatic-encryption.html">Automatic Encryption</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/fundamentals/manual-encryption.html">Overview</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/fundamentals/create-schema.html">Encryption Schemas</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/fundamentals/keys-key-vaults.html">Keys and Key Vaults</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/fundamentals/manage-keys.html">Encryption Key Management</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/fundamentals/encryption-algorithms.html">Fields and Encryption Types</a></li></ul></li><li class="toctree-l5"><a class="reference internal" href="../core/csfle/tutorials.html">Tutorials</a><ul><li class="toctree-l6"><a class="reference internal" href="../core/csfle/tutorials/aws/aws-automatic.html">Use Automatic  with AWS</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/tutorials/azure/azure-automatic.html">Use Automatic  with Azure</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/tutorials/gcp/gcp-automatic.html">Use Automatic  with GCP</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/tutorials/kmip/kmip-automatic.html">Use Automatic  with KMIP</a></li></ul></li><li class="toctree-l5"><a class="reference internal" href="../core/csfle/reference.html">Reference</a><ul><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/compatibility.html">Compatibility</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/limitations.html">Limitations</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/encryption-schemas.html">Encryption Schemas</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/server-side-schema.html">Server-Side Schema Enforcement</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/supported-operations.html">Supported Operations for Automatic Encryption</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/csfle-options-clients.html">-Specific MongoClient Options</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/kms-providers.html">KMS Providers</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/encryption-components.html">Encryption Components</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/decryption.html">How CSFLE Decrypts Documents</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/cryptographic-primitives.html">Cryptographic Primitives</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/mongocryptd.html">Install and Configure mongocryptd</a></li><li class="toctree-l6"><a class="reference internal" href="../core/csfle/reference/libmongocrypt.html">Install libmongocrypt</a></li></ul></li></ul></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/security-encryption-at-rest.html">Encryption at Rest</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/configure-encryption.html">Configure Encryption</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/rotate-encryption-key.html">Rotate Encryption Keys</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/security-transport-encryption.html">TLS/SSL (Transport Encryption)</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/configure-ssl.html">Configure <code class="docutils literal"><span class="pre">mongod</span></code> and <code class="docutils literal"><span class="pre">mongos</span></code> for TLS/SSL</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/configure-ssl-clients.html">TLS/SSL Configuration for Clients</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/upgrade-cluster-to-ssl.html">Upgrade a Cluster to Use TLS/SSL</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/configure-fips.html">Configure MongoDB for FIPS</a></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/auditing.html">Auditing</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-auditing.html">Configure Auditing</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-audit-filters.html">Configure Audit Filters</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/audit-message.html">System Event Audit Messages</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/security-hardening.html">Network and Configuration Hardening</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/security-mongodb-configuration.html">IP Binding</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-linux-iptables-firewall.html">Configure Linux <code class="docutils literal"><span class="pre">iptables</span></code> Firewall for MongoDB</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-windows-netsh-firewall.html">Configure Windows <code class="docutils literal"><span class="pre">netsh</span></code> Firewall for MongoDB</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/implement-field-level-redaction.html">Implement Field Level Redaction</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/security.html">Security Reference</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/system-roles-collection.html"><code class="docutils literal"><span class="pre">system.roles</span></code> Collection</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/system-users-collection.html"><code class="docutils literal"><span class="pre">system.users</span></code> Collection</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/resource-document.html">Resource Document</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/privilege-actions.html">Privilege Actions</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/create-a-vulnerability-report.html">Create a Vulnerability Report</a></li><li class="toctree-l2"><a class="reference internal" href="../appendix/security.html">Appendix</a><ul><li class="toctree-l3"><a class="reference internal" href="../appendix/security/appendixA-openssl-ca.html">Appendix A - OpenSSL CA Certificate for Testing</a></li><li class="toctree-l3"><a class="reference internal" href="../appendix/security/appendixB-openssl-server.html">Appendix B - OpenSSL Server Certificates for Testing</a></li><li class="toctree-l3"><a class="reference internal" href="../appendix/security/appendixC-openssl-client.html">Appendix C - OpenSSL Client Certificates for Testing</a></li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../changeStreams.html">Change Streams</a><ul><li class="toctree-l2"><a class="reference internal" href="../administration/change-streams-production-recommendations.html">Change Streams Production Recommendations</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/change-events.html">Change Events</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../replication.html">Replication</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/replica-set-members.html">Replica Set Members</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/replica-set-primary.html">Replica Set Primary</a></li><li class="toctree-l3"><a class="reference internal" href="../core/replica-set-secondary.html">Replica Set Secondary Members</a><ul><li class="toctree-l4"><a class="reference internal" href="../core/replica-set-priority-0-member.html">Priority 0 Replica Set Members</a></li><li class="toctree-l4"><a class="reference internal" href="../core/replica-set-hidden-member.html">Hidden Replica Set Members</a></li><li class="toctree-l4"><a class="reference internal" href="../core/replica-set-delayed-member.html">Delayed Replica Set Members</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/replica-set-arbiter.html">Replica Set Arbiter</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/replica-set-oplog.html">Replica Set Oplog</a></li><li class="toctree-l2"><a class="reference internal" href="../core/replica-set-sync.html">Replica Set Data Synchronization</a></li><li class="toctree-l2"><a class="reference internal" href="../core/replica-set-architectures.html">Replica Set Deployment Architectures</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/replica-set-architecture-three-members.html">Three Member Replica Sets</a></li><li class="toctree-l3"><a class="reference internal" href="../core/replica-set-architecture-geographically-distributed.html">Replica Sets Distributed Across Two or More Data Centers</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/replica-set-high-availability.html">Replica Set High Availability</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/replica-set-elections.html">Replica Set Elections</a></li><li class="toctree-l3"><a class="reference internal" href="../core/replica-set-rollbacks.html">Rollbacks During Replica Set Failover</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../applications/replication.html">Replica Set Read and Write Semantics</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/replica-set-write-concern.html">Write Concern for Replica Sets</a></li><li class="toctree-l3"><a class="reference internal" href="../core/read-preference.html">Read Preference</a><ul><li class="toctree-l4"><a class="reference internal" href="../core/read-preference-tags.html">Tag Sets</a></li><li class="toctree-l4"><a class="reference internal" href="../core/read-preference-staleness.html">maxStalenessSeconds</a></li><li class="toctree-l4"><a class="reference internal" href="../core/read-preference-hedge-option.html">Hedged Read Option</a></li><li class="toctree-l4"><a class="reference internal" href="../core/read-preference-use-cases.html">Read Preference Use Cases</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/read-preference-mechanics.html">Server Selection Algorithm</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../administration/replica-set-deployment.html">Replica Set Deployment Tutorials</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/deploy-replica-set.html">Deploy a Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/deploy-replica-set-for-testing.html">Deploy a Replica Set for Testing and Development</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/deploy-geographically-distributed-replica-set.html">Deploy a Geographically Redundant Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/add-replica-set-arbiter.html">Add an Arbiter to Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/convert-standalone-to-replica-set.html">Convert a Standalone to a Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/expand-replica-set.html">Add Members to a Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/remove-replica-set-member.html">Remove Members from Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/replace-replica-set-member.html">Replace a Replica Set Member</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../administration/replica-set-member-configuration.html">Member Configuration Tutorials</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/adjust-replica-set-member-priority.html">Adjust Priority for Replica Set Member</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-secondary-only-replica-set-member.html">Prevent Secondary from Becoming Primary</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-a-hidden-replica-set-member.html">Configure a Hidden Replica Set Member</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-a-delayed-replica-set-member.html">Configure a Delayed Replica Set Member</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-a-non-voting-replica-set-member.html">Configure Non-Voting Replica Set Member</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/convert-secondary-into-arbiter.html">Convert a Secondary to an Arbiter</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../administration/replica-set-maintenance.html">Replica Set Maintenance Tutorials</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/change-oplog-size.html">Change the Size of the Oplog</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/perform-maintence-on-replica-set-members.html">Perform Maintenance on Replica Set Members</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/force-member-to-be-primary.html">Force a Member to Become Primary</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/resync-replica-set-member.html">Resync a Member of a Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-replica-set-tag-sets.html">Configure Replica Set Tag Sets</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/reconfigure-replica-set-with-unavailable-members.html">Reconfigure a Replica Set with Unavailable Members</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/manage-chained-replication.html">Manage Chained Replication</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/change-hostnames-in-a-replica-set.html">Change Hostnames in a Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-replica-set-secondary-sync-target.html">Configure a Secondary’s Sync Target</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/rename-unsharded-replica-set.html">Rename a Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/modify-psa-replica-set-safely.html">Modify PSA Replica Set Safely</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/mitigate-psa-performance-issues.html">Mitigate Performance Issues with PSA Replica Set</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/replication.html">Replication Reference</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/replica-configuration.html">Replica Set Configuration</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/replica-set-protocol-versions.html">Replica Set Protocol Version</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/troubleshoot-replica-sets.html">Troubleshoot Replica Sets</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/local-database.html">The <code class="docutils literal"><span class="pre">local</span></code> Database</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/replica-states.html">Replica Set Member States</a></li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../sharding.html">Sharding</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/sharded-cluster-components.html">Sharded Cluster Components</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/sharded-cluster-shards.html">Shards</a></li><li class="toctree-l3"><a class="reference internal" href="../core/sharded-cluster-config-servers.html">Config Servers (metadata)</a></li><li class="toctree-l3"><a class="reference internal" href="../core/sharded-cluster-query-router.html">Router (mongos)</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/sharding-shard-key.html">Shard Keys</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/sharding-shard-a-collection.html">Shard a Collection</a></li><li class="toctree-l3"><a class="reference internal" href="../core/sharding-choose-a-shard-key.html">Choose a Shard Key</a></li><li class="toctree-l3"><a class="reference internal" href="../core/sharding-change-a-shard-key.html">Change a Shard Key</a><ul><li class="toctree-l4"><a class="reference internal" href="../core/sharding-refine-a-shard-key.html">Refine a Shard Key</a></li><li class="toctree-l4"><a class="reference internal" href="../core/sharding-reshard-a-collection.html">Reshard a Collection</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/sharding-change-shard-key-value.html">Change a Document’s Shard Key Value</a></li><li class="toctree-l3"><a class="reference internal" href="../core/sharding-set-missing-shard-key-fields.html">Set Missing Shard Key Fields</a></li><li class="toctree-l3"><a class="reference internal" href="../core/sharding-find-shard-key.html">Find a Shard Key</a></li><li class="toctree-l3"><a class="reference internal" href="../core/sharding-troubleshooting-shard-keys.html">Troubleshoot Shard Keys</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/hashed-sharding.html">Hashed Sharding</a></li><li class="toctree-l2"><a class="reference internal" href="../core/ranged-sharding.html">Ranged Sharding</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorial/deploy-shard-cluster.html">Deploy a Sharded Cluster</a></li><li class="toctree-l2"><a class="reference internal" href="../core/zone-sharding.html">Zones</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/manage-shard-zone.html">Manage Shard Zones</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/sharding-segmenting-data-by-location.html">Segmenting Data by Location</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/sharding-tiered-hardware-for-varying-slas.html">Tiered Hardware for Varying SLA or SLO</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/sharding-segmenting-shards.html">Segmenting Data by Application or Customer</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/sharding-high-availability-writes.html">Distributed Local Writes for Insert Only Workloads</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/sharding-data-partitioning.html">Data Partitioning with Chunks</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/create-chunks-in-sharded-cluster.html">Create Chunks in a Sharded Cluster</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/split-chunks-in-sharded-cluster.html">Split Chunks in a Sharded Cluster</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/merge-chunks-in-sharded-cluster.html">Merge Chunks in a Sharded Cluster</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/modify-chunk-size-in-sharded-cluster.html">Modify Chunk Size in a Sharded Cluster</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/sharding-balancer-administration.html">Balancer</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/manage-sharded-cluster-balancer.html">Manage Sharded Cluster Balancer</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/migrate-chunks-in-sharded-cluster.html">Migrate Chunks in a Sharded Cluster</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../administration/sharded-cluster-administration.html">Administration</a><ul><li class="toctree-l3"><a class="reference internal" href="../administration/sharded-cluster-config-servers.html">Config Server Administration</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/replace-config-server.html">Replace a Config Server</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/view-sharded-cluster-configuration.html">View Cluster Configuration</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/restart-sharded-cluster.html">Restart a Sharded Cluster</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/migrate-sharded-cluster-to-new-hardware.html">Migrate a Sharded Cluster to Different Hardware</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/add-shards-to-shard-cluster.html">Add Shards to a Cluster</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/remove-shards-from-cluster.html">Remove Shards from an Existing Sharded Cluster</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/clear-jumbo-flag.html">Clear <code class="docutils literal"><span class="pre">jumbo</span></code> Flag</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/backup-sharded-cluster-metadata.html">Back Up Cluster Metadata</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/convert-sharded-cluster-to-replica-set.html">Convert Sharded Cluster to Replica Set</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/convert-replica-set-to-replicated-shard-cluster.html">Convert a Replica Set to a Sharded Cluster</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/convert-shard-standalone-to-shard-replica-set.html">Convert a Shard Standalone to a Shard Replica Set</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/sharding.html">Sharding Reference</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/sharded-cluster-requirements.html">Operational Restrictions</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/troubleshoot-sharded-clusters.html">Troubleshoot Sharded Clusters</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/config-database.html">Config Database</a></li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../administration.html">Administration</a><ul><li class="toctree-l2"><a class="reference internal" href="../administration/production-notes.html">Production Notes</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/production-checklist-operations.html">Operations Checklist</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/production-checklist-development.html">Development Checklist</a></li><li class="toctree-l2"><a class="reference internal" href="../administration/analyzing-mongodb-performance.html">Performance</a><ul><li class="toctree-l3"><a class="reference internal" href="../administration/connection-pool-overview.html">Connection Pool Overview</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/connection-pool-performance-tuning.html">Tuning Your Connection Pool Settings</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/manage-the-database-profiler.html">Database Profiler</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/database-profiler.html">Database Profiler Output</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/transparent-huge-pages.html">Disable Transparent Huge Pages (THP)</a></li><li class="toctree-l3"><a class="reference internal" href="../administration/health-managers.html">Manage Sharded Cluster Health with Health Managers</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/ulimit.html">UNIX <code class="docutils literal"><span class="pre">ulimit</span></code> Settings</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../administration/configuration-and-maintenance.html">Configuration and Maintenance</a><ul><li class="toctree-l3"><a class="reference internal" href="../administration/configuration.html">Run-time Database Configuration</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/upgrade-revision.html">Upgrade to the Latest Revision of MongoDB</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/manage-mongodb-processes.html">Manage <code class="docutils literal"><span class="pre">mongod</span></code> Processes</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/terminate-running-operations.html">Terminate Running Operations</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/rotate-log-files.html">Rotate Log Files</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../data-center-awareness.html">Data Center Awareness</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/workload-isolation.html">Workload Isolation in MongoDB Deployments</a></li><li class="toctree-l3"><a class="reference internal" href="../core/zone-sharding.html">Zones</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/manage-shard-zone.html">Manage Shard Zones</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/sharding-segmenting-data-by-location.html">Segmenting Data by Location</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/sharding-tiered-hardware-for-varying-slas.html">Tiered Hardware for Varying SLA or SLO</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/sharding-segmenting-shards.html">Segmenting Data by Application or Customer</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/sharding-high-availability-writes.html">Distributed Local Writes for Insert Only Workloads</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/manage-shard-zone.html">Manage Shard Zones</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/backups.html">MongoDB Backup Methods</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/backup-with-filesystem-snapshots.html">Back Up and Restore with Filesystem Snapshots</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/backup-and-restore-tools.html">Back Up and Restore with MongoDB Tools</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/restore-replica-set-from-backup.html">Restore a Replica Set from MongoDB Backups</a></li><li class="toctree-l3"><a class="reference internal" href="../administration/backup-sharded-clusters.html">Backup and Restore Sharded Clusters</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/backup-sharded-cluster-with-filesystem-snapshots.html">Back Up a Sharded Cluster with File System Snapshots</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/backup-sharded-cluster-with-database-dumps.html">Back Up a Sharded Cluster with Database Dumps</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/schedule-backup-window-for-sharded-clusters.html">Schedule Backup Window for Sharded Clusters</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/restore-sharded-cluster.html">Restore a Sharded Cluster</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/recover-data-following-unexpected-shutdown.html">Recover a Standalone after an Unexpected Shutdown</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../administration/monitoring.html">Monitoring for MongoDB</a><ul><li class="toctree-l3"><a class="reference internal" href="../administration/free-monitoring.html">Free Monitoring</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/monitor-with-snmp.html">Monitor MongoDB With SNMP on Linux</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/monitor-with-snmp-on-windows.html">Monitor MongoDB Windows with SNMP</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/troubleshoot-snmp.html">Troubleshoot SNMP</a></li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../storage.html">Storage</a><ul><li class="toctree-l2"><a class="reference internal" href="../core/storage-engines.html">Storage Engines</a><ul><li class="toctree-l3"><a class="reference internal" href="../core/wiredtiger.html">WiredTiger Storage Engine</a><ul><li class="toctree-l4"><a class="reference internal" href="../tutorial/change-standalone-wiredtiger.html">Change Standalone to WiredTiger</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/change-replica-set-wiredtiger.html">Change Replica Set to WiredTiger</a></li><li class="toctree-l4"><a class="reference internal" href="../tutorial/change-sharded-cluster-wiredtiger.html">Change Sharded Cluster to WiredTiger</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../core/inmemory.html">In-Memory Storage Engine</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/journaling.html">Journaling</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/manage-journaling.html">Manage Journaling</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../core/gridfs.html">GridFS</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/storage.html">FAQ: MongoDB Storage</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul><li class="toctree-l2"><a class="reference internal" href="../faq/fundamentals.html">FAQ: MongoDB Fundamentals</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/indexes.html">FAQ: Indexes</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/concurrency.html">FAQ: Concurrency</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/sharding.html">FAQ: Sharding with MongoDB</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/replica-sets.html">FAQ: Replication and Replica Sets</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/storage.html">FAQ: MongoDB Storage</a></li><li class="toctree-l2"><a class="reference internal" href="../faq/diagnostics.html">FAQ: MongoDB Diagnostics</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a><ul><li class="toctree-l2"><a class="reference internal" href="../reference/operator.html">Operators</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/operator/query.html">Query and Projection Operators</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/operator/query-comparison.html">Comparison Query Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/eq.html">$eq</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/gt.html">$gt</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/gte.html">$gte</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/in.html">$in</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/lt.html">$lt</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/lte.html">$lte</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/ne.html">$ne</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/nin.html">$nin</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/query-logical.html">Logical Query Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/and.html">$and</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/not.html">$not</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/nor.html">$nor</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/or.html">$or</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/query-element.html">Element Query Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/exists.html">$exists</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/type.html">$type</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/query-evaluation.html">Evaluation Query Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/expr.html">$expr</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/jsonSchema.html">$jsonSchema</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/mod.html">$mod</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/regex.html">$regex</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/text.html">$text</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/where.html">$where</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/query-geospatial.html">Geospatial Query Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/geoIntersects.html">$geoIntersects</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/geoWithin.html">$geoWithin</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/near.html">$near</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/nearSphere.html">$nearSphere</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/box.html">$box</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/center.html">$center</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/centerSphere.html">$centerSphere</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/geometry.html">$geometry</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/maxDistance.html">$maxDistance</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/minDistance.html">$minDistance</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/polygon.html">$polygon</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/uniqueDocs.html">$uniqueDocs</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/query-array.html">Array Query Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/all.html">$all</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/elemMatch.html">$elemMatch (query)</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/size.html">$size</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/query-bitwise.html">Bitwise Query Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/bitsAllClear.html">$bitsAllClear</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/bitsAllSet.html">$bitsAllSet</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/bitsAnyClear.html">$bitsAnyClear</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/bitsAnySet.html">$bitsAnySet</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/projection.html">Projection Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/projection/positional.html">$ (projection)</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/projection/elemMatch.html">$elemMatch (projection)</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/projection/slice.html">$slice (projection)</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/query-miscellaneous.html">Miscellaneous Query Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/comment.html">$comment</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/query/rand.html">$rand</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/meta/natural.html">$natural</a></li></ul></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/update.html">Update Operators</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/operator/update-field.html">Field Update Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/currentDate.html">$currentDate</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/inc.html">$inc</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/min.html">$min</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/max.html">$max</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/mul.html">$mul</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/rename.html">$rename</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/set.html">$set</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/setOnInsert.html">$setOnInsert</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/unset.html">$unset</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/update-array.html">Array Update Operators</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/positional.html">$ (update)</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/positional-all.html">$[]</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/positional-filtered.html">$[&lt;identifier&gt;]</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/addToSet.html">$addToSet</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/pop.html">$pop</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/pull.html">$pull</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/push.html">$push</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/pullAll.html">$pullAll</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/each.html">$each</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/position.html">$position</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/slice.html">$slice</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/sort.html">$sort</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/update-bitwise.html">Bitwise Update Operator</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/operator/update/bit.html">$bit</a></li></ul></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation-pipeline.html">Aggregation Pipeline Stages</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/addFields.html">$addFields (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/bucket.html">$bucket (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/bucketAuto.html">$bucketAuto (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/collStats.html">$collStats (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/count.html">$count (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/currentOp.html">$currentOp (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/densify.html">$densify (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/documents.html">$documents (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/facet.html">$facet (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/fill.html">$fill (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/geoNear.html">$geoNear (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/graphLookup.html">$graphLookup (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/group.html">$group (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/indexStats.html">$indexStats (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/limit.html">$limit (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/listLocalSessions.html">$listLocalSessions</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/listSessions.html">$listSessions</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/lookup.html">$lookup (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/match.html">$match (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/merge.html">$merge (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/out.html">$out (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html">$planCacheStats</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/project.html">$project (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/redact.html">$redact (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/replaceRoot.html">$replaceRoot (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/replaceWith.html">$replaceWith (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/sample.html">$sample (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/search.html">$search (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/searchMeta.html">$searchMeta (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/set.html">$set (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/setWindowFields.html">$setWindowFields (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/skip.html">$skip (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/sort.html">$sort (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/sortByCount.html">$sortByCount (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/unionWith.html">$unionWith (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/unset.html">$unset (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/unwind.html">$unwind (aggregation)</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/operator/aggregation.html">Aggregation Pipeline Operators</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/abs.html">$abs (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/accumulator.html">$accumulator (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/acos.html">$acos (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/acosh.html">$acosh (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/add.html">$add (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/addToSet.html">$addToSet (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/allElementsTrue.html">$allElementsTrue (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/and.html">$and (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/anyElementTrue.html">$anyElementTrue (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/arrayElemAt.html">$arrayElemAt (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/arrayToObject.html">$arrayToObject (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/asin.html">$asin (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/asinh.html">$asinh (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/atan.html">$atan (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/atan2.html">$atan2 (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/atanh.html">$atanh (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/avg.html">$avg (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/binarySize.html">$binarySize (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/bottom.html">$bottom (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/bottomN.html">$bottomN (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/bsonSize.html">$bsonSize (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/ceil.html">$ceil (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/cmp.html">$cmp (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/concat.html">$concat (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/concatArrays.html">$concatArrays (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/cond.html">$cond (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/convert.html">$convert (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/cos.html">$cos (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/cosh.html">$cosh (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/count-accumulator.html">$count (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/covariancePop.html">$covariancePop (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/covarianceSamp.html">$covarianceSamp (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dateAdd.html">$dateAdd (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dateDiff.html">$dateDiff (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dateFromParts.html">$dateFromParts (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dateFromString.html">$dateFromString (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dateSubtract.html">$dateSubtract (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dateToParts.html">$dateToParts (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dateToString.html">$dateToString (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dateTrunc.html">$dateTrunc (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dayOfMonth.html">$dayOfMonth (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dayOfWeek.html">$dayOfWeek (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/dayOfYear.html">$dayOfYear (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/degreesToRadians.html">$degreesToRadians (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/denseRank.html">$denseRank (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/derivative.html">$derivative (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/divide.html">$divide (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/documentNumber.html">$documentNumber (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/eq.html">$eq (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/exp.html">$exp (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/expMovingAvg.html">$expMovingAvg (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/filter.html">$filter (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/first.html">$first (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/firstN.html">$firstN (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/first-array-element.html">$first (array operator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/firstN-array-element.html">$firstN (array operator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/floor.html">$floor (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/function.html">$function (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/getField.html">$getField (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/gt.html">$gt (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/gte.html">$gte (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/hour.html">$hour (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/ifNull.html">$ifNull (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/in.html">$in (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/indexOfArray.html">$indexOfArray (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/indexOfBytes.html">$indexOfBytes (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/indexOfCP.html">$indexOfCP (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/integral.html">$integral (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/isArray.html">$isArray (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/isNumber.html">$isNumber (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/isoDayOfWeek.html">$isoDayOfWeek (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/isoWeek.html">$isoWeek (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/isoWeekYear.html">$isoWeekYear (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/last.html">$last (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/lastN.html">$lastN (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/last-array-element.html">$last (array operator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/lastN-array-element.html">$lastN (array operator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/let.html">$let (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/linearFill.html">$linearFill (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/literal.html">$literal (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/ln.html">$ln (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/locf.html">$locf (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/log.html">$log (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/log10.html">$log10 (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/lt.html">$lt (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/lte.html">$lte (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/ltrim.html">$ltrim (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/map.html">$map (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/max.html">$max (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/maxN.html">$maxN (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/maxN-array-element.html">$maxN (array operator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/mergeObjects.html">$mergeObjects (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/meta.html">$meta</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/min.html">$min (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/minN.html">$minN (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/minN-array-element.html">$minN (array operator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/millisecond.html">$millisecond (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/minute.html">$minute (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/mod.html">$mod (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/month.html">$month (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/multiply.html">$multiply (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/ne.html">$ne (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/not.html">$not (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/objectToArray.html">$objectToArray (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/or.html">$or (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/pow.html">$pow (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/push.html">$push (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/radiansToDegrees.html">$radiansToDegrees (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/rand.html">$rand (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/range.html">$range (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/rank.html">$rank (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/reduce.html">$reduce (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/regexFind.html">$regexFind (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/regexFindAll.html">$regexFindAll (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/regexMatch.html">$regexMatch (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/replaceOne.html">$replaceOne (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/replaceAll.html">$replaceAll (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/reverseArray.html">$reverseArray (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/round.html">$round (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/rtrim.html">$rtrim (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/sampleRate.html">$sampleRate (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/second.html">$second (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/setDifference.html">$setDifference (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/setEquals.html">$setEquals (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/setField.html">$setField (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/setIntersection.html">$setIntersection (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/setIsSubset.html">$setIsSubset (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/setUnion.html">$setUnion (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/shift.html">$shift (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/size.html">$size (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/sin.html">$sin (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/sinh.html">$sinh (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/slice.html">$slice (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/sortArray.html">$sortArray (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/split.html">$split (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/sqrt.html">$sqrt (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/stdDevPop.html">$stdDevPop (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/stdDevSamp.html">$stdDevSamp (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/strcasecmp.html">$strcasecmp (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/strLenBytes.html">$strLenBytes (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/strLenCP.html">$strLenCP (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/substr.html">$substr (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/substrBytes.html">$substrBytes (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/substrCP.html">$substrCP (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/subtract.html">$subtract (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/sum.html">$sum (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/switch.html">$switch (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/tan.html">$tan (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/tanh.html">$tanh (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toBool.html">$toBool (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toDate.html">$toDate (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toDecimal.html">$toDecimal (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toDouble.html">$toDouble(aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toInt.html">$toInt (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toLong.html">$toLong (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toObjectId.html">$toObjectId (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/top.html">$top (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/topN.html">$topN (aggregation accumulator)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toString.html">$toString (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toLower.html">$toLower (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/toUpper.html">$toUpper (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/tsIncrement.html">$tsIncrement (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/tsSecond.html">$tsSecond (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/trim.html">$trim (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/trunc.html">$trunc (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/type.html">$type (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/unsetField.html">$unsetField (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/week.html">$week (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/year.html">$year (aggregation)</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/operator/aggregation/zip.html">$zip (aggregation)</a></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/command.html">Database Commands</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-aggregation.html">Aggregation Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/aggregate.html">aggregate</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/count.html">count</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/distinct.html">distinct</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/mapReduce.html">mapReduce</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-geospatial.html">Geospatial Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/geoSearch.html">geoSearch</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-crud.html">Query and Write Operation Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/delete.html">delete</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/find.html">find</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/findAndModify.html">findAndModify</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getLastError.html">getLastError</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getMore.html">getMore</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/insert.html">insert</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/resetError.html">resetError</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/update.html">update</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-plan-cache.html">Query Plan Cache Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/planCacheClear.html">planCacheClear</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/planCacheClearFilters.html">planCacheClearFilters</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/planCacheListFilters.html">planCacheListFilters</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/planCacheSetFilter.html">planCacheSetFilter</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-authentication.html">Authentication Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/authenticate.html">authenticate</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getnonce.html">getnonce</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/logout.html">logout</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-user-management.html">User Management Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/createUser.html">createUser</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dropAllUsersFromDatabase.html">dropAllUsersFromDatabase</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dropUser.html">dropUser</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/grantRolesToUser.html">grantRolesToUser</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/revokeRolesFromUser.html">revokeRolesFromUser</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/updateUser.html">updateUser</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/usersInfo.html">usersInfo</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-role-management.html">Role Management Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/createRole.html">createRole</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dropRole.html">dropRole</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dropAllRolesFromDatabase.html">dropAllRolesFromDatabase</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/grantPrivilegesToRole.html">grantPrivilegesToRole</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/grantRolesToRole.html">grantRolesToRole</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/invalidateUserCache.html">invalidateUserCache</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/revokePrivilegesFromRole.html">revokePrivilegesFromRole</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/revokeRolesFromRole.html">revokeRolesFromRole</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/rolesInfo.html">rolesInfo</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/updateRole.html">updateRole</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-replication.html">Replication Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/applyOps.html">applyOps</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/hello.html">hello</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetAbortPrimaryCatchUp.html">replSetAbortPrimaryCatchUp</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetFreeze.html">replSetFreeze</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetGetConfig.html">replSetGetConfig</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetGetStatus.html">replSetGetStatus</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetInitiate.html">replSetInitiate</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetMaintenance.html">replSetMaintenance</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetReconfig.html">replSetReconfig</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetResizeOplog.html">replSetResizeOplog</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetStepDown.html">replSetStepDown</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/replSetSyncFrom.html">replSetSyncFrom</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-sharding.html">Sharding Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/abortReshardCollection.html">abortReshardCollection</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/addShard.html">addShard</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/addShardToZone.html">addShardToZone</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/balancerCollectionStatus.html">balancerCollectionStatus</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/balancerStart.html">balancerStart</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/balancerStatus.html">balancerStatus</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/balancerStop.html">balancerStop</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/checkShardingIndex.html">checkShardingIndex</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/clearJumboFlag.html">clearJumboFlag</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/cleanupOrphaned.html">cleanupOrphaned</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/cleanupReshardCollection.html">cleanupReshardCollection</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/commitReshardCollection.html">commitReshardCollection</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/configureCollectionBalancing.html">configureCollectionBalancing</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/enableSharding.html">enableSharding</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/flushRouterConfig.html">flushRouterConfig</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getShardMap.html">getShardMap</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getShardVersion.html">getShardVersion</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/isdbgrid.html">isdbgrid</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/listShards.html">listShards</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/medianKey.html">medianKey</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/moveChunk.html">moveChunk</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/movePrimary.html">movePrimary</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/mergeChunks.html">mergeChunks</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/refineCollectionShardKey.html">refineCollectionShardKey</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/removeShard.html">removeShard</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/removeShardFromZone.html">removeShardFromZone</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/reshardCollection.html">reshardCollection</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/setAllowMigrations.html">setAllowMigrations</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/setShardVersion.html">setShardVersion</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/shardCollection.html">shardCollection</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/shardingState.html">shardingState</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/split.html">split</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/splitVector.html">splitVector</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/unsetSharding.html">unsetSharding</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/updateZoneKeyRange.html">updateZoneKeyRange</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-sessions.html">Sessions Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/abortTransaction.html">abortTransaction</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/commitTransaction.html">commitTransaction</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/endSessions.html">endSessions</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/killAllSessions.html">killAllSessions</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/killAllSessionsByPattern.html">killAllSessionsByPattern</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/killSessions.html">killSessions</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/refreshSessions.html">refreshSessions</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/startSession.html">startSession</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-administration.html">Administration Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/cloneCollectionAsCapped.html">cloneCollectionAsCapped</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/collMod.html">collMod</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/compact.html">compact</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/connPoolSync.html">connPoolSync</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/convertToCapped.html">convertToCapped</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/create.html">create</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/createIndexes.html">createIndexes</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/currentOp.html">currentOp</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/drop.html">drop</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dropDatabase.html">dropDatabase</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dropConnections.html">dropConnections</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dropIndexes.html">dropIndexes</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/filemd5.html">filemd5</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/fsync.html">fsync</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/fsyncUnlock.html">fsyncUnlock</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getAuditConfig.html">getAuditConfig</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getDefaultRWConcern.html">getDefaultRWConcern</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getParameter.html">getParameter</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/killCursors.html">killCursors</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/killOp.html">killOp</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/listCollections.html">listCollections</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/listDatabases.html">listDatabases</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/listIndexes.html">listIndexes</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/logRotate.html">logRotate</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/reIndex.html">reIndex</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/renameCollection.html">renameCollection</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/rotateCertificates.html">rotateCertificates</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/setAuditConfig.html">setAuditConfig</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html">setFeatureCompatibilityVersion</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/setIndexCommitQuorum.html">setIndexCommitQuorum</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/setParameter.html">setParameter</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/setDefaultRWConcern.html">setDefaultRWConcern</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/setUserWriteBlockMode.html">setUserWriteBlockMode</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/shutdown.html">shutdown</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-diagnostic.html">Diagnostic Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/buildInfo.html">buildInfo</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/collStats.html">collStats</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/connPoolStats.html">connPoolStats</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/connectionStatus.html">connectionStatus</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/cursorInfo.html">cursorInfo</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dataSize.html">dataSize</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dbHash.html">dbHash</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/dbStats.html">dbStats</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/diagLogging.html">diagLogging</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/driverOIDTest.html">driverOIDTest</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/explain.html">explain</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/features.html">features</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getCmdLineOpts.html">getCmdLineOpts</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/getLog.html">getLog</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/hostInfo.html">hostInfo</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/isSelf.html">isSelf</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/listCommands.html">listCommands</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/lockInfo.html">lockInfo</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/netstat.html">netstat</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/ping.html">ping</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/profile.html">profile</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/serverStatus.html">serverStatus</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/shardConnPoolStats.html">shardConnPoolStats</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/top.html">top</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/validate.html">validate</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/validateDBMetadata.html">validateDBMetadata</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/whatsmyuri.html">whatsmyuri</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-free-monitoring.html">Free Monitoring Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/getFreeMonitoringStatus.html">getFreeMonitoringStatus</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/command/setFreeMonitoring.html">setFreeMonitoring</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/command/nav-auditing.html">System Events Auditing Commands</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/command/logApplicationMessage.html">logApplicationMessage</a></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/method.html"><code class="docutils literal"><span class="pre">mongosh</span></code> Methods</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-collection.html">Collection Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.aggregate.html">db.collection.aggregate()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.bulkWrite.html">db.collection.bulkWrite()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.count.html">db.collection.count()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.countDocuments.html">db.collection.countDocuments()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.createIndex.html">db.collection.createIndex()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.createIndexes.html">db.collection.createIndexes()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.dataSize.html">db.collection.dataSize()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.deleteOne.html">db.collection.deleteOne()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.deleteMany.html">db.collection.deleteMany()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.distinct.html">db.collection.distinct()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.drop.html">db.collection.drop()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.dropIndex.html">db.collection.dropIndex()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.dropIndexes.html">db.collection.dropIndexes()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.ensureIndex.html">db.collection.ensureIndex()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.estimatedDocumentCount.html">db.collection.estimatedDocumentCount()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.explain.html">db.collection.explain()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.find.html">db.collection.find()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.findAndModify.html">db.collection.findAndModify()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.findOne.html">db.collection.findOne()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.findOneAndDelete.html">db.collection.findOneAndDelete()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.findOneAndReplace.html">db.collection.findOneAndReplace()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.findOneAndUpdate.html">db.collection.findOneAndUpdate()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.getIndexes.html">db.collection.getIndexes()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.getShardDistribution.html">db.collection.getShardDistribution()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.getShardVersion.html">db.collection.getShardVersion()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.hideIndex.html">db.collection.hideIndex()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.insert.html">db.collection.insert()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.insertOne.html">db.collection.insertOne()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.insertMany.html">db.collection.insertMany()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.isCapped.html">db.collection.isCapped()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.latencyStats.html">db.collection.latencyStats()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.mapReduce.html">db.collection.mapReduce()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.reIndex.html">db.collection.reIndex()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.remove.html">db.collection.remove()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.renameCollection.html">db.collection.renameCollection()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.replaceOne.html">db.collection.replaceOne()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.stats.html">db.collection.stats()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.storageSize.html">db.collection.storageSize()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.totalIndexSize.html">db.collection.totalIndexSize()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.totalSize.html">db.collection.totalSize()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.unhideIndex.html">db.collection.unhideIndex()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.update.html">db.collection.update()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.updateOne.html">db.collection.updateOne()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.updateMany.html">db.collection.updateMany()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.watch.html">db.collection.watch()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.validate.html">db.collection.validate()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-cursor.html">Cursor Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.addOption.html">cursor.addOption()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.allowDiskUse.html">cursor.allowDiskUse()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.allowPartialResults.html">cursor.allowPartialResults()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.batchSize.html">cursor.batchSize()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.close.html">cursor.close()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.isClosed.html">cursor.isClosed()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.collation.html">cursor.collation()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.comment.html">cursor.comment()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.count.html">cursor.count()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.explain.html">cursor.explain()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.forEach.html">cursor.forEach()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.hasNext.html">cursor.hasNext()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.hint.html">cursor.hint()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.isExhausted.html">cursor.isExhausted()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.itcount.html">cursor.itcount()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.limit.html">cursor.limit()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.map.html">cursor.map()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.max.html">cursor.max()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.maxAwaitTimeMS.html">cursor.maxAwaitTimeMS()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.maxTimeMS.html">cursor.maxTimeMS()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.min.html">cursor.min()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.next.html">cursor.next()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.noCursorTimeout.html">cursor.noCursorTimeout()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.objsLeftInBatch.html">cursor.objsLeftInBatch()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.pretty.html">cursor.pretty()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.readConcern.html">cursor.readConcern()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.readPref.html">cursor.readPref()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.returnKey.html">cursor.returnKey()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.showRecordId.html">cursor.showRecordId()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.size.html">cursor.size()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.skip.html">cursor.skip()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.sort.html">cursor.sort()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.tailable.html">cursor.tailable()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.toArray.html">cursor.toArray()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cursor.tryNext.html">cursor.next()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-database.html">Database Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.adminCommand.html">db.adminCommand()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.aggregate.html">db.aggregate()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.cloneDatabase.html">db.cloneDatabase()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.commandHelp.html">db.commandHelp()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.copyDatabase.html">db.copyDatabase()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.createCollection.html">db.createCollection()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.createView.html">db.createView()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.currentOp.html">db.currentOp()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.dropDatabase.html">db.dropDatabase()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.fsyncLock.html">db.fsyncLock()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.fsyncUnlock.html">db.fsyncUnlock()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getCollection.html">db.getCollection()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getCollectionInfos.html">db.getCollectionInfos()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getCollectionNames.html">db.getCollectionNames()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getLogComponents.html">db.getLogComponents()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getMongo.html">db.getMongo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getName.html">db.getName()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getProfilingStatus.html">db.getProfilingStatus()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getReplicationInfo.html">db.getReplicationInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getSiblingDB.html">db.getSiblingDB()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.hello.html">db.hello()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.help.html">db.help()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.hostInfo.html">db.hostInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.killOp.html">db.killOp()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.listCommands.html">db.listCommands()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.logout.html">db.logout()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.printCollectionStats.html">db.printCollectionStats()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.printReplicationInfo.html">db.printReplicationInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.printSecondaryReplicationInfo.html">db.printSecondaryReplicationInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.printShardingStatus.html">db.printShardingStatus()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.printSlaveReplicationInfo.html">db.printSlaveReplicationInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.resetError.html">db.resetError()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.rotateCertificates.html">db.rotateCertificates()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.runCommand.html">db.runCommand()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.serverBuildInfo.html">db.serverBuildInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.serverCmdLineOpts.html">db.serverCmdLineOpts()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.serverStatus.html">db.serverStatus()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.setLogLevel.html">db.setLogLevel()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.setProfilingLevel.html">db.setProfilingLevel()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.shutdownServer.html">db.shutdownServer()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.stats.html">db.stats()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.version.html">db.version()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.watch.html">db.watch()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-plan-cache.html">Query Plan Cache Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.getPlanCache.html">db.collection.getPlanCache()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/PlanCache.clear.html">PlanCache.clear()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/PlanCache.clearPlansByQuery.html">PlanCache.clearPlansByQuery()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/PlanCache.help.html">PlanCache.help()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/PlanCache.list.html">PlanCache.list()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-bulk.html">Bulk Operation Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.initializeOrderedBulkOp.html">db.collection.initializeOrderedBulkOp()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.collection.initializeUnorderedBulkOp.html">db.collection.initializeUnorderedBulkOp()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.html">Bulk()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.execute.html">Bulk.execute()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.html">Bulk.find()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.arrayFilters.html">Bulk.find.arrayFilters()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.collation.html">Bulk.find.collation()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.hint.html">Bulk.find.hint()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.remove.html">Bulk.find.remove()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.removeOne.html">Bulk.find.removeOne()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.replaceOne.html">Bulk.find.replaceOne()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.updateOne.html">Bulk.find.updateOne()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.update.html">Bulk.find.update()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.find.upsert.html">Bulk.find.upsert()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.getOperations.html">Bulk.getOperations()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.insert.html">Bulk.insert()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.tojson.html">Bulk.toJSON()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Bulk.toString.html">Bulk.toString()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-user-management.html">User Management Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.auth.html">db.auth()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.changeUserPassword.html">db.changeUserPassword()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.createUser.html">db.createUser()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.dropUser.html">db.dropUser()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.dropAllUsers.html">db.dropAllUsers()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getUser.html">db.getUser()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getUsers.html">db.getUsers()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.grantRolesToUser.html">db.grantRolesToUser()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.removeUser.html">db.removeUser()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.revokeRolesFromUser.html">db.revokeRolesFromUser()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.updateUser.html">db.updateUser()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/passwordPrompt.html">passwordPrompt()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-role-management.html">Role Management Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.createRole.html">db.createRole()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.dropRole.html">db.dropRole()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.dropAllRoles.html">db.dropAllRoles()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getRole.html">db.getRole()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getRoles.html">db.getRoles()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.grantPrivilegesToRole.html">db.grantPrivilegesToRole()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.revokePrivilegesFromRole.html">db.revokePrivilegesFromRole()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.grantRolesToRole.html">db.grantRolesToRole()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.revokeRolesFromRole.html">db.revokeRolesFromRole()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.updateRole.html">db.updateRole()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-replication.html">Replication Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.add.html">rs.add()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.addArb.html">rs.addArb()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.conf.html">rs.conf()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.freeze.html">rs.freeze()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.help.html">rs.help()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.initiate.html">rs.initiate()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.printReplicationInfo.html">rs.printReplicationInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.printSecondaryReplicationInfo.html">rs.printSecondaryReplicationInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.printSlaveReplicationInfo.html">rs.printSlaveReplicationInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.reconfig.html">rs.reconfig()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.reconfigForPSASet.html">rs.reconfigForPSASet()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.remove.html">rs.remove()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.status.html">rs.status()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.stepDown.html">rs.stepDown()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rs.syncFrom.html">rs.syncFrom()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-sharding.html">Sharding Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.abortReshardCollection.html">sh.abortReshardCollection()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.addShard.html">sh.addShard()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.addShardTag.html">sh.addShardTag()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.addShardToZone.html">sh.addShardToZone()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.addTagRange.html">sh.addTagRange()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.balancerCollectionStatus.html">sh.balancerCollectionStatus()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.commitReshardCollection.html">sh.commitReshardCollection()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.disableBalancing.html">sh.disableBalancing()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.enableBalancing.html">sh.enableBalancing()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.disableAutoSplit.html">sh.disableAutoSplit</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.enableAutoSplit.html">sh.enableAutoSplit</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.enableSharding.html">sh.enableSharding()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.getBalancerHost.html">sh.getBalancerHost()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.getBalancerState.html">sh.getBalancerState()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.removeTagRange.html">sh.removeTagRange()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.removeRangeFromZone.html">sh.removeRangeFromZone()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.help.html">sh.help()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.isBalancerRunning.html">sh.isBalancerRunning()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.moveChunk.html">sh.moveChunk()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.removeShardTag.html">sh.removeShardTag()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.removeShardFromZone.html">sh.removeShardFromZone()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.reshardCollection.html">sh.reshardCollection()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.setBalancerState.html">sh.setBalancerState()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.shardCollection.html">sh.shardCollection()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.splitAt.html">sh.splitAt()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.splitFind.html">sh.splitFind()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.startBalancer.html">sh.startBalancer()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.status.html">sh.status()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.stopBalancer.html">sh.stopBalancer()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.waitForBalancer.html">sh.waitForBalancer()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.waitForBalancerOff.html">sh.waitForBalancerOff()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.waitForPingChange.html">sh.waitForPingChange()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sh.updateZoneKeyRange.html">sh.updateZoneKeyRange()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/convertShardKeyToHashed.html">convertShardKeyToHashed</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-free-monitoring.html">Free Monitoring Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.disableFreeMonitoring.html">db.disableFreeMonitoring()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.enableFreeMonitoring.html">db.enableFreeMonitoring()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/db.getFreeMonitoringStatus.html">db.getFreeMonitoringStatus</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-constructor.html">Object Constructors and Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/BulkWriteResult.html">BulkWriteResult()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Date.html">Date()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/ObjectId.html">ObjectId</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/ObjectId.getTimestamp.html">ObjectId.getTimestamp()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/ObjectId.toString.html">ObjectId.toString()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/ObjectId.valueOf.html">ObjectId.valueOf()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/UUID.html">UUID()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/WriteResult.html">WriteResult()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/WriteResult.hasWriteError.html">WriteResult.hasWriteError()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/WriteResult.hasWriteConcernError.html">WriteResult.hasWriteConcernError()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-connection.html">Connection Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/connect.html">connect()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.html">Mongo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.getDB.html">Mongo.getDB()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.getDBNames.html">Mongo.getDBNames()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.getDBs.html">Mongo.getDBs()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.getReadPrefMode.html">Mongo.getReadPrefMode()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.getReadPrefTagSet.html">Mongo.getReadPrefTagSet()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.getWriteConcern.html">Mongo.getWriteConcern()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.setCausalConsistency.html">Mongo.setCausalConsistency()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.setReadPref.html">Mongo.setReadPref()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.startSession.html">Mongo.startSession()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.setWriteConcern.html">Mongo.setWriteConcern()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Mongo.watch.html">Mongo.watch()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/Session.html">Session</a><ul><li class="toctree-l5"><a class="reference internal" href="../reference/method/Session.abortTransaction.html">Session.abortTransaction()</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/method/Session.commitTransaction.html">Session.commitTransaction()</a></li><li class="toctree-l5"><a class="reference internal" href="../reference/method/Session.startTransaction.html">Session.startTransaction()</a></li></ul></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/SessionOptions.html">SessionOptions</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-native.html">Native Methods in <code class="docutils literal"><span class="pre">mongosh</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-client-side-field-level-encryption.html">Client-Side Field Level Encryption Methods</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/getKeyVault.html">getKeyVault()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/KeyVault.createKey.html">KeyVault.createKey()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/KeyVault.deleteKey.html">KeyVault.deleteKey()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/KeyVault.getKey.html">KeyVault.getKey()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/KeyVault.getKeys.html">KeyVault.getKeys()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/KeyVault.addKeyAlternateName.html">KeyVault.addKeyAlternateName()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/KeyVault.removeKeyAlternateName.html">KeyVault.removeKeyAlternateName()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/KeyVault.getKeyByAltName.html">KeyVault.getKeyByAltName()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/getClientEncryption.html">getClientEncryption()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/ClientEncryption.encrypt.html">ClientEncryption.encrypt()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/ClientEncryption.decrypt.html">ClientEncryption.decrypt()</a></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/mongo.html">Legacy <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a><ul><li class="toctree-l3"><a class="reference internal" href="../tutorial/configure-mongo-shell.html">Configure the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/access-mongo-shell-help.html">Access the <code class="docutils literal"><span class="pre">mongo</span></code> Shell Help</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/write-scripts-for-the-mongo-shell.html">Write Scripts for the <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l3"><a class="reference internal" href="../core/shell-types.html">Data Types in the Legacy <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/method/js-native-legacy.html">Native Methods in the Legacy Shell</a><ul><li class="toctree-l4"><a class="reference internal" href="../reference/method/cat.html">cat()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/cd.html">cd()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/copyDbpath.html">copyDbpath()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/getHostName.html">getHostName()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/getMemInfo.html">getMemInfo()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/hostname.html">hostname()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/isInteractive.html">isInteractive()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/listFiles.html">listFiles()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/load.html">load()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/ls.html">ls()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/md5sumFile.html">md5sumFile()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/mkdir.html">mkdir()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/pwd.html">pwd()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/quit.html">quit()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/removeFile.html">removeFile()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/resetDbpath.html">resetDbpath()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/sleep.html">sleep()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/setVerboseShell.html">setVerboseShell()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/version.html">version()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/isWindows.html">_isWindows()</a></li><li class="toctree-l4"><a class="reference internal" href="../reference/method/rand.html">_rand()</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="../reference/mongo-shell.html"><code class="docutils literal"><span class="pre">mongo</span></code> Shell Quick Reference</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/program.html">MongoDB Package Components</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/program/mongod.html"><code class="docutils literal"><span class="pre">mongod</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/program/mongos.html"><code class="docutils literal"><span class="pre">mongos</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/program/mongo.html">Legacy <code class="docutils literal"><span class="pre">mongo</span></code> Shell</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/program/mongod.exe.html"><code class="docutils literal"><span class="pre">mongod.exe</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/program/mongos.exe.html"><code class="docutils literal"><span class="pre">mongos.exe</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/program/mongoldap.html"><code class="docutils literal"><span class="pre">mongoldap</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/program/mongokerberos.html"><code class="docutils literal"><span class="pre">mongokerberos</span></code></a></li><li class="toctree-l3"><a class="reference internal" href="../reference/program/install_compass.html"><code class="docutils literal"><span class="pre">install_compass</span></code></a></li><li class="toctree-l3"><a class="reference external" href="https://www.mongodb.com/docs/database-tools/">MongoDB Database Tools</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/configuration-options.html">Configuration File Options</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/expansion-directives.html">Externally Sourced Configuration File Values</a></li><li class="toctree-l3"><a class="reference internal" href="../tutorial/convert-command-line-options-to-yaml.html">Convert Command-Line Options to YAML</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/configuration-file-settings-command-line-options-mapping.html">Configuration File Settings and Command-Line Options Mapping</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/parameters.html">MongoDB Server Parameters</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/cluster-parameters.html">MongoDB Cluster Parameters</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/limits.html">MongoDB Limits and Thresholds</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/explain-results.html">Explain Results</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/system-collections.html">System Collections</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/connection-string.html">Connection String URI Format</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/collation.html">Collation</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/collation-locales-defaults.html">Collation Locales and Default Parameters</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/mongodb-wire-protocol.html">MongoDB Wire Protocol</a><ul><li class="toctree-l3"><a class="reference internal" href="../legacy-opcodes.html">Legacy Opcodes</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="../reference/log-messages.html">Log Messages</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/exit-codes.html">Exit Codes and Statuses</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/glossary.html">Glossary</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/default-mongodb-port.html">Default MongoDB Port</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/mongodb-defaults.html">Default MongoDB Read Concerns/Write Concerns</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/server-sessions.html">Server Sessions</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/stable-api.html">Stable API</a><ul><li class="toctree-l3"><a class="reference internal" href="../reference/stable-api-reference.html">Migrate to a Later API Version</a></li><li class="toctree-l3"><a class="reference internal" href="../reference/stable-api-changelog.html">Stable API Changelog</a></li></ul></li></ul></li><li class="toctree-l1 current"><a class="reference internal" href="../release-notes.html">Release Notes</a><ul class="current"><li class="toctree-l2"><a class="reference internal" href="6.0.html">Release Notes for MongoDB 6.0 (Release Candidate)</a><ul><li class="toctree-l3"><a class="reference internal" href="6.0-compatibility.html">Compatibility Changes in MongoDB 6.0 (Release Candidate)</a></li><li class="toctree-l3"><a class="reference internal" href="6.0-downgrade.html">Downgrade 6.0 to 5.0</a><ul><li class="toctree-l4"><a class="reference internal" href="6.0-downgrade-standalone.html">Downgrade 6.0 Standalone to 5.0</a></li><li class="toctree-l4"><a class="reference internal" href="6.0-downgrade-replica-set.html">Downgrade 6.0 Replica Set to 5.0</a></li><li class="toctree-l4"><a class="reference internal" href="6.0-downgrade-sharded-cluster.html">Downgrade 6.0 Sharded Cluster to 5.0</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="6.0-upgrade.html">Upgrade 5.0 to 6.0</a><ul><li class="toctree-l4"><a class="reference internal" href="6.0-upgrade-standalone.html">Upgrade a Standalone to 6.0</a></li><li class="toctree-l4"><a class="reference internal" href="6.0-upgrade-replica-set.html">Upgrade a Replica Set to 6.0</a></li><li class="toctree-l4"><a class="reference internal" href="6.0-upgrade-sharded-cluster.html">Upgrade a Sharded Cluster to 6.0</a></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="5.3.html">Release Notes for MongoDB 5.3</a><ul><li class="toctree-l3"><a class="reference internal" href="5.3-compatibility.html">Compatibility Changes in MongoDB 5.3</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="5.2.html">Release Notes for MongoDB 5.2</a><ul><li class="toctree-l3"><a class="reference internal" href="5.2-compatibility.html">Compatibility Changes in MongoDB 5.2</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="5.1.html">Release Notes for MongoDB 5.1</a><ul><li class="toctree-l3"><a class="reference internal" href="5.1-compatibility.html">Compatibility Changes in MongoDB 5.1</a></li><li class="toctree-l3"><a class="reference internal" href="5.1-changelog.html">5.1 Changelog</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="5.0.html">Release Notes for MongoDB 5.0</a><ul><li class="toctree-l3"><a class="reference internal" href="5.0-compatibility.html">Compatibility Changes in MongoDB 5.0</a></li><li class="toctree-l3"><a class="reference internal" href="5.0-upgrade-standalone.html">Upgrade a Standalone to 5.0</a></li><li class="toctree-l3"><a class="reference internal" href="5.0-upgrade-replica-set.html">Upgrade a Replica Set to 5.0</a></li><li class="toctree-l3"><a class="reference internal" href="5.0-upgrade-sharded-cluster.html">Upgrade a Sharded Cluster to 5.0</a></li><li class="toctree-l3"><a class="reference internal" href="5.0-downgrade.html">Downgrade 5.0 to 4.4</a><ul><li class="toctree-l4"><a class="reference internal" href="5.0-downgrade-standalone.html">Downgrade 5.0 Standalone to 4.4</a></li><li class="toctree-l4"><a class="reference internal" href="5.0-downgrade-replica-set.html">Downgrade 5.0 Replica Set to 4.4</a></li><li class="toctree-l4"><a class="reference internal" href="5.0-downgrade-sharded-cluster.html">Downgrade 5.0 Sharded Cluster to 4.4</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="5.0-changelog.html">5.0 Changelog</a></li></ul></li><li class="toctree-l2 current"><a class="reference internal current" href="">Release Notes for MongoDB 4.4</a><ul><li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html">Compatibility Changes in MongoDB 4.4</a></li><li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html">Upgrade a Standalone to 4.4</a></li><li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html">Upgrade a Replica Set to 4.4</a></li><li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html">Upgrade a Sharded Cluster to 4.4</a></li><li class="toctree-l3"><a class="reference internal" href="4.4-downgrade.html">Downgrade 4.4 to 4.2</a><ul><li class="toctree-l4"><a class="reference internal" href="4.4-downgrade-standalone.html">Downgrade 4.4 Standalone to 4.2</a></li><li class="toctree-l4"><a class="reference internal" href="4.4-downgrade-replica-set.html">Downgrade 4.4 Replica Set to 4.2</a></li><li class="toctree-l4"><a class="reference internal" href="4.4-downgrade-sharded-cluster.html">Downgrade 4.4 Sharded Cluster to 4.2</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html">4.4 Changelog</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="4.2.html">Release Notes for MongoDB 4.2</a><ul><li class="toctree-l3"><a class="reference internal" href="4.2-compatibility.html">Compatibility Changes in MongoDB 4.2</a></li><li class="toctree-l3"><a class="reference internal" href="4.2-upgrade-standalone.html">Upgrade a Standalone to 4.2</a></li><li class="toctree-l3"><a class="reference internal" href="4.2-upgrade-replica-set.html">Upgrade a Replica Set to 4.2</a></li><li class="toctree-l3"><a class="reference internal" href="4.2-upgrade-sharded-cluster.html">Upgrade a Sharded Cluster to 4.2</a></li><li class="toctree-l3"><a class="reference internal" href="4.2-downgrade.html">Downgrade 4.2 to 4.0</a><ul><li class="toctree-l4"><a class="reference internal" href="4.2-downgrade-standalone.html">Downgrade 4.2 Standalone to 4.0</a></li><li class="toctree-l4"><a class="reference internal" href="4.2-downgrade-replica-set.html">Downgrade 4.2 Replica Set to 4.0</a></li><li class="toctree-l4"><a class="reference internal" href="4.2-downgrade-sharded-cluster.html">Downgrade 4.2 Sharded Cluster to 4.0</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="4.2-changelog.html">4.2 Changelog</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="4.0.html">Release Notes for MongoDB 4.0</a><ul><li class="toctree-l3"><a class="reference internal" href="4.0-compatibility.html">Compatibility Changes in MongoDB 4.0</a></li><li class="toctree-l3"><a class="reference internal" href="4.0-upgrade-standalone.html">Upgrade a Standalone to 4.0</a></li><li class="toctree-l3"><a class="reference internal" href="4.0-upgrade-replica-set.html">Upgrade a Replica Set to 4.0</a></li><li class="toctree-l3"><a class="reference internal" href="4.0-upgrade-sharded-cluster.html">Upgrade a Sharded Cluster to 4.0</a></li><li class="toctree-l3"><a class="reference internal" href="4.0-downgrade-standalone.html">Downgrade 4.0 Standalone to 3.6</a></li><li class="toctree-l3"><a class="reference internal" href="4.0-downgrade-replica-set.html">Downgrade 4.0 Replica Set to 3.6</a></li><li class="toctree-l3"><a class="reference internal" href="4.0-downgrade-sharded-cluster.html">Downgrade 4.0 Sharded Cluster to 3.6</a></li><li class="toctree-l3"><a class="reference internal" href="4.0-changelog.html">4.0 Changelog</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="3.6.html">Release Notes for MongoDB 3.6</a><ul><li class="toctree-l3"><a class="reference internal" href="3.6-changelog.html">3.6 Changelog</a></li><li class="toctree-l3"><a class="reference internal" href="3.6-compatibility.html">Compatibility Changes in MongoDB 3.6</a></li><li class="toctree-l3"><a class="reference internal" href="3.6-upgrade-standalone.html">Upgrade a Standalone to 3.6</a></li><li class="toctree-l3"><a class="reference internal" href="3.6-upgrade-replica-set.html">Upgrade a Replica Set to 3.6</a></li><li class="toctree-l3"><a class="reference internal" href="3.6-upgrade-sharded-cluster.html">Upgrade a Sharded Cluster to 3.6</a></li><li class="toctree-l3"><a class="reference internal" href="3.6-downgrade-standalone.html">Downgrade 3.6 Standalone to 3.4</a></li><li class="toctree-l3"><a class="reference internal" href="3.6-downgrade-replica-set.html">Downgrade 3.6 Replica Set to 3.4</a></li><li class="toctree-l3"><a class="reference internal" href="3.6-downgrade-sharded-cluster.html">Downgrade 3.6 Sharded Cluster to 3.4</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="3.4.html">Release Notes for MongoDB 3.4</a><ul><li class="toctree-l3"><a class="reference internal" href="3.4-changelog.html">3.4 Changelog</a></li><li class="toctree-l3"><a class="reference internal" href="3.4-compatibility.html">Compatibility Changes in MongoDB 3.4</a></li><li class="toctree-l3"><a class="reference internal" href="3.4-upgrade-standalone.html">Upgrade a Standalone to 3.4</a></li><li class="toctree-l3"><a class="reference internal" href="3.4-upgrade-replica-set.html">Upgrade a Replica Set to 3.4</a></li><li class="toctree-l3"><a class="reference internal" href="3.4-upgrade-sharded-cluster.html">Upgrade a Sharded Cluster to 3.4</a></li><li class="toctree-l3"><a class="reference internal" href="3.4-downgrade.html">Downgrade MongoDB 3.4 to 3.2</a><ul><li class="toctree-l4"><a class="reference internal" href="3.4-downgrade-standalone.html">Downgrade 3.4 Standalone to 3.2</a></li><li class="toctree-l4"><a class="reference internal" href="3.4-downgrade-replica-set.html">Downgrade 3.4 Replica Set to 3.2</a></li><li class="toctree-l4"><a class="reference internal" href="3.4-downgrade-sharded-cluster.html">Downgrade 3.4 Sharded Cluster to 3.2</a></li></ul></li></ul></li><li class="toctree-l2"><a class="reference internal" href="3.2.html">Release Notes for MongoDB 3.2</a><ul><li class="toctree-l3"><a class="reference internal" href="3.2-changelog.html">3.2 Changelog</a></li><li class="toctree-l3"><a class="reference internal" href="3.2-compatibility.html">Compatibility Changes in MongoDB 3.2</a><ul><li class="toctree-l4"><a class="reference internal" href="3.2-javascript.html">JavaScript Changes in MongoDB 3.2</a></li></ul></li><li class="toctree-l3"><a class="reference internal" href="3.2-upgrade.html">Upgrade MongoDB to 3.2</a></li><li class="toctree-l3"><a class="reference internal" href="3.2-downgrade.html">Downgrade MongoDB from 3.2</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="3.0.html">Release Notes for MongoDB 3.0</a><ul><li class="toctree-l3"><a class="reference internal" href="3.0-changelog.html">3.0 Changelog</a></li><li class="toctree-l3"><a class="reference internal" href="3.0-compatibility.html">Compatibility Changes in MongoDB 3.0</a></li><li class="toctree-l3"><a class="reference internal" href="3.0-upgrade.html">Upgrade MongoDB to 3.0</a></li><li class="toctree-l3"><a class="reference internal" href="3.0-scram.html">Upgrade to SCRAM</a></li><li class="toctree-l3"><a class="reference internal" href="3.0-downgrade.html">Downgrade MongoDB from 3.0</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="2.6.html">Release Notes for MongoDB 2.6</a><ul><li class="toctree-l3"><a class="reference internal" href="2.6-changelog.html">2.6 Changelog</a></li><li class="toctree-l3"><a class="reference internal" href="2.6-compatibility.html">Compatibility Changes in MongoDB 2.6</a></li><li class="toctree-l3"><a class="reference internal" href="2.6-upgrade.html">Upgrade MongoDB to 2.6</a></li><li class="toctree-l3"><a class="reference internal" href="2.6-upgrade-authorization.html">Upgrade User Authorization Data to 2.6 Format</a></li><li class="toctree-l3"><a class="reference internal" href="2.6-downgrade.html">Downgrade MongoDB from 2.6</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="2.4.html">Release Notes for MongoDB 2.4</a><ul><li class="toctree-l3"><a class="reference internal" href="2.4-changelog.html">2.4 Changelog</a></li><li class="toctree-l3"><a class="reference internal" href="2.4-javascript.html">JavaScript Changes in MongoDB 2.4</a></li><li class="toctree-l3"><a class="reference internal" href="2.4-upgrade.html">Upgrade MongoDB to 2.4</a></li><li class="toctree-l3"><a class="reference internal" href="2.4-index-types.html">Compatibility and Index Type Changes in MongoDB 2.4</a></li></ul></li><li class="toctree-l2"><a class="reference internal" href="2.2.html">Release Notes for MongoDB 2.2</a></li><li class="toctree-l2"><a class="reference internal" href="2.0.html">Release Notes for MongoDB 2.0</a></li><li class="toctree-l2"><a class="reference internal" href="1.8.html">Release Notes for MongoDB 1.8</a></li><li class="toctree-l2"><a class="reference internal" href="1.6.html">Release Notes for MongoDB 1.6</a></li><li class="toctree-l2"><a class="reference internal" href="1.4.html">Release Notes for MongoDB 1.4</a></li><li class="toctree-l2"><a class="reference internal" href="1.2.html">Release Notes for MongoDB 1.2.x</a></li><li class="toctree-l2"><a class="reference internal" href="../reference/versioning.html">MongoDB Versioning</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../support.html">Technical Support</a></li></ul>


    </div>
  </div>
           
         </aside>

   </div>

    <div id="main-column" class="main-column">

    <span id="showNav" class="showNav">Navigation</span>

      
      
        <div class="document">
            <div class="documentwrapper"><div class="bodywrapper">
              <div class="body" data-pagename="release-notes/4.4">
                   <a class="edit-link" href="https://github.com/mongodb/docs/blob/master/source/release-notes/4.4.txt" target="_blank" title="Edit release-notes/4.4.txt on GitHub">
    
      <span class="icon-edit"></span>
    
  </a>
                

                
  <div class="bc">
    
      <ul>
          <li><a href="../release-notes.html">Release Notes</a><span class="bcpoint"> > </span></li>
            <li>Release Notes for MongoDB 4.4</li> 
      </ul>
    
    
  </div>
                
                  <div class="section" id="release-notes-for-mongodb-4-4">
<h1>Release Notes for MongoDB 4.4<a class="headerlink" href="#release-notes-for-mongodb-4-4" title="Permalink to this headline">¶</a></h1>
<div class="contents twocols local topic" id="on-this-page">
<p class="topic-title first">On this page</p>
<ul class="simple">
<li><a class="reference internal" href="#patch-releases" id="id41">Patch Releases</a></li>
<li><a class="reference internal" href="#aggregation" id="id42">Aggregation</a></li>
<li><a class="reference internal" href="#replica-sets" id="id43">Replica Sets</a></li>
<li><a class="reference internal" href="#sharded-clusters" id="id44">Sharded Clusters</a></li>
<li><a class="reference internal" href="#projection" id="id45">Projection</a></li>
<li><a class="reference internal" href="#transactions" id="id46">Transactions</a></li>
<li><a class="reference internal" href="#sorting" id="id47">Sorting</a></li>
<li><a class="reference internal" href="#security-improvements" id="id48">Security Improvements</a></li>
<li><a class="reference internal" href="#structured-logging" id="id49">Structured Logging</a></li>
<li><a class="reference internal" href="#platform-support" id="id50">Platform Support</a></li>
<li><a class="reference internal" href="#mongo-shell" id="id51">Mongo Shell</a></li>
<li><a class="reference internal" href="#tools" id="id52">Tools</a></li>
<li><a class="reference internal" href="#drivers" id="id53">Drivers</a></li>
<li><a class="reference internal" href="#indexes" id="id54">Indexes</a></li>
<li><a class="reference internal" href="#id35" id="id55">Removed Commands</a></li>
<li><a class="reference internal" href="#networking" id="id56">Networking</a></li>
<li><a class="reference internal" href="#general-improvements" id="id57">General Improvements</a></li>
<li><a class="reference internal" href="#changes-affecting-compatibility" id="id58">Changes Affecting Compatibility</a></li>
<li><a class="reference internal" href="#upgrade-procedures" id="id59">Upgrade Procedures</a></li>
<li><a class="reference internal" href="#download" id="id60">Download</a></li>
<li><a class="reference internal" href="#known-issues" id="id61">Known Issues</a></li>
<li><a class="reference internal" href="#report-an-issue" id="id62">Report an Issue</a></li>
</ul>
</div>
<div class="section" id="patch-releases">
<h2>Patch Releases<a class="headerlink" href="#patch-releases" title="Permalink to this headline">¶</a></h2>
<div class="section" id="jun-21-2022">
<span id="release-notes"></span><h3>4.4.15 - Jun 21, 2022<a class="headerlink" href="#jun-21-2022" title="Permalink to this headline">¶</a></h3>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-66433">SERVER-66433</a>  Backport deadline waiting for overlapping range
deletion to finish to pre-v5.1 versions</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-65821">SERVER-65821</a>  Deadlock during setFCV when there are prepared
transactions that have not persisted commit/abort decision</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-65131">SERVER-65131</a>  Disable opportunistic read targeting
(except for hedged reads)</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-62272">SERVER-62272</a>  Adding schema validation to a collection can
prevent chunk migrations of failing documents</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-54900">SERVER-54900</a>  Blocking networking calls can delay sync-source
resolution indefinitely</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.15%27">All JIRA issues closed in 4.4.15</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id1"><span class="std std-ref">4.4.15 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="may-9-2022">
<span id="id1"></span><h3>4.4.14 - May 9, 2022<a class="headerlink" href="#may-9-2022" title="Permalink to this headline">¶</a></h3>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-64983">SERVER-64983</a> Release Client lock before rolling back WT
transaction in TransactionParticipant::_resetTransactionState</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-62229">SERVER-62229</a> Fix invariant when applying index build entries
while recoverFromOplogAsStandalone=true</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-60412">SERVER-60412</a> Host memory limit check does not honor cgroups
v2</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-55429">SERVER-55429</a> Abort migration earlier when receiver is not
cleaning overlapping ranges</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-8924">WT-8924</a> Don’t check against on disk time window if there is
an insert list when checking for conflicts in row-store</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.14%27">All JIRA issues closed in 4.4.14</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id3"><span class="std std-ref">4.4.14 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="mar-7-2022">
<span id="id2"></span><h3>4.4.13 - Mar 7, 2022<a class="headerlink" href="#mar-7-2022" title="Permalink to this headline">¶</a></h3>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-63203">SERVER-63203</a> Chunk splitter never splits if more than 8192 split points are found</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-62065">SERVER-62065</a> Upgrade path from 3.6 to 4.0 can leave chunk entries without history on the shards</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-59754">SERVER-59754</a> Incorrect logging of queryHash/planCacheKey for operations that share the same $lookup shape</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-55483">SERVER-55483</a> Add a new startup parameter that skips verifying the table log settings</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-40691">SERVER-40691</a> $nin:[…] queries are not indexed</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.13%27">All JIRA issues closed in 4.4.13</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id7"><span class="std std-ref">4.4.13 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="jan-21-2022">
<span id="id3"></span><h3>4.4.12 - Jan 21, 2022<a class="headerlink" href="#jan-21-2022" title="Permalink to this headline">¶</a></h3>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-62203">SERVER-62203</a> Change the thread name “Health checks progress
monitor” to “FaultManagerProgressMonitor”</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-61930">SERVER-61930</a> Individual health observers should return an
error if a timeout period elapses when doing a single health check</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-61637">SERVER-61637</a> Review range deleter batching policy</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-59362">SERVER-59362</a> Setup Fault Manager State Machine</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.12%27">All JIRA issues closed in 4.4.12</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id12"><span class="std std-ref">4.4.12 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="dec-30-2021">
<span id="id4"></span><h3>4.4.11 - Dec 30, 2021<a class="headerlink" href="#dec-30-2021" title="Permalink to this headline">¶</a></h3>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-8395">WT-8395</a> Inconsistent data after upgrade from 4.4.3 and 4.4.4
to 4.4.8+ and 5.0.2+</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-60326">SERVER-60326</a> Windows Server fails to start when X509
certificate has empty subject name</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-60310">SERVER-60310</a> OCSP response validation should not consider
statuses of irrelevant certificates</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-59226">SERVER-59226</a> Deadlock when stepping down with a profile
session marked as uninterruptible</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-56226">SERVER-56226</a> [v4.4] Introduce ‘permitMigrations’ field on
config.collections entry to prevent chunk migrations from committing</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-51329">SERVER-51329</a> Unexpected non-retryable error when shutting
down a mongos server</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-45953">SERVER-45953</a> Exempt oplog readers from acquiring read
tickets</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.11%27">All JIRA issues closed in 4.4.11</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id16"><span class="std std-ref">4.4.11 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="oct-15-2021">
<span id="id5"></span><h3>4.4.10 - Oct 15, 2021<a class="headerlink" href="#oct-15-2021" title="Permalink to this headline">¶</a></h3>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-59876">SERVER-59876</a>: Large delays in returning from libcrypto.so
while establishing egress connections</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-59867">SERVER-59867</a>: Split horizon mappings in
ReplSetConfig/MemberConfig should be serialized deterministically</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-59456">SERVER-59456</a>: Start the LDAPReaper threadpool</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-59074">SERVER-59074</a>: Do not acquire storage tickets just to
set/wait on oplog visibility</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-54064">SERVER-54064</a>: Sessions on arbiters accumulate and cannot be
cleared out</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.10%27">All JIRA issues closed in 4.4.10</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id23"><span class="std std-ref">4.4.10 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="sep-21-2021">
<span id="id6"></span><h3>4.4.9 - Sep 21, 2021<a class="headerlink" href="#sep-21-2021" title="Permalink to this headline">¶</a></h3>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-57630">SERVER-57630</a>: Enable SSL_OP_NO_RENEGOTIATION on Ubuntu 18.04
when running against OpenSSL 1.1.1</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-34938">SERVER-34938</a>: Secondary slowdown or hang due to content
pinned in cache by single oplog batch</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-8005">WT-8005</a>: Fix a prepare commit bug that could leave the
history store entry unresolved</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-7995">WT-7995</a>: Fix the global visibility that it cannot go beyond
checkpoint visibility</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-7984">WT-7984</a>: Fix a bug that could cause a checkpoint to omit a
page of data</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.9%27">All JIRA issues closed in 4.4.9</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id31"><span class="std std-ref">4.4.9 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="aug-4-2021">
<span id="id7"></span><h3>4.4.8 - Aug 4, 2021<a class="headerlink" href="#aug-4-2021" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MongoDB version 4.4.8 is not recommended for production use due to
critical issues <a class="reference external" href="https://jira.mongodb.org/browse/WT-7984">WT-7984</a> and <a class="reference external" href="https://jira.mongodb.org/browse/WT-7995">WT-7995</a>, fixed in later
versions. Use the latest available patch release version.</p>
</div>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-58936">SERVER-58936</a>: Unique index constraints may not be enforced</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-58258">SERVER-58258</a>: Wait for initial sync to clear state before
asserting ‘replSetGetStatus’ reply has no ‘initialSync’ field</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-52906">SERVER-52906</a>: moveChunk after failed migration that rolled
back cloning indexes can hang indefinitely due to missing shard key
index</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-7837">WT-7837</a>: Clear updates structure in wt_hs_insert_updates to
avoid firing assert</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-6729">WT-6729</a>: Quiesce eviction prior running rollback to stable’s
active transaction check</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.8%27">All JIRA issues closed in 4.4.8</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id39"><span class="std std-ref">4.4.8 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="jul-16-2021">
<span id="id8"></span><h3>4.4.7 - Jul 16, 2021<a class="headerlink" href="#jul-16-2021" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MongoDB version 4.4.7 is not recommended for production use due to
critical issues <a class="reference external" href="https://jira.mongodb.org/browse/SERVER-58936">SERVER-58936</a> and <a class="reference external" href="https://jira.mongodb.org/browse/WT-7995">WT-7995</a>, fixed in
later versions. Use the latest available patch release version.</p>
</div>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-57476">SERVER-57476</a>: Operation may block on prepare conflict while
holding oplog slot, stalling replication indefinitely</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-56054">SERVER-56054</a>: Change minThreads value for replication writer
thread pool to 0</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-53760">SERVER-53760</a>: $unwind + $sort pipeline produces large number
of file handles when spilling to disk</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-47699">SERVER-47699</a>: Change yield type used by range deleter from
YIELD_MANUAL to YIELD_AUTO</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-7185">WT-7185</a>: Avoid aborting a transaction if it is force evicting
and oldest</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.7%27">All JIRA issues closed in 4.4.7</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id48"><span class="std std-ref">4.4.7 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="may-10-2021">
<span id="id9"></span><h3>4.4.6 - May 10, 2021<a class="headerlink" href="#may-10-2021" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MongoDB version 4.4.6 is not recommended for production use due to
critical issue <a class="reference external" href="https://jira.mongodb.org/browse/WT-7995">WT-7995</a>, fixed in later
versions. Use the latest available patch release version.</p>
</div>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-53604">SERVER-53604</a>: Include original aws iam arn in authenticate
audit logs</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-52564">SERVER-52564</a>: Deadlock between step down and
MongoDOperationContextSession</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-7442">WT-7442</a>: RTS to open dhandle only when the dhandle has
unstable updates</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-7426">WT-7426</a>: Set write generation number when the page image gets
created</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-7373">WT-7373</a>: Improve slow random cursor operations on oplog</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.6%27">All JIRA issues closed in 4.4.6</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id59"><span class="std std-ref">4.4.6 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="apr-8-2021">
<span id="id10"></span><h3>4.4.5 - Apr 8, 2021<a class="headerlink" href="#apr-8-2021" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MongoDB version 4.4.5 is not recommended for production use due to
critical issues <a class="reference external" href="https://jira.mongodb.org/browse/WT-7426">WT-7426</a> and <a class="reference external" href="https://jira.mongodb.org/browse/WT-7995">WT-7995</a>, fixed in later
versions. Use the latest available patch release version.</p>
</div>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-55298">SERVER-55298</a>: Reproduce and Investigate BSONObjectTooLarge
error</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-53566">SERVER-53566</a>: Investigate and reproduce “opCtx != nullptr
&amp;&amp; _opCtx == nullptr” invariant</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-51281">SERVER-51281</a>: mongod live locked</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-46686">SERVER-46686</a>: Explain does not respect maxTimeMS</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-45836">SERVER-45836</a>: Provide more LDAP details (like server IP) at
default log level</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.5%27">All JIRA issues closed in 4.4.5</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id67"><span class="std std-ref">4.4.5 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="feb-16-2021">
<span id="id11"></span><h3>4.4.4 - Feb 16, 2021<a class="headerlink" href="#feb-16-2021" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MongoDB version 4.4.4 is not recommended for production use due to
critical issue <a class="reference external" href="https://jira.mongodb.org/browse/WT-7995">WT-7995</a>, fixed in later versions. Use the
latest available patch release version.</p>
</div>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-48471">SERVER-48471</a>: Hashed indexes may be incorrectly marked
multikey and be ineligible as a shard key</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-50769">SERVER-50769</a>: server restarted after
expr{“expr”:”_currentApplyOps.getArrayLength() &gt; 0”,”file”:”src/mongo/db/pipeline/document_source_change_stream_transform.cpp”,”line”:535}}</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-52919">SERVER-52919</a>: Wire compression not enabled for initial sync</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-7109">WT-7109</a>: Retain no longer supported configuration options for
backward compatibility</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-7117">WT-7117</a>: RTS to skip modifies that are more recent than
on-disk base update while restoring an update</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.4%27">All JIRA issues closed in 4.4.4</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id77"><span class="std std-ref">4.4.4 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="jan-4-2021">
<span id="id12"></span><h3>4.4.3 - Jan 4, 2021<a class="headerlink" href="#jan-4-2021" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MongoDB version 4.4.3 is not recommended for production use due to
critical issue <a class="reference external" href="https://jira.mongodb.org/browse/WT-7995">WT-7995</a>, fixed in later
versions. Use the latest available patch release version.</p>
</div>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-33966">SERVER-33966</a>: redundant $sort in aggregation prevents best
$limit $sort consolidation</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-40361">SERVER-40361</a>: Reduce memory footprint of plan cache entries</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-52654">SERVER-52654</a>: new signing keys not generated by the
monitoring-keys-for-HMAC thread</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-52824">SERVER-52824</a>: Support AWS roles with paths</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-52929">SERVER-52929</a>: Correctly handle compound indexes with 32 keys</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.3%27">All JIRA issues closed in 4.4.3</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id87"><span class="std std-ref">4.4.3 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="nov-18-2020">
<span id="id13"></span><h3>4.4.2 - Nov 18, 2020<a class="headerlink" href="#nov-18-2020" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MongoDB version 4.4.2 is not recommended for production use due to
critical issue <a class="reference external" href="https://jira.mongodb.org/browse/WT-7995">WT-7995</a>, fixed in later versions. Use the
latest available patch release version.</p>
</div>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-48067">SERVER-48067</a>: Reduce memory consumption for unique index
builds with large numbers of non-unique keys</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-48523">SERVER-48523</a>: Unconditionally check the first entry in the
oplog when attempting to resume a change stream</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-50365">SERVER-50365</a>: Stuck with long-running transactions that can’t
be timed out</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-50394">SERVER-50394</a>: mongod audit log attributes DDL operations to
the __system user in a sharded environment</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-51041">SERVER-51041</a>: Throttle starting transactions for secondary
reads</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-51120">SERVER-51120</a>: Find queries with MERGE_SORT incorrectly sort
the results when the collation is specified</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.2%27">All JIRA issues closed in 4.4.2</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id97"><span class="std std-ref">4.4.2 Changelog</span></a></li>
</ul>
</div>
<div class="section" id="sep-9-2020">
<span id="id14"></span><h3>4.4.1 - Sep 9, 2020<a class="headerlink" href="#sep-9-2020" title="Permalink to this headline">¶</a></h3>
<p>Issues fixed:</p>
<ul class="simple">
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-48531">SERVER-48531</a>: 3 way deadlock can happen between chunk
splitter, prepared transactions and stepdown thread.</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-48641">SERVER-48641</a>: Deadlock due to the MigrationDestinationManager
waiting for write concern with the session checked-out</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-49546">SERVER-49546</a>: setFCV to 4.4 should insert range deletion
tasks in batches rather than one at a time</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-49694">SERVER-49694</a>: On a sharded cluster, nearest or hedged reads
may not be routed to a near shard replica.</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-50137">SERVER-50137</a>: MongoDB crashes with Invariant failure due to
oplog entries generated in 3.4</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-50140">SERVER-50140</a>: Initial sync cannot survive unclean restart of
the sync source</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-50170">SERVER-50170</a>: Fix server selection failure on mongos</li>
<li><a class="reference external" href="https://jira.mongodb.org/browse/WT-6623">WT-6623</a>: Set the connection level file id in recovery file
scan</li>
<li><a class="reference external" href="https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%274.4.1%27">All JIRA issues closed in 4.4.1</a></li>
<li><a class="reference internal" href="4.4-changelog.html#id109"><span class="std std-ref">4.4.1 Changelog</span></a></li>
</ul>
</div>
</div>
<div class="section" id="aggregation">
<span id="rel-notes-agg"></span><h2>Aggregation<a class="headerlink" href="#aggregation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="union-all-unionwith-stage">
<h3>Union All (<code class="docutils literal"><span class="pre">$unionWith</span></code> Stage)<a class="headerlink" href="#union-all-unionwith-stage" title="Permalink to this headline">¶</a></h3>
<p>MongoDB 4.4 adds the <a class="reference internal" href="../reference/operator/aggregation/unionWith.html#pipe._S_unionWith" title="$unionWith"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$unionWith</span></code></a> aggregation stage,
providing the ability to combines pipeline results from multiple
collections into a single result set.</p>
<p>For details, see <a class="reference internal" href="../reference/operator/aggregation/unionWith.html#pipe._S_unionWith" title="$unionWith"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$unionWith</span></code></a>.</p>
</div>
<div class="section" id="custom-aggregation-expressions">
<h3>Custom Aggregation Expressions<a class="headerlink" href="#custom-aggregation-expressions" title="Permalink to this headline">¶</a></h3>
<p>Starting in version 4.4, MongoDB provides the following new operators
that allow users to define custom aggregation expressions:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/operator/aggregation/accumulator.html#grp._S_accumulator" title="$accumulator"><code class="xref mongodb mongodb-group docutils literal"><span class="pre">$accumulator</span></code></a></li>
<li><a class="reference internal" href="../reference/operator/aggregation/function.html#exp._S_function" title="$function"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$function</span></code></a></li>
</ul>
<p>With the addition of these new operators, you can use aggregation to
write custom JavaScript expressions instead of relying on
<a class="reference internal" href="../reference/command/mapReduce.html#dbcmd.mapReduce" title="mapReduce"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">mapReduce</span></code></a> and <a class="reference internal" href="../reference/operator/query/where.html#op._S_where" title="$where"><code class="xref mongodb mongodb-query docutils literal"><span class="pre">$where</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even before version 4.4, various map-reduce expressions could also
be rewritten using <a class="reference internal" href="../meta/aggregation-quick-reference.html"><span class="doc">other aggregation pipeline operators</span></a>, such as <a class="reference internal" href="../reference/operator/aggregation/group.html#pipe._S_group" title="$group"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$group</span></code></a>,
<a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a>, etc., without requiring custom functions.</p>
</div>
<p>For more information, see
<a class="reference internal" href="../reference/map-reduce-to-aggregation-pipeline.html"><span class="doc">Map-Reduce to Aggregation Pipeline</span></a>.</p>
</div>
<div class="section" id="new-aggregation-operators">
<span id="rel-notes-new-agg-operators"></span><h3>New Aggregation Operators<a class="headerlink" href="#new-aggregation-operators" title="Permalink to this headline">¶</a></h3>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../reference/operator/aggregation/accumulator.html#grp._S_accumulator" title="$accumulator"><code class="xref mongodb mongodb-group docutils literal"><span class="pre">$accumulator</span></code></a></td>
<td>Returns the result of a user-defined
<a class="reference internal" href="../reference/operator/aggregation.html#agg-operators-group-accumulators"><span class="std std-ref">accumulator operator</span></a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/operator/aggregation/binarySize.html#exp._S_binarySize" title="$binarySize"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$binarySize</span></code></a></td>
<td>Returns the size of a given string or binary data value’s
content in bytes.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../reference/operator/aggregation/bsonSize.html#exp._S_bsonSize" title="$bsonSize"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$bsonSize</span></code></a></td>
<td>Returns the size in bytes of a given document (i.e. bsontype
<code class="docutils literal"><span class="pre">Object</span></code>) when encoded as <a class="reference internal" href="../reference/glossary.html#term-bson"><span class="xref std std-term">BSON</span></a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/operator/aggregation/first-array-element.html#exp._S_first" title="$first"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$first</span></code></a></td>
<td>Returns the first element in an array.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../reference/operator/aggregation/function.html#exp._S_function" title="$function"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$function</span></code></a></td>
<td>Defines a custom aggregation expression.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/operator/aggregation/last-array-element.html#exp._S_last" title="$last"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$last</span></code></a></td>
<td>Returns the last element in an array.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../reference/operator/aggregation/isNumber.html#exp._S_isNumber" title="$isNumber"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$isNumber</span></code></a></td>
<td><p class="first">Returns boolean <code class="docutils literal"><span class="pre">true</span></code> if the specified expression resolves
to an <a class="reference internal" href="../reference/mongodb-extended-json.html#bson.Int32" title="Int32"><code class="xref mongodb mongodb-bsontype docutils literal"><span class="pre">integer</span></code></a>, <a class="reference internal" href="../reference/mongodb-extended-json.html#bson.Decimal128" title="Decimal128"><code class="xref mongodb mongodb-bsontype docutils literal"><span class="pre">decimal</span></code></a>, <a class="reference internal" href="../reference/mongodb-extended-json.html#bson.Double" title="Double"><code class="xref mongodb mongodb-bsontype docutils literal"><span class="pre">double</span></code></a>, or <a class="reference internal" href="../reference/mongodb-extended-json.html#bson.Int64" title="Int64"><code class="xref mongodb mongodb-bsontype docutils literal"><span class="pre">long</span></code></a>.</p>
<p class="last">Returns boolean <code class="docutils literal"><span class="pre">false</span></code> if the expression resolves to any other
<a class="reference internal" href="../reference/mongodb-extended-json.html"><span class="doc">BSON type</span></a>, <code class="docutils literal"><span class="pre">null</span></code>, or
a missing field</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/operator/aggregation/replaceOne.html#exp._S_replaceOne" title="$replaceOne"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$replaceOne</span></code></a></td>
<td>Replaces the first instance of a matched string in a given input.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../reference/operator/aggregation/replaceAll.html#exp._S_replaceAll" title="$replaceAll"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$replaceAll</span></code></a></td>
<td>Replaces all instances of a matched string in a given input.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="general-aggregation-improvements">
<h3>General Aggregation Improvements<a class="headerlink" href="#general-aggregation-improvements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="out">
<h4><code class="docutils literal"><span class="pre">$out</span></code><a class="headerlink" href="#out" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/operator/aggregation/out.html#pipe._S_out" title="$out"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$out</span></code></a> can output to a collection in
a different database. In earlier versions, <a class="reference internal" href="../reference/operator/aggregation/out.html#pipe._S_out" title="$out"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$out</span></code></a> can only
output to a collection in the same database database where the
aggregation is run.</li>
<li><a class="reference internal" href="../reference/operator/aggregation/out.html#pipe._S_out" title="$out"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$out</span></code></a> can only run on replica set secondary nodes if
all the nodes in cluster have
<a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#view-fcv"><span class="std std-ref">featureCompatibilityVersion</span></a> set to <code class="docutils literal"><span class="pre">4.4</span></code> or
higher and the <a class="reference internal" href="../core/read-preference.html"><span class="doc">Read Preference</span></a> allows secondary reads.
Check your <a href="#id15"><span class="problematic" id="id16">:driver:`driver &lt;/&gt;`</span></a> documentation to see when your
driver added support.</li>
</ul>
</div>
<div class="section" id="indexstats">
<h4><code class="docutils literal"><span class="pre">$indexStats</span></code><a class="headerlink" href="#indexstats" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4 (also available starting in 4.2.4),
<a class="reference internal" href="../reference/operator/aggregation/indexStats.html#pipe._S_indexStats" title="$indexStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$indexStats</span></code></a> includes the following fields in its output:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../reference/operator/aggregation/indexStats.html#indexstats-output-shard"><span class="std std-ref">shard</span></a></td>
<td>Name of the shard, if applicable.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/operator/aggregation/indexStats.html#indexstats-output-spec"><span class="std std-ref">spec</span></a></td>
<td>Index specification document</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../reference/operator/aggregation/indexStats.html#indexstats-output-building"><span class="std std-ref">building</span></a></td>
<td>A boolean flag that indicates if the index is currently being built.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="merge">
<h4><code class="docutils literal"><span class="pre">$merge</span></code><a class="headerlink" href="#merge" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a> can output to a collection in
a different database. In earlier versions, <a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a> can
only output to a collection in the same database where the aggregation
is run.</li>
<li><a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a> can only run on replica set secondary nodes if
all the nodes in cluster have
<a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#view-fcv"><span class="std std-ref">featureCompatibilityVersion</span></a> set to <code class="docutils literal"><span class="pre">4.4</span></code> or
higher and the <a class="reference internal" href="../core/read-preference.html"><span class="doc">Read Preference</span></a> allows secondary reads.
Check your <a href="#id17"><span class="problematic" id="id18">:driver:`driver &lt;/&gt;`</span></a> documentation to see
when your driver added support.</li>
</ul>
<p>Starting in MongoDB 4.4, <a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a> can output to the same
collection that is being aggregated. You can also output to a
collection which appears in other stages of the pipeline, such as
<a class="reference internal" href="../reference/operator/aggregation/lookup.html#pipe._S_lookup" title="$lookup"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$lookup</span></code></a>.</p>
<p>Versions of MongoDB prior to 4.4 did not allow <a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a> to
output to the same collection as the collection being aggregated.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When <a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a> outputs to the same collection that is being
aggregated, documents may get updated multiple times or the operation
may result in an infinite loop. This behavior occurs when the update
performed by <a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a> changes the physical location of
documents stored on disk. When the physical location of a document
changes, <a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a> may view it as an entirely new document,
resulting in additional updates. For more information on this
behavior, see <a class="reference external" href="https://en.wikipedia.org/wiki/Halloween_Problem">Halloween Problem</a>.</p>
</div>
</div>
<div class="section" id="plancachestats-changes">
<span id="agg-plancachesstats-changes"></span><h4><code class="docutils literal"><span class="pre">$planCacheStats</span></code> Changes<a class="headerlink" href="#plancachestats-changes" title="Permalink to this headline">¶</a></h4>
<p>Starting in version 4.4,</p>
<ul>
<li><p class="first"><a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html#pipe._S_planCacheStats" title="$planCacheStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$planCacheStats</span></code></a> stage can be run on
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instances as well as on
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> instances. In 4.2,
<a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html#pipe._S_planCacheStats" title="$planCacheStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$planCacheStats</span></code></a> stage can only run on
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> instances.</p>
</li>
<li><p class="first"><a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html#pipe._S_planCacheStats" title="$planCacheStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$planCacheStats</span></code></a> includes new fields: the <a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html#plancachestats-host"><span class="std std-ref">host</span></a> field and, when run against a
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>, the <a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html#plancachestats-shard"><span class="std std-ref">shard</span></a>
field.</p>
</li>
<li><p class="first"><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell provides the method
<a class="reference internal" href="../reference/method/PlanCache.list.html#PlanCache.list" title="PlanCache.list()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">PlanCache.list()</span></code></a> as a wrapper for
<a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html#pipe._S_planCacheStats" title="$planCacheStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$planCacheStats</span></code></a> aggregation stage.</p>
</li>
<li><p class="first">MongoDB removes the following:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">planCacheListPlans</span></code> and <code class="docutils literal"><span class="pre">planCacheListQueryShapes</span></code>
commands, and</li>
<li><code class="docutils literal"><span class="pre">PlanCache.getPlansByQuery()</span></code> and
<code class="docutils literal"><span class="pre">PlanCache.listQueryShapes()</span></code> methods.</li>
</ul>
<p>Use <a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html#pipe._S_planCacheStats" title="$planCacheStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$planCacheStats</span></code></a> or <a class="reference internal" href="../reference/method/PlanCache.list.html#PlanCache.list" title="PlanCache.list()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">PlanCache.list()</span></code></a> instead.</p>
</li>
</ul>
</div>
<div class="section" id="collstats-changes">
<h4><code class="docutils literal"><span class="pre">$collStats</span></code> Changes<a class="headerlink" href="#collstats-changes" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, <a class="reference internal" href="../reference/operator/aggregation/collStats.html#pipe._S_collStats" title="$collStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$collStats</span></code></a> accepts the
<code class="docutils literal"><span class="pre">queryExecStats</span></code> field as an argument document. Providing this field
returns the following fields in the output:</p>
<p>The <code class="docutils literal"><span class="pre">collectionScans</span></code> field contains an embedded document bearing the
following fields:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">total</span></code></td>
<td>A 64-bit integer giving the total number of queries that
performed a collection scan. The total consists of queries that
did and did not use a <a class="reference internal" href="../core/tailable-cursors.html"><span class="doc">tailable cursor</span></a>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">nonTailable</span></code></td>
<td>A 64-bit integer giving the number of queries that performed a
collection scan that did not use a <a class="reference internal" href="../core/tailable-cursors.html"><span class="doc">tailable cursor</span></a>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="explain-changes">
<h4><code class="docutils literal"><span class="pre">explain</span></code> Changes<a class="headerlink" href="#explain-changes" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, when you run the
<a class="reference internal" href="../reference/method/db.collection.explain.html#db.collection.explain" title="db.collection.explain()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.explain().aggregate()</span></code></a>
method in <code class="docutils literal"><span class="pre">executionStats</span></code> and <code class="docutils literal"><span class="pre">allPlansExecution</span></code> modes, each
<a class="reference internal" href="../aggregation.html"><span class="doc">pipeline stage</span></a> listed in the <a class="reference internal" href="../reference/explain-results.html"><span class="doc">explain output</span></a> includes  <a class="reference internal" href="../reference/explain-results.html#explain.executionStats.nReturned" title="explain.executionStats.nReturned"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">nReturned</span></code></a> and
<a class="reference internal" href="../reference/explain-results.html#explain.executionStats.executionStages.executionTimeMillisEstimate" title="explain.executionStats.executionStages.executionTimeMillisEstimate"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">executionTimeMillisEstimate</span></code></a>.</p>
</div>
</div>
</div>
<div class="section" id="replica-sets">
<h2>Replica Sets<a class="headerlink" href="#replica-sets" title="Permalink to this headline">¶</a></h2>
<div class="section" id="resumable-initial-sync">
<h3>Resumable Initial Sync<a class="headerlink" href="#resumable-initial-sync" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, a secondary performing initial sync can attempt
to resume the sync process if interrupted by a <em>transient</em> (i.e.
temporary) network error, collection drop, or collection rename. The
sync source must also run MongoDB 4.4 to support resumable initial sync.
If the sync source runs MongoDB 4.2 or earlier, the secondary must
restart the initial sync process as if it encountered a non-transient
network error.</p>
<p>By default, the secondary tries to resume initial sync for 24 hours.
MongoDB 4.4 adds the
<a class="reference internal" href="../reference/parameters.html#param.initialSyncTransientErrorRetryPeriodSeconds" title="initialSyncTransientErrorRetryPeriodSeconds"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">initialSyncTransientErrorRetryPeriodSeconds</span></code></a> server
parameter for controlling the amount of time the secondary attempts to
resume initial sync. If the secondary cannot successfully resume the
initial sync process during the configured time period, it selects a new
healthy source from the replica set and restarts the initial
synchronization process from the beginning.</p>
<p>Prior to MongoDB 4.4, the secondary would restart the entire initial
sync if it encountered an error during the process.</p>
</div>
<div class="section" id="streaming-replication">
<h3>Streaming Replication<a class="headerlink" href="#streaming-replication" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, <em>sync from</em> sources send a continuous
stream of <a class="reference internal" href="../core/replica-set-oplog.html"><span class="doc">oplog</span></a> entries to their
syncing secondaries.</p>
<p>Prior to MongoDB 4.4, secondaries fetched batches of <a class="reference internal" href="../core/replica-set-oplog.html"><span class="doc">oplog</span></a> entries by issuing a request to their <em>sync
from</em> source and waiting for a response. This required a network roundtrip
for each batch of <a class="reference internal" href="../core/replica-set-oplog.html"><span class="doc">oplog</span></a> entries. MongoDB
4.4 adds the <a class="reference internal" href="../reference/parameters.html#param.oplogFetcherUsesExhaust" title="oplogFetcherUsesExhaust"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">oplogFetcherUsesExhaust</span></code></a> startup parameter for
disabling streaming replication and using the older replication behavior.</p>
<p>For details, see <a class="reference internal" href="../core/replica-set-sync.html#replica-set-streaming-replication"><span class="std std-ref">Streaming Replication</span></a>.</p>
</div>
<div class="section" id="rollback-directory">
<h3>Rollback Directory<a class="headerlink" href="#rollback-directory" title="Permalink to this headline">¶</a></h3>
<p>Starting in Mongo 4.4, the rollback directory for a collection is named
after the collection’s UUID rather than the collection namespace; e.g.</p>
<div class="button-code-block">
<div class="button-row">
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>&lt;dbpath&gt;/rollback/20f74796-d5ea-42f5-8c95-f79b39bad190/removed.2020-02-19T04-57-11.0.bson
</pre></div>
</div>
</div>
<p>For details, see <a class="reference internal" href="../core/replica-set-rollbacks.html#replica-set-rollback-data"><span class="std std-ref">Rollback Data</span></a>.</p>
</div>
<div class="section" id="minimum-oplog-retention-period">
<h3>Minimum Oplog Retention Period<a class="headerlink" href="#minimum-oplog-retention-period" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, you can specify the minimum number of hours
to preserve an oplog entry. The <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> only removes
an oplog entry <em>if</em>:</p>
<ul class="simple">
<li>The oplog has reached the <a class="reference internal" href="../core/replica-set-oplog.html#replica-set-oplog-sizing"><span class="std std-ref">maximum configured size</span></a>, <em>and</em></li>
<li>The oplog entry is older than the configured number of hours based
on the host system clock.</li>
</ul>
<p>By default MongoDB does not set a minimum oplog retention period and
automatically truncates the oplog starting with the oldest entries to
maintain the configured maximum oplog size.</p>
<p>To configure the minimum oplog retention period when starting the
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>, either:</p>
<ul>
<li><p class="first">Add the <a class="reference internal" href="../reference/configuration-options.html#storage.oplogMinRetentionHours" title="storage.oplogMinRetentionHours"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">storage.oplogMinRetentionHours</span></code></a> setting to the
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> <a class="reference internal" href="../reference/configuration-options.html#configuration-options"><span class="std std-ref">configuration
file</span></a>.</p>
<p><em>-or-</em></p>
</li>
<li><p class="first">Add the <a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-oplogminretentionhours"><code class="xref std std-option docutils literal"><span class="pre">--oplogMinRetentionHours</span></code></a> command line option.</p>
</li>
</ul>
<p>To configure the minimum oplog retention period on a running
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>, use <a class="reference internal" href="../reference/command/replSetResizeOplog.html#dbcmd.replSetResizeOplog" title="replSetResizeOplog"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetResizeOplog</span></code></a>. Setting
the minimum oplog retention period while the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>
is running overrides any values set on startup. You must update
the value of the corresponding configuration file setting or
command line option to persist those changes through a server
restart.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The oplog can grow without constraint so as to retain oplog entries
for the configured number of hours. This may result in reduction or
exhaustion of system disk space due to a combination of high write
volume and large retention period.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../core/replica-set-oplog.html"><span class="doc">Replica Set Oplog</span></a></p>
</div>
</div>
<div class="section" id="slowopsamplerate-affects-secondary-logs">
<h3><code class="docutils literal"><span class="pre">slowOpSampleRate</span></code> Affects Secondary Logs<a class="headerlink" href="#slowopsamplerate-affects-secondary-logs" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, <a class="reference internal" href="../core/replica-set-oplog.html#slow-oplog-application"><span class="std std-ref">slow oplog application</span></a> logs on replica set secondaries are affected
by the <a class="reference internal" href="../reference/configuration-options.html#operationProfiling.slowOpSampleRate" title="operationProfiling.slowOpSampleRate"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">slowOpSampleRate</span></code></a>. In previous
versions, MongoDB logs all slow oplog entries regardless of the sample
rate.</p>
<p><a class="reference internal" href="../reference/configuration-options.html#operationProfiling.slowOpSampleRate" title="operationProfiling.slowOpSampleRate"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">slowOpSampleRate</span></code></a> specifies the fraction
of slow operations that should be profiled or logged.</p>
</div>
<div class="section" id="indexes-build-simultaneously-on-data-bearing-replica-set-members">
<h3>Indexes Build Simultaneously on Data-Bearing Replica Set Members<a class="headerlink" href="#indexes-build-simultaneously-on-data-bearing-replica-set-members" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Requires <code class="docutils literal"><span class="pre">featureCompatibilityVersion</span></code> 4.4+</p>
<p>Each <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> in the replica set or sharded cluster
<em>must</em> have <a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#set-fcv"><span class="std std-ref">featureCompatibilityVersion</span></a> set to at
least <code class="docutils literal"><span class="pre">4.4</span></code> to start index builds simultaneously across
replica set members.</p>
<p class="last">MongoDB 4.4 running <code class="docutils literal"><span class="pre">featureCompatibilityVersion:</span> <span class="pre">&quot;4.2&quot;</span></code> builds
indexes on the primary before replicating the index build to
secondaries.</p>
</div>
<p>Starting with MongoDB 4.4, index builds on a replica set or sharded
cluster build simultaneously across all data-bearing replica set
members. For sharded clusters, the index build occurs only on shards
containing data for the collection being indexed. The primary
requires a minimum number of data-bearing <a class="reference internal" href="../reference/replica-configuration.html#rsconf.members[n].votes" title="members[n].votes"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">voting</span></code></a> members (i.e commit quorum), including itself,
that must complete the build before marking the index as ready for
use.</p>
<p>By default, index builds use a commit quorum of all data-bearing voting
members. To start an index build with a non-default commit quorum,
MongoDB 4.4 adds the <a class="reference internal" href="../reference/command/createIndexes.html#createindexes-cmd-commitquorum"><span class="std std-ref">commitQuorum</span></a> parameter to
<a class="reference internal" href="../reference/command/createIndexes.html#dbcmd.createIndexes" title="createIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">createIndexes</span></code></a> or its shell helpers
<a class="reference internal" href="../reference/method/db.collection.createIndex.html#db.collection.createIndex" title="db.collection.createIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.createIndex()</span></code></a> and
<a class="reference internal" href="../reference/method/db.collection.createIndexes.html#db.collection.createIndexes" title="db.collection.createIndexes()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.createIndexes()</span></code></a>.</p>
<p>To modify the quorum required for an in-progress index
build, MongoDB 4.4 introduces the new <a class="reference internal" href="../reference/command/setIndexCommitQuorum.html#dbcmd.setIndexCommitQuorum" title="setIndexCommitQuorum"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">setIndexCommitQuorum</span></code></a>
command.</p>
<p>See <a class="reference internal" href="../core/index-creation.html#index-operations-replicated-build"><span class="std std-ref">Index Builds in Replicated Environments</span></a> for more information.</p>
</div>
<div class="section" id="replica-set-reconfiguration-changes">
<h3>Replica Set Reconfiguration Changes<a class="headerlink" href="#replica-set-reconfiguration-changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="changes-to-replsetreconfig">
<h4>Changes to <code class="docutils literal"><span class="pre">replSetReconfig</span></code><a class="headerlink" href="#changes-to-replsetreconfig" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, the <a class="reference internal" href="../reference/command/replSetReconfig.html#dbcmd.replSetReconfig" title="replSetReconfig"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></code></a> command
waits until a majority of voting members install the replica
configuration before returning success. A voting member is <em>any</em>
replica member where <a class="reference internal" href="../reference/replica-configuration.html#rsconf.members[n].votes" title="members[n].votes"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">members[n].votes</span></code></a> is <code class="docutils literal"><span class="pre">1</span></code>, including
arbiters. First, the operation waits until the <em>current</em>
configuration is committed before installing the <em>new</em> configuration
on the primary. The operation then waits until a majority of voting
members install the <em>new</em> configuration before returning
successfully. See
<a class="reference internal" href="../reference/command/replSetReconfig.html#replsetreconfig-cmd-majority-install"><span class="std std-ref">Reconfiguration Waits Until a Majority of Members Install the Replica Configuration</span></a> for more information.</p>
<p><a class="reference internal" href="../reference/command/replSetReconfig.html#dbcmd.replSetReconfig" title="replSetReconfig"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></code></a> waits indefinitely for a majority of
voting members to install the configuration by default. MongoDB 4.4
also adds the optional <a class="reference internal" href="../reference/command/replSetReconfig.html#replsetreconfig-cmd-maxtimems"><span class="std std-ref">maxTimeMS</span></a> parameter to
<a class="reference internal" href="../reference/command/replSetReconfig.html#dbcmd.replSetReconfig" title="replSetReconfig"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></code></a> for specifying the maximum amount of
time to wait for the operation to return successfully.</p>
<p>Starting in MongoDB 4.4, the <a class="reference internal" href="../reference/command/replSetReconfig.html#dbcmd.replSetReconfig" title="replSetReconfig"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></code></a> command
allows adding or removing no more than <code class="docutils literal"><span class="pre">1</span></code> <a class="reference internal" href="../reference/replica-configuration.html#rsconf.members[n].votes" title="members[n].votes"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">voting</span></code></a> member at a time. To add or remove multiple
voting members, issue a series of <a class="reference internal" href="../reference/command/replSetReconfig.html#dbcmd.replSetReconfig" title="replSetReconfig"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></code></a> or
<a class="reference internal" href="../reference/method/rs.reconfig.html#rs.reconfig" title="rs.reconfig()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></code></a> operations to add or remove one member at a
time. See <a class="reference internal" href="../reference/command/replSetReconfig.html#replsetreconfig-cmd-single-node"><span class="std std-ref">Reconfiguration Can Add or Remove No More than One Voting Member at a Time</span></a> for more
information.</p>
</div>
<div class="section" id="changes-to-replsetgetconfig">
<h4>Changes to <code class="docutils literal"><span class="pre">replSetGetConfig</span></code><a class="headerlink" href="#changes-to-replsetgetconfig" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference internal" href="../reference/command/replSetGetConfig.html#dbcmd.replSetGetConfig" title="replSetGetConfig"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetGetConfig</span></code></a> command
can specify a new option <a class="reference internal" href="../reference/command/replSetGetConfig.html#replsetgetconfig-commitmentstatus"><span class="std std-ref">commitmentStatus: true</span></a> when run on the primary. When
run with the option, the command includes in the output a
<a class="reference internal" href="../reference/command/replSetGetConfig.html#replsetgetconfig-output-commitmentstatus"><span class="std std-ref">commitmentStatus</span></a>
field. This output field indicates whether the replica set’s
previous reconfig has been committed, so that the replica set is
ready to be reconfigured again. For more information, see the
<a class="reference internal" href="../reference/command/replSetGetConfig.html#replsetgetconfig-commitmentstatus"><span class="std std-ref">replSetGetConfig</span></a> command.</p>
</div>
<div class="section" id="changes-to-replica-configuration-document">
<h4>Changes to Replica Configuration Document<a class="headerlink" href="#changes-to-replica-configuration-document" title="Permalink to this headline">¶</a></h4>
<p>MongoDB 4.4 adds the <a class="reference internal" href="../reference/replica-configuration.html#rsconf.term" title="term"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">term</span></code></a> field to the replica set
<a class="reference internal" href="../reference/replica-configuration.html#replica-set-configuration-document"><span class="std std-ref">configuration document</span></a>.
Replica set members use <a class="reference internal" href="../reference/replica-configuration.html#rsconf.term" title="term"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">term</span></code></a> and <a class="reference internal" href="../reference/replica-configuration.html#rsconf.version" title="version"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">version</span></code></a> to
achieve consensus on the “newest” replica configuration. Setting
<a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#set-fcv"><span class="std std-ref">featureCompatibilityVersion (fCV) : “4.4”</span></a>
implicitly performs a <a class="reference internal" href="../reference/command/replSetReconfig.html#dbcmd.replSetReconfig" title="replSetReconfig"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></code></a> to add the
<a class="reference internal" href="../reference/replica-configuration.html#rsconf.term" title="term"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">term</span></code></a> field to the configuration document and blocks until
the new configuration propagates to a majority of replica set
members. Similarly, downgrading to <code class="docutils literal"><span class="pre">fCV</span> <span class="pre">:</span> <span class="pre">&quot;4.2&quot;</span></code> implicitly
performs a reconfiguration to remove the <a class="reference internal" href="../reference/replica-configuration.html#rsconf.term" title="term"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">term</span></code></a> field.</p>
</div>
</div>
<div class="section" id="preferred-initial-sync-source">
<h3>Preferred Initial Sync Source<a class="headerlink" href="#preferred-initial-sync-source" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, you can specify the preferred initial sync
source using the <a class="reference internal" href="../reference/parameters.html#param.initialSyncSourceReadPreference" title="initialSyncSourceReadPreference"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">initialSyncSourceReadPreference</span></code></a> parameter.
You can only set this parameter on <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> startup, using
either the <a class="reference internal" href="../reference/privilege-actions.html#setParameter" title="setParameter"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">setParameter</span></code></a> configuration file setting or the
<a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-setparameter"><code class="xref std std-option docutils literal"><span class="pre">--setParameter</span></code></a> command line option.</p>
<p><a class="reference internal" href="../reference/parameters.html#param.initialSyncSourceReadPreference" title="initialSyncSourceReadPreference"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">initialSyncSourceReadPreference</span></code></a> supports following read
preference modes:</p>
<ul class="simple">
<li><a class="reference internal" href="../core/read-preference.html#primary" title="primary"><code class="xref mongodb mongodb-readmode docutils literal"><span class="pre">primary</span></code></a></li>
<li><a class="reference internal" href="../core/read-preference.html#primaryPreferred" title="primaryPreferred"><code class="xref mongodb mongodb-readmode docutils literal"><span class="pre">primaryPreferred</span></code></a> (Default for voting replica set members)</li>
<li><a class="reference internal" href="../core/read-preference.html#secondary" title="secondary"><code class="xref mongodb mongodb-readmode docutils literal"><span class="pre">secondary</span></code></a></li>
<li><a class="reference internal" href="../core/read-preference.html#secondaryPreferred" title="secondaryPreferred"><code class="xref mongodb mongodb-readmode docutils literal"><span class="pre">secondaryPreferred</span></code></a></li>
<li><a class="reference internal" href="../core/read-preference.html#nearest" title="nearest"><code class="xref mongodb mongodb-readmode docutils literal"><span class="pre">nearest</span></code></a> (Default for newly added <em>or</em> non-voting replica set members)</li>
</ul>
<p>If the replica set has disabled <a class="reference internal" href="../reference/replica-configuration.html#rsconf.settings.chainingAllowed" title="settings.chainingAllowed"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">chaining</span></code></a>, the default
<a class="reference internal" href="../reference/parameters.html#param.initialSyncSourceReadPreference" title="initialSyncSourceReadPreference"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">initialSyncSourceReadPreference</span></code></a> read preference mode
is <a class="reference internal" href="../core/read-preference.html#primary" title="primary"><code class="xref mongodb mongodb-readmode docutils literal"><span class="pre">primary</span></code></a>.</p>
<p>You cannot specify a tag set or <code class="docutils literal"><span class="pre">maxStalenessSeconds</span></code> to
<a class="reference internal" href="../reference/parameters.html#param.initialSyncSourceReadPreference" title="initialSyncSourceReadPreference"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">initialSyncSourceReadPreference</span></code></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../core/replica-set-sync.html#replica-set-initial-sync-source-selection"><span class="std std-ref">Initial Sync Source Selection</span></a></p>
</div>
</div>
<div class="section" id="mirrored-reads">
<span id="id19"></span><h3>Mirrored Reads<a class="headerlink" href="#mirrored-reads" title="Permalink to this headline">¶</a></h3>
<p>Starting in version 4.4, MongoDB provides <a class="reference internal" href="../replication.html#mirrored-reads"><span class="std std-ref">mirrored reads</span></a> to pre-warm electable secondary members’ cache with
the most recently accessed data. With mirrored reads, the primary can
mirror a subset of <a class="reference internal" href="../replication.html#mirrored-reads-supported-operations"><span class="std std-ref">operations</span></a> that it receives and send them
to a subset of electable secondaries. Pre-warming the cache of a
secondary can help restore performance more quickly after an election.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The primary’s response to the client is not affected by the
mirror reads. The mirrored reads are “fire-and-forget” operations
by the primary; i.e., the primary does not await the response for
the mirrored reads.</p>
</div>
<div class="section" id="mirrored-reads-parameter">
<h4>Mirrored Reads Parameter<a class="headerlink" href="#mirrored-reads-parameter" title="Permalink to this headline">¶</a></h4>
<p>MongoDB 4.4 adds the following mirrored reads parameter. You can set
the parameter at startup using the <a class="reference internal" href="../reference/privilege-actions.html#setParameter" title="setParameter"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">setParameter</span></code></a>
configuration file setting or the <a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-setparameter"><code class="xref std std-option docutils literal"><span class="pre">--setParameter</span></code></a> command line option or at runtime with
<a class="reference internal" href="../reference/command/setParameter.html#dbcmd.setParameter" title="setParameter"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">setParameter</span></code></a> command:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../reference/parameters.html#param.mirrorReads" title="mirrorReads"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">mirrorReads</span></code></a></td>
<td><p class="first">Specifies the <code class="docutils literal"><span class="pre">samplingRate</span></code> and <code class="docutils literal"><span class="pre">maxTimeMS</span></code> settings for
mirrored reads.</p>
<p><code class="docutils literal"><span class="pre">{</span> <span class="pre">samplingRate:</span> <span class="pre">&lt;float&gt;,</span> <span class="pre">maxTimeMS:</span> <span class="pre">&lt;int&gt;</span> <span class="pre">}</span></code></p>
<p class="last">A <code class="docutils literal"><span class="pre">samplingRate</span></code> of <code class="docutils literal"><span class="pre">0</span></code> turns off mirrored reads.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mirrored-reads-metrics">
<h4>Mirrored Reads Metrics<a class="headerlink" href="#mirrored-reads-metrics" title="Permalink to this headline">¶</a></h4>
<p>The command <a class="reference internal" href="../reference/command/serverStatus.html#dbcmd.serverStatus" title="serverStatus"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">serverStatus</span></code></a> and its corresponding
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell method <a class="reference internal" href="../reference/method/db.serverStatus.html#db.serverStatus" title="db.serverStatus()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.serverStatus()</span></code></a> return
<a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.mirroredReads" title="mirroredReads"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">mirroredReads</span></code></a> if you specify the field’s inclusion
in the operation:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">runCommand</span><span class="p">(</span> <span class="p">{</span> <span class="nx">serverStatus</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">mirroredReads</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">serverStatus</span><span class="p">(</span> <span class="p">{</span> <span class="nx">mirroredReads</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="replica-set-write-acknowledgement">
<h3>Replica Set Write Acknowledgement<a class="headerlink" href="#replica-set-write-acknowledgement" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, replica set members in the
<a class="reference internal" href="../reference/replica-states.html#replstate.STARTUP2" title="STARTUP2"><code class="xref mongodb mongodb-replstate docutils literal"><span class="pre">STARTUP2</span></code></a> state do not participate in write majorities.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../core/replica-set-write-concern.html"><span class="doc">Write Concern for Replica Sets</span></a></p>
</div>
</div>
</div>
<div class="section" id="sharded-clusters">
<h2>Sharded Clusters<a class="headerlink" href="#sharded-clusters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="refinable-shard-keys">
<h3>Refinable Shard Keys<a class="headerlink" href="#refinable-shard-keys" title="Permalink to this headline">¶</a></h3>
<p>Starting in 4.4, MongoDB provides the
<a class="reference internal" href="../reference/command/refineCollectionShardKey.html#dbcmd.refineCollectionShardKey" title="refineCollectionShardKey"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">refineCollectionShardKey</span></code></a> command. With the new command,
you can refine a collection’s shard key by adding a suffix field or
fields to the existing key. Refining a collection’s shard key allows
for a more fine-grained data distribution and can address situations
where the existing key has led to <a class="reference internal" href="../core/sharding-data-partitioning.html#jumbo-chunks"><span class="std std-ref">jumbo (i.e. indivisible)
chunks</span></a> due to insufficient cardinality.</p>
<p>For example, you may have an existing <code class="docutils literal"><span class="pre">orders</span></code> collection with the
shard key <code class="docutils literal"><span class="pre">{</span> <span class="pre">customer_id:</span> <span class="pre">1</span> <span class="pre">}</span></code>. You can change the shard key by
adding a suffix <code class="docutils literal"><span class="pre">order_id</span></code> field to the shard key so that <code class="docutils literal"><span class="pre">{</span>
<span class="pre">customer_id:</span> <span class="pre">1,</span> <span class="pre">order_id:</span> <span class="pre">1</span> <span class="pre">}</span></code> becomes the new shard key, allowing
data distribution by both <code class="docutils literal"><span class="pre">customer_id</span></code> and <code class="docutils literal"><span class="pre">order_id</span></code> fields.</p>
<p>To use the <a class="reference internal" href="../reference/command/refineCollectionShardKey.html#dbcmd.refineCollectionShardKey" title="refineCollectionShardKey"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">refineCollectionShardKey</span></code></a> command, the sharded
cluster must have <a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#view-fcv"><span class="std std-ref">feature compatibility version (fcv)</span></a>
of <code class="docutils literal"><span class="pre">4.4</span></code>. For more information, see the
<a class="reference internal" href="../reference/command/refineCollectionShardKey.html#dbcmd.refineCollectionShardKey" title="refineCollectionShardKey"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">refineCollectionShardKey</span></code></a> command.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>After you refine the shard key, it may be that not all documents in
the collection have the suffix field(s). To populate the missing
shard key field(s), see <a class="reference internal" href="../core/sharding-shard-key.html#shard-key-missing"><span class="std std-ref">Missing Shard Key Fields</span></a>.</p>
<p class="last">Before refining the shard key, ensure that all or most documents in
the collection have the suffix fields, if possible, to avoid having
to populate the field afterwards.</p>
</div>
<p>In earlier versions, once you select a shard key, you cannot modify the
shard key.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Missing Shard Keys</p>
<p class="last">With the ability to refine a shard key with a suffix, it may be that
not all documents in the collection have the suffix fields. Starting in
version 4.4, documents in a sharded collection can be missing the shard
key fields. In earlier versions, shard key fields must exist in every
document for a sharded collection. For details, see
<a class="reference internal" href="../core/sharding-shard-key.html#shard-key-missing"><span class="std std-ref">Missing Shard Key Fields</span></a>.</p>
</div>
</div>
<div class="section" id="hedged-reads">
<h3>Hedged Reads<a class="headerlink" href="#hedged-reads" title="Permalink to this headline">¶</a></h3>
<p>To minimize latencies, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instances, by default, can
use <a class="reference internal" href="../core/sharded-cluster-query-router.html#mongos-hedged-reads"><span class="std std-ref">hedge reads</span></a>. With hedged reads, the
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instances can route read operations to multiple
members per each queried shard and return results from the first
respondent per shard. By default, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instances
support using hedged reads. To turn off a <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>
instance’s support for hedged reads, set the
<a class="reference internal" href="../reference/parameters.html#param.readHedgingMode" title="readHedgingMode"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">readHedgingMode</span></code></a> parameter for the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>.</p>
<p>Hedged reads are specified per operation as part of the read
preference. Non-<code class="docutils literal"><span class="pre">primary</span></code> <a class="reference internal" href="../core/read-preference.html"><span class="doc">read preferences</span></a> support hedged reads. Read preference
<a class="reference internal" href="../core/read-preference.html#nearest" title="nearest"><code class="xref mongodb mongodb-readmode docutils literal"><span class="pre">nearest</span></code></a> specifies hedged read by default.</p>
<p>For more information, see:</p>
<ul class="simple">
<li><a class="reference internal" href="../core/sharded-cluster-query-router.html#mongos-hedged-reads"><span class="std std-ref">Hedged Reads</span></a></li>
<li><a class="reference internal" href="../core/read-preference-mechanics.html#replica-set-read-preference-behavior-mongos"><span class="std std-ref">Read Preference for Sharded Clusters</span></a></li>
</ul>
<div class="section" id="hedged-read-parameters">
<h4>Hedged Read Parameters<a class="headerlink" href="#hedged-read-parameters" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../reference/parameters.html#param.readHedgingMode" title="readHedgingMode"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">readHedgingMode</span></code></a></td>
<td>Enables or disables <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instance’s support for
hedged reads.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/parameters.html#param.maxTimeMSForHedgedReads" title="maxTimeMSForHedgedReads"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">maxTimeMSForHedgedReads</span></code></a></td>
<td>Specifies the maximimum time limit (in milliseconds) for the
additional read sent to <a class="reference internal" href="../core/sharded-cluster-query-router.html#mongos-hedged-reads"><span class="std std-ref">hedge a read operation</span></a>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="hedged-read-option-for-read-preference">
<h4>Hedged Read Option for Read Preference<a class="headerlink" href="#hedged-read-option-for-read-preference" title="Permalink to this headline">¶</a></h4>
<p>To specify hedged read for a read preference, MongoDB 4.4 introduces
the <a class="reference internal" href="../core/read-preference-hedge-option.html#read-preference-hedged-read"><span class="std std-ref">Hedged Read Option</span></a>. To set using a MongoDB
driver, refer to the driver <a href="#id20"><span class="problematic" id="id21">:driver:`read preference API
documentation&lt;/&gt;`</span></a>.</p>
<p>The following <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell methods can accept hedge
options to enable hedged read for the specified read preference:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/method/cursor.readPref.html#cursor.readPref" title="cursor.readPref()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">cursor.readPref()</span></code></a></li>
<li><a class="reference internal" href="../reference/method/Mongo.setReadPref.html#Mongo.setReadPref" title="Mongo.setReadPref()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">Mongo.setReadPref()</span></code></a></li>
</ul>
</div>
<div class="section" id="hedged-read-metrics">
<h4>Hedged Read Metrics<a class="headerlink" href="#hedged-read-metrics" title="Permalink to this headline">¶</a></h4>
<p>The command <a class="reference internal" href="../reference/command/serverStatus.html#dbcmd.serverStatus" title="serverStatus"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">serverStatus</span></code></a> and its corresponding
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell method <a class="reference internal" href="../reference/method/db.serverStatus.html#db.serverStatus" title="db.serverStatus()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.serverStatus()</span></code></a> return
<a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.hedgingMetrics" title="hedgingMetrics"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">hedgingMetrics</span></code></a>.</p>
</div>
</div>
<div class="section" id="balancercollectionstatus-command">
<h3><code class="docutils literal"><span class="pre">balancerCollectionStatus</span></code> Command<a class="headerlink" href="#balancercollectionstatus-command" title="Permalink to this headline">¶</a></h3>
<p>MongoDB 4.4 provides the command <a class="reference internal" href="../reference/command/balancerCollectionStatus.html#dbcmd.balancerCollectionStatus" title="balancerCollectionStatus"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">balancerCollectionStatus</span></code></a>
and the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell helper method
<a class="reference internal" href="../reference/method/sh.balancerCollectionStatus.html#sh.balancerCollectionStatus" title="sh.balancerCollectionStatus()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.balancerCollectionStatus()</span></code></a> that return information about
whether the chunks of a sharded collection are balanced (i.e. do not
need to be moved) as of the time the command is run or need to be
moved. With the command, users can verify that initial chunk creation
and migration has finished.</p>
</div>
<div class="section" id="improved-mongos-startup-procedure">
<h3>Improved <code class="docutils literal"><span class="pre">mongos</span></code> Startup Procedure<a class="headerlink" href="#improved-mongos-startup-procedure" title="Permalink to this headline">¶</a></h3>
<p>Starting with MongoDB 4.4, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> adds the following new
default startup behavior:</p>
<ul class="simple">
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> will now preload a sharded cluster’s routing
table on startup, rather than doing so on-demand for the first
incoming client connection.</li>
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> will now prewarm its connection pool to shard
hosts on startup, rather than doing so on-demand for incoming
client connections.</li>
</ul>
<p>This behavior results in faster servicing of initial client
connections after a <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instance is started or
restarted. In particular, this allows sites that employ multiple
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instances to restart them as necessary, or add new
ones, without initial client requests to those instances needing to wait
on connection establishment.</p>
<p>Both routing table preloading and connection pool prewarming are enabled
by default.</p>
<p>MongoDB 4.4 adds the following parameters for controlling this behavior:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/parameters.html#param.loadRoutingTableOnStartup" title="loadRoutingTableOnStartup"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">loadRoutingTableOnStartup</span></code></a><ul>
<li><em>Default</em>: <code class="docutils literal"><span class="pre">true</span></code> (Enabled)</li>
<li>Enables or disables support for preloading the routing table on
startup for the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>.</li>
</ul>
</li>
<li><a class="reference internal" href="../reference/parameters.html#param.warmMinConnectionsInShardingTaskExecutorPoolOnStartup" title="warmMinConnectionsInShardingTaskExecutorPoolOnStartup"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">warmMinConnectionsInShardingTaskExecutorPoolOnStartup</span></code></a><ul>
<li><em>Default</em>: <code class="docutils literal"><span class="pre">true</span></code> (Enabled)</li>
<li>Enables or disables support for prewarming the connection pool on
startup for the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>.</li>
</ul>
</li>
<li><a class="reference internal" href="../reference/parameters.html#param.warmMinConnectionsInShardingTaskExecutorPoolOnStartupWaitMS" title="warmMinConnectionsInShardingTaskExecutorPoolOnStartupWaitMS"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">warmMinConnectionsInShardingTaskExecutorPoolOnStartupWaitMS</span></code></a><ul>
<li><em>Default</em>: <code class="docutils literal"><span class="pre">2000</span></code> (2 seconds)</li>
<li>Sets the timeout in milliseconds before client connections
to the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> are allowed regardless of established
connection pool size.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="improved-routing-table-updates">
<h3>Improved Routing Table Updates<a class="headerlink" href="#improved-routing-table-updates" title="Permalink to this headline">¶</a></h3>
<p>Running <a class="reference internal" href="../reference/command/flushRouterConfig.html#dbcmd.flushRouterConfig" title="flushRouterConfig"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">flushRouterConfig</span></code></a> is no longer required after
executing the <a class="reference internal" href="../reference/command/movePrimary.html#dbcmd.movePrimary" title="movePrimary"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">movePrimary</span></code></a> or <a class="reference internal" href="../reference/command/dropDatabase.html#dbcmd.dropDatabase" title="dropDatabase"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">dropDatabase</span></code></a>
commands. These two commands now automatically refresh a sharded
cluster’s routing table as needed when run. Manually issuing the
<a class="reference internal" href="../reference/command/flushRouterConfig.html#dbcmd.flushRouterConfig" title="flushRouterConfig"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">flushRouterConfig</span></code></a> command is still recommended in the cases
described under
<a class="reference internal" href="../reference/command/flushRouterConfig.html#flushrouterconfig-considerations"><span class="std std-ref">flushRouterConfig Considerations</span></a>.</p>
</div>
<div class="section" id="compound-hashed-shard-keys">
<span id="rel-notes-sharding-compound-hashed"></span><h3>Compound Hashed Shard Keys<a class="headerlink" href="#compound-hashed-shard-keys" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, you can shard a collection using a compound
shard key with a single hashed field. Prior to 4.4, MongoDB did not
support compound shard keys with a hashed field.</p>
<p>Compound hashed sharding supports features like <a class="reference internal" href="../core/zone-sharding.html#zone-sharding"><span class="std std-ref">zone sharding</span></a>, where the prefix (i.e. first) non-hashed field or
fields support zone ranges while the hashed field supports more even
distribution of the sharded data. For example, the following operation
shards a collection on a compound hashed shard key that supports zoned
sharding:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">sh</span><span class="p">.</span><span class="nx">shardCollection</span><span class="p">(</span>
  <span class="s2">&quot;examples.compoundHashedCollection&quot;</span><span class="p">,</span>
  <span class="p">{</span> <span class="s2">&quot;fieldA&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;fieldB&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;fieldC&quot;</span> <span class="o">:</span> <span class="s2">&quot;hashed&quot;</span> <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Compound hashed sharding also supports shard keys with a hashed prefix
for resolving data distribution issues related to <a class="reference internal" href="../core/sharding-choose-a-shard-key.html#shard-key-monotonic"><span class="std std-ref">monotonically
increasing fields</span></a> For example, the
following operation shards a collection on a compound hashed shard key
where the hashed field is the shard key prefix:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">sh</span><span class="p">.</span><span class="nx">shardCollection</span><span class="p">(</span>
  <span class="s2">&quot;examples.compoundHashedCollection&quot;</span><span class="p">,</span>
  <span class="p">{</span> <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;hashed&quot;</span><span class="p">,</span> <span class="s2">&quot;fieldA&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="../core/hashed-sharding.html#sharding-hashed-sharding"><span class="std std-ref">Hashed Sharding</span></a></li>
<li><a class="reference internal" href="#rel-notes-compound-hashed-index"><span class="std std-ref">Compound Hashed Indexes</span></a></li>
</ul>
</div>
</div>
<div class="section" id="chunk-migration-failover-resiliency-improvements">
<h3>Chunk Migration Failover Resiliency Improvements<a class="headerlink" href="#chunk-migration-failover-resiliency-improvements" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the following changes improve <a class="reference internal" href="../reference/glossary.html#term-chunk"><span class="xref std std-term">chunk</span></a>
migrations and <a class="reference internal" href="../reference/glossary.html#term-orphaned-document"><span class="xref std std-term">orphaned document</span></a> cleanup resiliency during
failover:</p>
<ul class="simple">
<li>Chunk ranges awaiting cleanup after a chunk migration are now
persisted in the <a class="reference internal" href="../reference/config-database.html#config.rangeDeletions" title="config.rangeDeletions"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">config.rangeDeletions</span></code></a> collection and
replicated throughout the shard. In the event of a failover, the
shard’s new primary reads the documents in the
<a class="reference internal" href="../reference/config-database.html#config.rangeDeletions" title="config.rangeDeletions"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">config.rangeDeletions</span></code></a> collection and resumes deleting the
corresponding ranges. The document that describes a range awaiting
cleanup is deleted from the <a class="reference internal" href="../reference/config-database.html#config.rangeDeletions" title="config.rangeDeletions"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">config.rangeDeletions</span></code></a> collection
after the range is deleted.</li>
<li>The <a class="reference internal" href="../reference/command/cleanupOrphaned.html#dbcmd.cleanupOrphaned" title="cleanupOrphaned"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">cleanupOrphaned</span></code></a> command no longer deletes orphaned
documents from a shard. Instead, <a class="reference internal" href="../reference/command/cleanupOrphaned.html#dbcmd.cleanupOrphaned" title="cleanupOrphaned"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">cleanupOrphaned</span></code></a> waits
for orphaned documents that are scheduled for deletion from a shard to
be deleted.</li>
</ul>
<p>Set the <a class="reference internal" href="../reference/parameters.html#param.disableResumableRangeDeleter" title="disableResumableRangeDeleter"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">disableResumableRangeDeleter</span></code></a> parameter to <code class="docutils literal"><span class="pre">true</span></code>
on a shard’s primary to pause range deletion on the shard.</p>
</div>
<div class="section" id="general-sharded-clusters-improvements">
<h3>General Sharded Clusters Improvements<a class="headerlink" href="#general-sharded-clusters-improvements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="index-consistency-checks">
<h4>Index Consistency Checks<a class="headerlink" href="#index-consistency-checks" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, the <a class="reference internal" href="../core/sharded-cluster-config-servers.html"><span class="doc">config server</span></a> primary, by default, checks for
index inconsistencies across the shards for sharded collections. The
command <a class="reference internal" href="../reference/command/serverStatus.html#dbcmd.serverStatus" title="serverStatus"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">serverStatus</span></code></a> returns the field
<a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.shardedIndexConsistency" title="shardedIndexConsistency"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">shardedIndexConsistency</span></code></a> to report on index
inconsistencies when run on the config server primary.</p>
<p>To configure the index consistency checks, MongoDB provides the
following parameters:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../reference/parameters.html#param.enableShardedIndexConsistencyCheck" title="enableShardedIndexConsistencyCheck"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">enableShardedIndexConsistencyCheck</span></code></a></td>
<td>Enable or disable the index consistency checks.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/parameters.html#param.shardedIndexConsistencyCheckIntervalMS" title="shardedIndexConsistencyCheckIntervalMS"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">shardedIndexConsistencyCheckIntervalMS</span></code></a></td>
<td>The interval at which the config server’s primary checks the
index consistency of sharded collections.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="concurrent-removeshard-operations">
<h4>Concurrent <code class="docutils literal"><span class="pre">removeShard</span></code> Operations<a class="headerlink" href="#concurrent-removeshard-operations" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, you can have more than one
<a class="reference internal" href="../reference/command/removeShard.html#dbcmd.removeShard" title="removeShard"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">removeShard</span></code></a> operation in progress.</p>
<p>In earlier versions, <a class="reference internal" href="../reference/command/removeShard.html#dbcmd.removeShard" title="removeShard"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">removeShard</span></code></a> returns an error if
another <a class="reference internal" href="../reference/command/removeShard.html#dbcmd.removeShard" title="removeShard"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">removeShard</span></code></a> operation is in progress.</p>
</div>
<div class="section" id="shard-key-limit">
<h4>Shard Key Limit<a class="headerlink" href="#shard-key-limit" title="Permalink to this headline">¶</a></h4>
<p>Starting in version 4.4, MongoDB removes the 512-byte limit on the
shard key size. For MongoDB 4.2 and earlier, a shard key cannot
exceed 512 bytes.</p>
</div>
<div class="section" id="partial-results">
<h4>Partial Results<a class="headerlink" href="#partial-results" title="Permalink to this headline">¶</a></h4>
<p>Starting in 4.4, if the <a class="reference internal" href="../reference/command/find.html#dbcmd.find" title="find"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">find</span></code></a> or subsequent
<a class="reference internal" href="../reference/command/getMore.html#dbcmd.getMore" title="getMore"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">getMore</span></code></a> commands return partial results due to the
unavailability of the queried shard(s), the output includes a
boolean flag <code class="docutils literal"><span class="pre">partialResultsReturned</span></code>.</p>
</div>
<div class="section" id="jumbo-chunk-migration">
<h4>Jumbo Chunk Migration<a class="headerlink" href="#jumbo-chunk-migration" title="Permalink to this headline">¶</a></h4>
<p>For chunks that are <a class="reference internal" href="../core/sharding-balancer-administration.html#migration-chunk-size-limit"><span class="std std-ref">too large to migrate</span></a>, starting in MongoDB 4.4:</p>
<ul class="simple">
<li>A new balancer setting <code class="docutils literal"><span class="pre">attemptToBalanceJumboChunks</span></code> allows the
balancer to migrate chunks too large to move as long as the chunks
are not labeled <a class="reference internal" href="../core/sharding-data-partitioning.html#jumbo-chunk"><span class="std std-ref">jumbo</span></a>. See
<a class="reference internal" href="../tutorial/manage-sharded-cluster-balancer.html#balance-chunks-that-exceed-size-limit"><span class="std std-ref">Balance Chunks that Exceed Size Limit</span></a> for details.</li>
<li>The <a class="reference internal" href="../reference/command/moveChunk.html#dbcmd.moveChunk" title="moveChunk"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">moveChunk</span></code></a> command can specify a new option
<a class="reference internal" href="../reference/command/moveChunk.html#movechunk-forcejumbo"><span class="std std-ref">forceJumbo</span></a> to allow for the
migration of chunks that are too large to move. The chunks may or
may not be labeled <a class="reference internal" href="../core/sharding-data-partitioning.html#jumbo-chunk"><span class="std std-ref">jumbo</span></a>.</li>
</ul>
</div>
<div class="section" id="improved-catalog-cache-refresh">
<h4>Improved Catalog Cache Refresh<a class="headerlink" href="#improved-catalog-cache-refresh" title="Permalink to this headline">¶</a></h4>
<p>Starting in 4.4, if there is a stale chunk, the catalog cache is only
refreshed when <a class="reference internal" href="../core/sharded-cluster-query-router.html#sharded-cluster-query-routing"><span class="std std-ref">routers</span></a> access
a shard that previously had or currently has that chunk.</p>
<p>Prior to MongoDB 4.4, any stale chunk caused the entire chunk distribution
for a collection to be marked as stale and forced all
<a class="reference internal" href="../core/sharded-cluster-query-router.html#sharded-cluster-query-routing"><span class="std std-ref">routers</span></a> who contact the shard
to refresh their shard catalog cache. MongoDB 4.4 adds the
<a class="reference internal" href="../reference/parameters.html#param.enableFinerGrainedCatalogCacheRefresh" title="enableFinerGrainedCatalogCacheRefresh"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">enableFinerGrainedCatalogCacheRefresh</span></code></a> startup parameter
for disabling catalog cache refresh for only a targeted shard and using
the older catalog cache refresh behavior. The
<a class="reference internal" href="../reference/parameters.html#param.enableFinerGrainedCatalogCacheRefresh" title="enableFinerGrainedCatalogCacheRefresh"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">enableFinerGrainedCatalogCacheRefresh</span></code></a> parameter defaults to
<code class="docutils literal"><span class="pre">true</span></code>.</p>
</div>
<div class="section" id="automatically-split-system-sessions-collection">
<h4>Automatically Split <code class="docutils literal"><span class="pre">system.sessions</span></code> Collection<a class="headerlink" href="#automatically-split-system-sessions-collection" title="Permalink to this headline">¶</a></h4>
<p>Starting in version 4.4 (and 4.2.7), MongoDB automatically splits the
<code class="docutils literal"><span class="pre">system.sessions</span></code> collection into at least 1024 chunks and
distributes the chunks uniformly across shards in the cluster.</p>
</div>
</div>
</div>
<div class="section" id="projection">
<span id="id22"></span><h2>Projection<a class="headerlink" href="#projection" title="Permalink to this headline">¶</a></h2>
<p>Starting in MongoDB 4.4, as part of making
<a class="reference internal" href="../reference/method/db.collection.find.html#db.collection.find" title="db.collection.find"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">find</span></code></a> and
<a class="reference internal" href="../reference/method/db.collection.findAndModify.html#db.collection.findAndModify" title="db.collection.findAndModify"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">findAndModify</span></code></a> projection consistent with
aggregation’s <a class="reference internal" href="../reference/operator/aggregation/project.html#pipe._S_project" title="$project"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$project</span></code></a> stage,</p>
<ul class="simple">
<li>The <a class="reference internal" href="../reference/method/db.collection.find.html#db.collection.find" title="db.collection.find"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">find</span></code></a> and
<a class="reference internal" href="../reference/method/db.collection.findAndModify.html#db.collection.findAndModify" title="db.collection.findAndModify"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">findAndModify</span></code></a> projection can accept
aggregation expressions and aggregation syntax, including the use of
literals and aggregation variables. With the use of aggregation
expressions and syntax, you can project new fields or project
existing fields with new values.</li>
<li>The <a class="reference internal" href="../reference/method/db.collection.find.html#db.collection.find" title="db.collection.find"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">find</span></code></a> and
<a class="reference internal" href="../reference/method/db.collection.findAndModify.html#db.collection.findAndModify" title="db.collection.findAndModify"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">findAndModify</span></code></a> projection can specify
embedded fields using the nested form; e.g. <code class="docutils literal"><span class="pre">{</span> <span class="pre">field:</span> <span class="pre">{</span> <span class="pre">nestedfield:</span>
<span class="pre">1</span> <span class="pre">}</span> <span class="pre">}</span></code> as well as <a class="reference internal" href="../core/document.html#document-dot-notation"><span class="std std-ref">dot notation</span></a>. In
earlier versions, you can only use the dot notation.</li>
</ul>
<p>For more information, see:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/method/db.collection.find.html#db.collection.find" title="db.collection.find()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.find()</span></code></a></li>
<li><a class="reference internal" href="../reference/method/db.collection.findOneAndDelete.html#db.collection.findOneAndDelete" title="db.collection.findOneAndDelete()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.findOneAndDelete()</span></code></a></li>
<li><a class="reference internal" href="../reference/method/db.collection.findOneAndReplace.html#db.collection.findOneAndReplace" title="db.collection.findOneAndReplace()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.findOneAndReplace()</span></code></a></li>
<li><a class="reference internal" href="../reference/method/db.collection.findOneAndUpdate.html#db.collection.findOneAndUpdate" title="db.collection.findOneAndUpdate()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.findOneAndUpdate()</span></code></a></li>
<li><a class="reference internal" href="../reference/method/db.collection.findAndModify.html#db.collection.findAndModify" title="db.collection.findAndModify()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.findAndModify()</span></code></a></li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="4.4-compatibility.html#compatibility-projection-restrictions"><span class="std std-ref">Path Collision Restrictions</span></a></p>
</div>
<div class="section" id="meta-operator">
<span id="rel-notes-agg-meta-keyword"></span><span id="rel-notes-projection-meta-keyword"></span><h3><code class="docutils literal"><span class="pre">$meta</span></code> Operator<a class="headerlink" href="#meta-operator" title="Permalink to this headline">¶</a></h3>
<div class="section" id="meta-keyword-support">
<h4><code class="docutils literal"><span class="pre">$meta</span></code> Keyword Support<a class="headerlink" href="#meta-keyword-support" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, the <a class="reference internal" href="../reference/operator/aggregation/meta.html#exp._S_meta" title="$meta"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$meta</span></code></a> operator adds support
for retrieving the <code class="docutils literal"><span class="pre">indexKey</span></code> metadata. The <code class="docutils literal"><span class="pre">indexKey</span></code> metadata is
for debugging purposes only and not for application logic. See
<a class="reference internal" href="../reference/operator/aggregation/meta.html#exp._S_meta" title="$meta"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">$meta</span></code></a> for more information.</p>
</div>
<div class="section" id="meta-textscore-usage-with-find">
<h4><code class="docutils literal"><span class="pre">{</span> <span class="pre">$meta:</span> <span class="pre">&quot;textScore&quot;</span> <span class="pre">}</span></code> Usage with <code class="docutils literal"><span class="pre">find()</span></code><a class="headerlink" href="#meta-textscore-usage-with-find" title="Permalink to this headline">¶</a></h4>
<p>Starting in version 4.4, MongoDB makes the following
<a class="reference internal" href="../reference/operator/aggregation/meta.html#exp._S_meta" title="$meta"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">{</span> <span class="pre">$meta:</span> <span class="pre">&quot;textScore&quot;</span> <span class="pre">}</span></code></a> changes when used with
<a class="reference internal" href="../reference/method/db.collection.find.html#db.collection.find" title="db.collection.find()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.find()</span></code></a>:</p>
<ul>
<li><p class="first">You must specify the <a class="reference internal" href="../reference/operator/query/text.html#op._S_text" title="$text"><code class="xref mongodb mongodb-query docutils literal"><span class="pre">$text</span></code></a> operator in the query
predicate to use <a class="reference internal" href="../reference/operator/aggregation/meta.html#exp._S_meta" title="$meta"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">{</span> <span class="pre">$meta:</span> <span class="pre">&quot;textScore&quot;</span> <span class="pre">}</span></code></a>.</p>
</li>
<li><p class="first">You can sort the resulting documents by their search relevance,
i.e. <a class="reference internal" href="../reference/operator/aggregation/meta.html#exp._S_meta" title="$meta"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">{</span> <span class="pre">$meta:</span> <span class="pre">&quot;textScore&quot;</span> <span class="pre">}</span></code></a>, without also
having to project the <code class="docutils literal"><span class="pre">textScore</span></code>.</p>
<div class="line-block">
<div class="line">In earlier versions, to include <a class="reference internal" href="../reference/operator/aggregation/meta.html#exp._S_meta" title="$meta"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">{</span> <span class="pre">$meta:</span> <span class="pre">&quot;textScore&quot;</span>
<span class="pre">}</span></code></a> expression in the <a class="reference internal" href="../reference/method/cursor.sort.html#cursor.sort" title="cursor.sort()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sort()</span></code></a>, you must
also include the same expression in the projection.</div>
<div class="line"><br /></div>
</div>
</li>
<li><p class="first">If you include the <a class="reference internal" href="../reference/operator/aggregation/meta.html#exp._S_meta" title="$meta"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">{</span> <span class="pre">$meta:</span> <span class="pre">&quot;textScore&quot;</span> <span class="pre">}</span></code></a>
expression in both the projection and sort, i.e.
<code class="docutils literal"><span class="pre">db.collection.find(&lt;$text</span> <span class="pre">search&gt;,</span> <span class="pre">&lt;projection&gt;).sort(&lt;sort&gt;)</span></code>,
the projection and sort documents can have different field names
for the expression.</p>
<div class="line-block">
<div class="line">In previous versions of MongoDB, if you include the <a class="reference internal" href="../reference/operator/aggregation/meta.html#exp._S_meta" title="$meta"><code class="xref mongodb mongodb-expression docutils literal"><span class="pre">{</span>
<span class="pre">$meta:</span> <span class="pre">&quot;textScore&quot;</span> <span class="pre">}</span></code></a> in both the projection and sort, you
must specify the same field name in both places.</div>
</div>
</li>
</ul>
<p>For more information, see <a class="reference internal" href="../reference/operator/aggregation/meta.html#project-meta-textscore-sort"><span class="std std-ref">Text Score Metadata $meta: &quot;textScore&quot;</span></a>. For
examples of <code class="docutils literal"><span class="pre">&quot;textScore&quot;</span></code> projections and sorts, see
<a class="reference internal" href="../reference/operator/query/text.html#ex-text-search-score"><span class="std std-ref">Text Search Score Examples</span></a>.</p>
<p>See: <a class="reference internal" href="4.4-compatibility.html#compatibility-meta-textscore"><span class="std std-ref">Text Search Metadata { $meta: “textScore” } Query Requirement</span></a></p>
</div>
</div>
</div>
<div class="section" id="transactions">
<h2>Transactions<a class="headerlink" href="#transactions" title="Permalink to this headline">¶</a></h2>
<p>Starting in MongoDB 4.4 with <a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#view-fcv"><span class="std std-ref">feature compatibility version
(fcv)</span></a> <code class="docutils literal"><span class="pre">&quot;4.4&quot;</span></code>, you can create collections and indexes
inside a <a class="reference internal" href="../core/transactions.html"><span class="doc">multi-document transaction</span></a>
unless the transaction is a cross-shard write transaction.</p>
<p>When creating a collection inside a transaction:</p>
<ul class="simple">
<li>You can <a class="reference internal" href="../core/transactions-operations.html#transactions-operations-ddl-implicit"><span class="std std-ref">implicitly create a collection</span></a>, such as with:<ul>
<li>an insert operation against a non-existing collection;</li>
<li>an update/findAndModify operation with <code class="docutils literal"><span class="pre">upsert:</span> <span class="pre">true</span></code> against
a non-existing collection.</li>
</ul>
</li>
<li>You can explicitly create a collection using the
<a class="reference internal" href="../reference/command/create.html#dbcmd.create" title="create"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">create</span></code></a> command or its helper
<a class="reference internal" href="../reference/method/db.createCollection.html#db.createCollection" title="db.createCollection()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.createCollection()</span></code></a>.</li>
<li>The <a class="reference internal" href="../reference/method/db.createCollection.html#db.createCollection" title="db.createCollection()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.createCollection()</span></code></a> method fails if
executed against a
<a class="reference internal" href="../reference/system-collections.html"><span class="doc">system collection</span></a>.</li>
</ul>
<p>When <a class="reference internal" href="../core/transactions-operations.html#transactions-operations-ddl-explicit"><span class="std std-ref">creating an index</span></a>
inside a transaction:</p>
<ul class="simple">
<li>You can create an index on a non-existing collection. The
collection is created as part of the operation.</li>
<li>You can create an index on a new empty collection created earlier
in the same transaction.</li>
<li>The <a class="reference internal" href="../reference/method/db.collection.createIndex.html#db.collection.createIndex" title="db.collection.createIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.createIndex()</span></code></a> method
fails if executed against a
<a class="reference internal" href="../reference/system-collections.html"><span class="doc">system collection</span></a>.</li>
</ul>
<p>For more details, see <a class="reference internal" href="../core/transactions.html#transactions-create-collections-indexes"><span class="std std-ref">Create Collections and Indexes In a Transaction</span></a>.</p>
<p>MongoDB 4.4 adds a new parameter
<a class="reference internal" href="../reference/parameters.html#param.shouldMultiDocTxnCreateCollectionAndIndexes" title="shouldMultiDocTxnCreateCollectionAndIndexes"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">shouldMultiDocTxnCreateCollectionAndIndexes</span></code></a> which can
enable (default) or disable collection and index creation inside a
transaction. When setting the parameter for a sharded cluster, set
the parameter on all shards.</p>
<p>For explicit creation of a collection or an index inside a
transaction, the transaction read concern level must be
<a class="reference internal" href="../reference/read-concern-local.html#readconcern.&quot;local&quot;" title="&quot;local&quot;"><code class="xref mongodb mongodb-readconcern docutils literal"><span class="pre">&quot;local&quot;</span></code></a>. Explicit creation is through:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Method</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../reference/command/create.html#dbcmd.create" title="create"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">create</span></code></a></td>
<td><a class="reference internal" href="../reference/method/db.createCollection.html#db.createCollection" title="db.createCollection()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.createCollection()</span></code></a></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/command/createIndexes.html#dbcmd.createIndexes" title="createIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">createIndexes</span></code></a></td>
<td><div class="first last line-block">
<div class="line"><a class="reference internal" href="../reference/method/db.collection.createIndex.html#db.collection.createIndex" title="db.collection.createIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.createIndex()</span></code></a></div>
<div class="line"><a class="reference internal" href="../reference/method/db.collection.createIndexes.html#db.collection.createIndexes" title="db.collection.createIndexes()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.createIndexes()</span></code></a></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="../core/transactions.html"><span class="doc">Transactions</span></a></li>
<li><a class="reference internal" href="../core/transactions-operations.html#transactions-operations-ref"><span class="std std-ref">Transactions and Operations</span></a></li>
</ul>
</div>
</div>
<div class="section" id="sorting">
<h2>Sorting<a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sort-changes">
<h3><code class="docutils literal"><span class="pre">$sort</span></code> Changes<a class="headerlink" href="#sort-changes" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the <a class="reference internal" href="../reference/method/cursor.sort.html#cursor.sort" title="cursor.sort()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sort()</span></code></a> method now uses
the same sort algorithm as the <a class="reference internal" href="../reference/operator/aggregation/sort.html#pipe._S_sort" title="$sort"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$sort</span></code></a> aggregation stage. With
this change, queries which perform a <a class="reference internal" href="../reference/method/cursor.sort.html#cursor.sort" title="cursor.sort()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sort()</span></code></a> on
fields that contain duplicate values are much more likely to result in
inconsistent sort orders for those values.</p>
<p>To guarantee sort consistency when using <a class="reference internal" href="../reference/method/cursor.sort.html#cursor.sort" title="cursor.sort()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">sort()</span></code></a> on
duplicate values, include an additional field in your sort that contains
exclusively unique values.</p>
<p>This can be accomplished easily by adding the <code class="docutils literal"><span class="pre">_id</span></code> field to your
sort.</p>
<p>See <a class="reference internal" href="../reference/method/cursor.sort.html#sort-cursor-consistent-sorting"><span class="std std-ref">Sort Consistency</span></a> for more information.</p>
</div>
</div>
<div class="section" id="security-improvements">
<h2>Security Improvements<a class="headerlink" href="#security-improvements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-kerberos-validation-tool-mongokerberos">
<h3>New Kerberos Validation Tool <code class="docutils literal"><span class="pre">mongokerberos</span></code><a class="headerlink" href="#new-kerberos-validation-tool-mongokerberos" title="Permalink to this headline">¶</a></h3>
<p>MongoDB Enterprise 4.4 provides a new <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongokerberos</span></code>
tool for validating your platform’s Kerberos configuration for use with
MongoDB, and for testing end-to-end client authentication through
Kerberos. When run, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongokerberos</span></code> returns a report
indicating any issues encountered, and provides potential advice for
resolving them. <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongokerberos</span></code> is available in MongoDB
Enterprise only.</p>
</div>
<div class="section" id="ocsp">
<h3>OCSP<a class="headerlink" href="#ocsp" title="Permalink to this headline">¶</a></h3>
<p>Starting in version 4.4, MongoDB enables, by default, the use of OCSP
(Online Certificate Status Protocol) to check for certificate
revocation. The use of OCSP eliminates the need to periodically
download a <a class="reference internal" href="../reference/configuration-options.html#net.tls.CRLFile" title="net.tls.CRLFile"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">Certificate</span> <span class="pre">Revocation</span> <span class="pre">List</span> <span class="pre">(CRL)</span></code></a> and restart the
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>/<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> with the updated CRL.</p>
<p>In versions 4.0 and 4.2, the use of OCSP is available only through the
use of <a class="reference internal" href="../reference/configuration-options.html#net.tls.certificateSelector" title="net.tls.certificateSelector"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">system</span> <span class="pre">certificate</span> <span class="pre">store</span></code></a> on Windows or macOS.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../core/security-transport-encryption.html"><span class="doc">TLS/SSL (Transport Encryption)</span></a></p>
</div>
<div class="section" id="ocsp-stapling-must-staple">
<h4>OCSP Stapling/Must Staple<a class="headerlink" href="#ocsp-stapling-must-staple" title="Permalink to this headline">¶</a></h4>
<p>As part of its OCSP support, MongoDB 4.4 supports the following on
Linux:</p>
<ul class="simple">
<li><a class="reference external" href="https://tools.ietf.org/html/rfc6961">OCSP stapling</a>. With OCSP
stapling, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> and <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instances
attach or “staple” the OCSP status response to their certificates
when providing these certificates to clients during the TLS/SSL
handshake. By including the OCSP status response with the
certificates, OCSP stapling obviates the need for clients to make a
separate request to retrieve the OCSP status of the provided
certificates.</li>
<li><a class="reference external" href="https://tools.ietf.org/html/rfc7633">OCSP must-staple extension</a>.
OCSP must-staple is an extension that can be added to the server
certificate that tells the client to expect an OCSP staple when it
receives a certificate during the TLS/SSL handshake.</li>
</ul>
</div>
<div class="section" id="ocsp-parameters">
<h4>OCSP Parameters<a class="headerlink" href="#ocsp-parameters" title="Permalink to this headline">¶</a></h4>
<p>MongoDB 4.4 adds the following OCSP parameters. You can set these
parameters at startup using the <a class="reference internal" href="../reference/privilege-actions.html#setParameter" title="setParameter"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">setParameter</span></code></a> configuration
file setting or the <a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-setparameter"><code class="xref std std-option docutils literal"><span class="pre">--setParameter</span></code></a>
command line option:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../reference/parameters.html#param.ocspEnabled" title="ocspEnabled"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">ocspEnabled</span></code></a></td>
<td>Enables or disables the OCSP support.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/parameters.html#param.ocspValidationRefreshPeriodSecs" title="ocspValidationRefreshPeriodSecs"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">ocspValidationRefreshPeriodSecs</span></code></a></td>
<td>Specifies the number of seconds to wait before refreshing the
stapled OCSP status response.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../reference/parameters.html#param.tlsOCSPStaplingTimeoutSecs" title="tlsOCSPStaplingTimeoutSecs"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">tlsOCSPStaplingTimeoutSecs</span></code></a></td>
<td>Specifies the maximum number of seconds the
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>/<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instance should
wait to receive the OCSP status response for its certificates.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/parameters.html#param.tlsOCSPVerifyTimeoutSecs" title="tlsOCSPVerifyTimeoutSecs"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">tlsOCSPVerifyTimeoutSecs</span></code></a></td>
<td>Specifies the maximum number of seconds that the
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>/<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> should wait for
the OCSP response when verifying client certificates.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="x-509-certificates-nearing-expiry-trigger-warnings">
<span id="rel-notes-certificate-expiration-warning"></span><h3>x.509 Certificates Nearing Expiry Trigger Warnings<a class="headerlink" href="#x-509-certificates-nearing-expiry-trigger-warnings" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>/<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>
logs a warning on connection if the presented x.509 certificate
expires within <code class="docutils literal"><span class="pre">30</span></code> days of the <code class="docutils literal"><span class="pre">mongod/mongos</span></code> system clock.
Specifically, the following connections to a <code class="docutils literal"><span class="pre">mongod</span></code> or <code class="docutils literal"><span class="pre">mongos</span></code>
can trigger x.509 certificate expiry warnings:</p>
<ul class="simple">
<li>A <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell or an application using a
<a href="#id23"><span class="problematic" id="id24">:driver:`MongoDB driver &lt;/&gt;`</span></a> establishing a
<a class="reference internal" href="../tutorial/configure-ssl-clients.html#ssl-clients"><span class="std std-ref">TLS connection</span></a> <em>or</em> performing
<a class="reference internal" href="../tutorial/configure-x509-client-authentication.html#x509-client-authentication"><span class="std std-ref">x.509 client authentication</span></a> with
a certificate expiring in less than 30 days. (i.e.
the certificate specified to <a class="reference internal" href="../reference/program/mongo.html#cmdoption-mongo-tlscertificatekeyfile"><code class="xref std std-option docutils literal"><span class="pre">mongo</span> <span class="pre">--tlsCertificateKeyFile</span></code></a> or
<a class="reference internal" href="../reference/connection-string.html#urioption.tlsCertificateKeyFile" title="tlsCertificateKeyFile"><code class="xref mongodb mongodb-urioption docutils literal"><span class="pre">tlsCertificateKeyFile</span></code></a>).</li>
<li>A <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> cluster member performing
<a class="reference internal" href="../tutorial/configure-x509-member-authentication.html#x509-internal-authentication"><span class="std std-ref">x.509 membership authentication</span></a>
with a certificate expiring in less than 30 days. (i.e. the
certificate specified to
<a class="reference internal" href="../reference/configuration-options.html#net.tls.clusterFile" title="net.tls.clusterFile"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">net.tls.clusterFile</span></code></a>,
<a class="reference internal" href="../reference/configuration-options.html#net.tls.clusterCertificateSelector" title="net.tls.clusterCertificateSelector"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">net.tls.clusterCertificateSelector</span></code></a>,
<a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-tlsclusterfile"><code class="xref std std-option docutils literal"><span class="pre">mongod</span> <span class="pre">--tlsClusterFile</span></code></a> or
<a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-tlsclustercertificateselector"><code class="xref std std-option docutils literal"><span class="pre">mongod</span> <span class="pre">--tlsClusterCertificateSelector</span></code></a>).</li>
<li>A <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> cluster member performing
<a class="reference internal" href="../tutorial/configure-x509-member-authentication.html#x509-internal-authentication"><span class="std std-ref">x.509 membership authentication</span></a>
with a certificate expiring within 30 days. (i.e. the certificate
specified to
(i.e. the
certificate specified to
<a class="reference internal" href="../reference/configuration-options.html#net.tls.clusterFile" title="net.tls.clusterFile"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">net.tls.clusterFile</span></code></a>,
<a class="reference internal" href="../reference/configuration-options.html#net.tls.clusterCertificateSelector" title="net.tls.clusterCertificateSelector"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">net.tls.clusterCertificateSelector</span></code></a>,
<a class="reference internal" href="../reference/program/mongos.html#cmdoption-mongos-tlsclusterfile"><code class="xref std std-option docutils literal"><span class="pre">mongos</span> <span class="pre">--tlsClusterFile</span></code></a> or
<a class="reference internal" href="../reference/program/mongos.html#cmdoption-mongos-tlsclustercertificateselector"><code class="xref std std-option docutils literal"><span class="pre">mongos</span> <span class="pre">--tlsClusterCertificateSelector</span></code></a>).</li>
</ul>
<p>The warning log message resembles the following:</p>
<div class="button-code-block">
<div class="button-row">
</div>
<div class="highlight-text"><div class="highlight"><pre><span></span>&lt;Timestamp&gt; W NETWORK [connection] Peer certificate &lt;Certificate Subject Name&gt; expires...
</pre></div>
</div>
</div>
<p>Consider proactively renewing client x.509 certificates nearing
expiration to ensure continued connectivity to the cluster.</p>
<p>MongoDB 4.4 adds the <a class="reference internal" href="../reference/parameters.html#param.tlsX509ExpirationWarningThresholdDays" title="tlsX509ExpirationWarningThresholdDays"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">tlsX509ExpirationWarningThresholdDays</span></code></a>
parameter for controlling certificate expiration warning threshold. Set
the parameter to <code class="docutils literal"><span class="pre">0</span></code> to disable the warning. For complete
documentation, see <a class="reference internal" href="../reference/parameters.html#param.tlsX509ExpirationWarningThresholdDays" title="tlsX509ExpirationWarningThresholdDays"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">tlsX509ExpirationWarningThresholdDays</span></code></a>.</p>
</div>
<div class="section" id="tls-1-3-support">
<h3>TLS 1.3 Support<a class="headerlink" href="#tls-1-3-support" title="Permalink to this headline">¶</a></h3>
<p>On CentOS 8 and RHEL 8, MongoDB 4.4 (as well as versions 4.2, 4.0, and
3.6) support TLS1.3.</p>
</div>
<div class="section" id="user-to-dn-mapping-exits-on-network-or-authentication-failures">
<h3>User to DN Mapping Exits on Network or Authentication Failures<a class="headerlink" href="#user-to-dn-mapping-exits-on-network-or-authentication-failures" title="Permalink to this headline">¶</a></h3>
<p>A <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>, or
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongoldap</span></code> returns an error if one of the user to
Distinguished Name (DN) mappings cannot be evaluated due
to networking or authentication failures to the LDAP server.</p>
<p>The <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>, or
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongoldap</span></code> rejects the connection request and does not
check the remaining mappings, if any.</p>
<p>To specify the user to DN mapping, see:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/configuration-options.html#security.ldap.userToDNMapping" title="security.ldap.userToDNMapping"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">security.ldap.userToDNMapping</span></code></a></li>
<li><a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-ldapusertodnmapping"><code class="xref std std-option docutils literal"><span class="pre">mongod</span> <span class="pre">--ldapUserToDNMapping</span></code></a></li>
<li><a class="reference internal" href="../reference/program/mongos.html#cmdoption-mongos-ldapusertodnmapping"><code class="xref std std-option docutils literal"><span class="pre">mongos</span> <span class="pre">--ldapUserToDNMapping</span></code></a></li>
<li><a class="reference internal" href="../reference/program/mongoldap.html#cmdoption-mongoldap-ldapusertodnmapping"><code class="xref std std-option docutils literal"><span class="pre">mongoldap</span> <span class="pre">--ldapUserToDNMapping</span></code></a></li>
</ul>
</div>
</div>
<div class="section" id="structured-logging">
<h2>Structured Logging<a class="headerlink" href="#structured-logging" title="Permalink to this headline">¶</a></h2>
<p>Starting in MongoDB 4.4, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> / <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>
instances now output all log messages in <a class="reference internal" href="../reference/log-messages.html#log-message-json-output-format"><span class="std std-ref">structured JSON format</span></a>. Log entries are written as a series
of key-value pairs, where each key indicates a log message field type,
such as “severity”, and each corresponding value records the associated
logging information for that field type, such as “informational”.</p>
<p>This includes log output sent to the <em>file</em>, <em>syslog</em>, and <em>stdout</em>
(standard out) <a class="reference internal" href="../reference/log-messages.html#log-message-destinations"><span class="std std-ref">log destinations</span></a>, as
well as the output of the <a class="reference internal" href="../reference/command/getLog.html#dbcmd.getLog" title="getLog"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">getLog</span></code></a> command.</p>
<p>Previously, log entries were output as plaintext.</p>
<p>The following log messages in JSON format indicate that a
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> is listening and ready for connections:</p>
<div class="button-code-block">
<div class="button-row">
</div>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;$date&quot;</span><span class="o">:</span><span class="s2">&quot;2020-05-18T20:18:13.533+00:00&quot;</span><span class="p">},</span><span class="s2">&quot;s&quot;</span><span class="o">:</span><span class="s2">&quot;I&quot;</span><span class="p">,</span>  <span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="s2">&quot;NETWORK&quot;</span><span class="p">,</span>  <span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="mi">23015</span><span class="p">,</span>   <span class="s2">&quot;ctx&quot;</span><span class="o">:</span><span class="s2">&quot;listener&quot;</span><span class="p">,</span><span class="s2">&quot;msg&quot;</span><span class="o">:</span><span class="s2">&quot;Listening on&quot;</span><span class="p">,</span><span class="s2">&quot;attr&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;address&quot;</span><span class="o">:</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;$date&quot;</span><span class="o">:</span><span class="s2">&quot;2020-05-18T20:18:13.533+00:00&quot;</span><span class="p">},</span><span class="s2">&quot;s&quot;</span><span class="o">:</span><span class="s2">&quot;I&quot;</span><span class="p">,</span>  <span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="s2">&quot;NETWORK&quot;</span><span class="p">,</span>  <span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="mi">23016</span><span class="p">,</span>   <span class="s2">&quot;ctx&quot;</span><span class="o">:</span><span class="s2">&quot;listener&quot;</span><span class="p">,</span><span class="s2">&quot;msg&quot;</span><span class="o">:</span><span class="s2">&quot;Waiting for connections&quot;</span><span class="p">,</span><span class="s2">&quot;attr&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;port&quot;</span><span class="o">:</span><span class="mi">27001</span><span class="p">,</span><span class="s2">&quot;ssl&quot;</span><span class="o">:</span><span class="s2">&quot;off&quot;</span><span class="p">}}</span>
</pre></div>
</div>
</div>
<p>Structured logging with key-value pairs allows for efficient log
analysis by automated tools or log ingestion services, and makes
programmatic <a class="reference internal" href="../reference/log-messages.html#log-message-parsing"><span class="std std-ref">log parsing</span></a> easier and more
powerful.</p>
<p>When working with MongoDB structured logging, the third-party
<a class="reference external" href="https://stedolan.github.io/jq/">jq command-line utility</a> is a useful
tool that allows for easy pretty-printing of log entries, and powerful
key-based matching and filtering.</p>
<p><code class="docutils literal"><span class="pre">jq</span></code> is an open-source JSON parser, and is available for
Linux, Windows, and macOS.</p>
<p>For more information on structured logging, including a detailed
examination of log entry components as well as command-line parsing
examples, see <a class="reference internal" href="../reference/log-messages.html"><span class="doc">Log Messages</span></a>.</p>
<div class="section" id="multiple-ldap-password-support">
<h3>Multiple LDAP Password Support<a class="headerlink" href="#multiple-ldap-password-support" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the <code class="docutils literal"><span class="pre">ldapQueryPassword</span></code>
<a class="reference internal" href="../reference/command/setParameter.html#dbcmd.setParameter" title="setParameter"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">setParameter</span></code></a> command accepts either a string or
an array of strings. If set to an array, each password is tried
until one succeeds. This can be used to perform a rollover of the
LDAP account password without downtime for MongoDB.</p>
</div>
</div>
<div class="section" id="platform-support">
<h2>Platform Support<a class="headerlink" href="#platform-support" title="Permalink to this headline">¶</a></h2>
<div class="section" id="added-platforms">
<h3>Added Platforms<a class="headerlink" href="#added-platforms" title="Permalink to this headline">¶</a></h3>
<p>MongoDB 4.4 adds support for the following platforms:</p>
<ul class="simple">
<li><strong>RHEL 8 / CentOS 8 / Oracle 8</strong> on the
<a class="reference internal" href="../administration/production-notes.html#prod-notes-supported-platforms-ppc64le"><span class="std std-ref">PPC64LE</span></a> and
<a class="reference internal" href="../administration/production-notes.html#prod-notes-supported-platforms-s390x"><span class="std std-ref">s390x</span></a> architectures</li>
<li><strong>SLES 15</strong> on the <a class="reference internal" href="../administration/production-notes.html#prod-notes-supported-platforms-s390x"><span class="std std-ref">s390x</span></a>
architecture</li>
<li><strong>Ubuntu 20.04</strong> on the
<a class="reference internal" href="../administration/production-notes.html#prod-notes-supported-platforms-x86-64"><span class="std std-ref">x86_64</span></a>,
<a class="reference internal" href="../administration/production-notes.html#prod-notes-supported-platforms-ppc64le"><span class="std std-ref">PPC64LE</span></a>,
<a class="reference internal" href="../administration/production-notes.html#prod-notes-supported-platforms-arm64"><span class="std std-ref">ARM64</span></a>, and
<a class="reference internal" href="../administration/production-notes.html#prod-notes-supported-platforms-s390x"><span class="std std-ref">s390x</span></a> architectures</li>
</ul>
</div>
<div class="section" id="removed-platforms">
<h3>Removed Platforms<a class="headerlink" href="#removed-platforms" title="Permalink to this headline">¶</a></h3>
<p>MongoDB 4.4 removes support for the following platforms:</p>
<ul class="simple">
<li><strong>Amazon Linux 2013.03</strong></li>
<li><strong>RHEL 6 / CentOS 6 / Oracle 6</strong> on the
<a class="reference internal" href="../administration/production-notes.html#prod-notes-supported-platforms-s390x"><span class="std std-ref">s390x</span></a> architecture</li>
<li><strong>Windows 7 / Server 2008 R2</strong></li>
<li><strong>Windows 8 / Server 2012</strong></li>
<li><strong>Windows 8.1 / Server 2012 R2</strong></li>
<li><strong>macOS 10.12</strong></li>
</ul>
<p>See <span class="xref std std-ref">prod-notes-supported-platforms</span> for the full list of platforms
and architectures supported in MongoDB 4.4.</p>
</div>
</div>
<div class="section" id="mongo-shell">
<h2>Mongo Shell<a class="headerlink" href="#mongo-shell" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mongo-shell-supports-aws-iam-credentials-for-atlas-clusters">
<h3>Mongo Shell Supports AWS IAM Credentials for Atlas Clusters<a class="headerlink" href="#mongo-shell-supports-aws-iam-credentials-for-atlas-clusters" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell supports
using <a class="reference external" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html">AWS IAM credentials</a>
to authenticate to a <a class="reference external" href="https://www.mongodb.com/cloud/atlas?tck=docs_server">MongoDB Atlas</a> cluster that
has been configured for AWS IAM authentication.</p>
<p>Authenticating in this manner uses the new <code class="docutils literal"><span class="pre">MONGODB-AWS</span></code>
<a class="reference internal" href="../reference/connection-string.html#urioption.authMechanism" title="authMechanism"><code class="xref mongodb mongodb-urioption docutils literal"><span class="pre">authentication</span> <span class="pre">mechanism</span></code></a>, and requires that
you provide an AWS access key ID and a secret
access key, which may be specified in the <a class="reference internal" href="../reference/connection-string.html#connection-string-auth-options"><span class="std std-ref">connection string</span></a> or on the command-line via the
<a class="reference internal" href="../reference/program/mongo.html#cmdoption-mongo-username"><code class="xref std std-option docutils literal"><span class="pre">--username</span></code></a> and <a class="reference internal" href="../reference/program/mongo.html#cmdoption-mongo-password"><code class="xref std std-option docutils literal"><span class="pre">--password</span></code></a> options.</p>
<p>Additionally, if you are using an <a class="reference external" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_use-resources.html">AWS session token</a>
for authentication with temporary credentials when using an <a class="reference external" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html">AssumeRole</a>
request, or when working with AWS resources that specify this value such
as Lambda, you may provide that session token in the connection string
using the  <code class="docutils literal"><span class="pre">AWS_SESSION_TOKEN</span></code> <a class="reference internal" href="../reference/connection-string.html#urioption.authMechanismProperties" title="authMechanismProperties"><code class="xref mongodb mongodb-urioption docutils literal"><span class="pre">authMechanismProperties</span></code></a>
value, or on the command-line via the <a class="reference internal" href="../reference/program/mongo.html#cmdoption-mongo-awsiamsessiontoken"><code class="xref std std-option docutils literal"><span class="pre">--awsIamSessionToken</span></code></a> option.</p>
<p>Alternatively, if the AWS access key ID, secret access key, or
session token are defined on your platform using their respective
<a class="reference external" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html#envvars-list">AWS IAM environment variables</a>
the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell will use these environment
variable values to authenticate; you do not need to specify them in the
connection string.</p>
<p>See <a class="reference internal" href="../reference/connection-string.html#connection-string-auth-options"><span class="std std-ref">Connection String Authentication Options</span></a>
for usage, and <a class="reference internal" href="../reference/connection-string.html#connections-string-example-mongodb-aws"><span class="std std-ref">Connecting to an Atlas Cluster using MONGODB-AWS</span></a> for examples.</p>
</div>
</div>
<div class="section" id="tools">
<h2>Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="migration-to-mongodb-database-tools-project">
<h3>Migration to MongoDB Database Tools Project<a class="headerlink" href="#migration-to-mongodb-database-tools-project" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the documentation for the following
tools have been migrated to the <a href="#id25"><span class="problematic" id="id26">:dbtools:`MongoDB Database Tools project &lt;/&gt;`</span></a>:</p>
<ul class="simple">
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongoimport</span></code></li>
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongoexport</span></code></li>
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongodump</span></code></li>
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongorestore</span></code></li>
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongotop</span></code></li>
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongostat</span></code></li>
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongofiles</span></code></li>
<li><code class="xref mongodb mongodb-binary docutils literal"><span class="pre">bsondump</span></code></li>
</ul>
<p>The MongoDB Database Tools use the Apache License, Version 2.0. See
<a class="reference external" href="https://github.com/mongodb/mongo-tools/">mongodb/mongo-tools</a> for
the source code.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>For documentation on previous versions of the listed tools, reference
that version of the MongoDB server manual.</p>
<p><em>Quick links to older documentation:</em></p>
<ul class="last simple">
<li><a class="reference external" href="https://docs.mongodb.com/v4.2/reference/program/">MongoDB 4.2 Tools</a></li>
<li><a class="reference external" href="https://docs.mongodb.com/v4.0/reference/program/">MongoDB 4.0 Tools</a></li>
<li><a class="reference external" href="https://docs.mongodb.com/v3.6/reference/program/">MongoDB 3.6 Tools</a></li>
</ul>
</div>
</div>
<div class="section" id="new-mongokerberos-kerberos-validation-tool">
<h3>New <code class="docutils literal"><span class="pre">mongokerberos</span></code> Kerberos Validation Tool<a class="headerlink" href="#new-mongokerberos-kerberos-validation-tool" title="Permalink to this headline">¶</a></h3>
<p>MongoDB Enterprise 4.4 provides a new <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongokerberos</span></code>
tool for validating your platform’s Kerberos configuration for use with
MongoDB, and for testing end-to-end client authentication through
Kerberos. When run, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongokerberos</span></code> returns a report
indicating any issues encountered, and provides potential advice for
resolving them. <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongokerberos</span></code> is available in MongoDB
Enterprise only.</p>
<p>See the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongokerberos</span></code> reference page for more
information.</p>
</div>
<div class="section" id="mongoreplay-removed-from-mongodb-packaging">
<h3><code class="docutils literal"><span class="pre">mongoreplay</span></code> Removed from MongoDB Packaging<a class="headerlink" href="#mongoreplay-removed-from-mongodb-packaging" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, <code class="docutils literal"><span class="pre">mongoreplay</span></code> is removed from MongoDB
packaging. <code class="docutils literal"><span class="pre">mongoreplay</span></code> and its related documentation are migrated to
the <a class="reference external" href="https://github.com/mongodb-labs/mongoreplay">mongodb-labs</a>
github project. Projects in <code class="docutils literal"><span class="pre">mongodb-labs</span></code> are experimental and not
officially supported by MongoDB.</p>
<p><em>Quick links to older documentation</em></p>
<ul class="simple">
<li><a class="reference external" href="https://docs.mongodb.com/v4.2/reference/program/mongoreplay">mongoreplay 4.2</a></li>
<li><a class="reference external" href="https://docs.mongodb.com/v4.0/reference/program/mongoreplay">mongoreplay 4.0</a></li>
<li><a class="reference external" href="https://docs.mongodb.com/v3.6/reference/program/mongoreplay">mongoreplay 3.6</a></li>
</ul>
</div>
<div class="section" id="mongodb-database-tools-not-packaged-with-windows-msi">
<h3>MongoDB Database Tools Not Packaged with Windows MSI<a class="headerlink" href="#mongodb-database-tools-not-packaged-with-windows-msi" title="Permalink to this headline">¶</a></h3>
<p>Starting in version 4.4, the
<a class="reference internal" href="../tutorial/install-mongodb-enterprise-on-windows.html"><span class="doc">Windows MSI installer</span></a> for both
Community and Enterprise editions does not
include the <a href="#id27"><span class="problematic" id="id28">:dbtools:`MongoDB Database Tools &lt;&gt;`</span></a> (<code class="docutils literal"><span class="pre">mongoimport</span></code>,
<code class="docutils literal"><span class="pre">mongoexport</span></code>, etc). To download and install
the MongoDB Database Tools on Windows, see
<a href="#id29"><span class="problematic" id="id30">:dbtools:`Installing the MongoDB Database Tools &lt;/installation/installation&gt;`</span></a>.</p>
<p>If you were relying on the MongoDB 4.2 or previous MSI installer to
install the Database Tools along with the MongoDB Server, you must
now download the Database Tools separately.</p>
</div>
</div>
<div class="section" id="drivers">
<h2>Drivers<a class="headerlink" href="#drivers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-drivers">
<h3>New Drivers<a class="headerlink" href="#new-drivers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The official <a href="#id31"><span class="problematic" id="id32">:driver:`MongoDB Rust driver &lt;/rust&gt;`</span></a> is now available.</li>
<li>The official <a href="#id33"><span class="problematic" id="id34">:driver:`MongoDB Swift driver &lt;/swift&gt;`</span></a> is now available.</li>
</ul>
</div>
</div>
<div class="section" id="indexes">
<span id="removed-commands"></span><h2>Indexes<a class="headerlink" href="#indexes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="compound-hashed-indexes">
<span id="rel-notes-compound-hashed-index"></span><h3>Compound Hashed Indexes<a class="headerlink" href="#compound-hashed-indexes" title="Permalink to this headline">¶</a></h3>
<p>MongoDB 4.4 adds support for creating compound indexes with a single
<a class="reference internal" href="../core/index-hashed.html#index-type-hashed"><span class="std std-ref">hashed field</span></a>. MongoDB 4.2 and earlier
only supported single field hashed indexes.</p>
<p>The following operation creates a compound hashed index on <code class="docutils literal"><span class="pre">country</span></code>
and <code class="docutils literal"><span class="pre">_id</span></code>:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">examples</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&quot;country&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;hashed&quot;</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>Compound hashed indexes require <a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#view-fcv"><span class="std std-ref">featureCompatibilityVersion</span></a> set to <code class="docutils literal"><span class="pre">4.4</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#rel-notes-sharding-compound-hashed"><span class="std std-ref">Compound Hashed Shard Keys</span></a></p>
</div>
</div>
<div class="section" id="hidden-indexes">
<h3>Hidden Indexes<a class="headerlink" href="#hidden-indexes" title="Permalink to this headline">¶</a></h3>
<p>Starting in version 4.4, MongoDB adds the ability to hide or unhide
indexes from the query planner. An index hidden from the query planner
is not evaluated as part of query plan selection.</p>
<p>By hiding an index from the planner, users can evaluate the potential
impact of dropping an index without having to drop the index. If the
impact is negative, the user can unhide the index instead of having to
recreate a dropped index. And because indexes are fully maintained
while hidden, hidden indexes are immediately available for use once
unhidden.</p>
<p>For details, see <a class="reference internal" href="../core/index-hidden.html"><span class="doc">Hidden Indexes</span></a>.</p>
<p>To support <a class="reference internal" href="../core/index-hidden.html"><span class="doc">hidden indexes</span></a>, MongoDB
introduces:</p>
<ul class="simple">
<li>A new index option <code class="docutils literal"><span class="pre">hidden</span></code>. The option can be specified in the
following operations:<ul>
<li><a class="reference internal" href="../reference/command/createIndexes.html#cmd-createindexes-hidden"><span class="std std-ref">createIndexes</span></a> command</li>
<li><a class="reference internal" href="../reference/method/db.collection.createIndex.html#method-createindex-hidden"><span class="std std-ref">db.collection.createIndex()</span></a> and
<a class="reference internal" href="../reference/method/db.collection.createIndexes.html#method-createindexes-hidden"><span class="std std-ref">db.collection.createIndexes()</span></a> methods</li>
<li><a class="reference internal" href="../reference/command/collMod.html#index" title="index"><code class="xref mongodb mongodb-collflag docutils literal"><span class="pre">collMod</span></code></a> command</li>
</ul>
</li>
<li>New <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell helper methods to hide or unhide
existing indexes:<ul>
<li><a class="reference internal" href="../reference/method/db.collection.hideIndex.html#db.collection.hideIndex" title="db.collection.hideIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.hideIndex()</span></code></a></li>
<li><a class="reference internal" href="../reference/method/db.collection.unhideIndex.html#db.collection.unhideIndex" title="db.collection.unhideIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.unhideIndex()</span></code></a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="dropindexes-can-abort-in-progress-index-builds">
<h3><code class="docutils literal"><span class="pre">dropIndexes</span></code> Can Abort In-Progress Index Builds<a class="headerlink" href="#dropindexes-can-abort-in-progress-index-builds" title="Permalink to this headline">¶</a></h3>
<p>If an index specified to <a class="reference internal" href="../reference/command/dropIndexes.html#dbcmd.dropIndexes" title="dropIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">dropIndexes</span></code></a> is still building,
<a class="reference internal" href="../reference/command/dropIndexes.html#dbcmd.dropIndexes" title="dropIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">dropIndexes</span></code></a> attempts to abort the in-progress build.
Aborting an index build has the same effect as dropping the built index.
Prior to MongoDB 4.4, <a class="reference internal" href="../reference/command/dropIndexes.html#dbcmd.dropIndexes" title="dropIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">dropIndexes</span></code></a> would return an error if
the collection had any in-progress index builds. This behavior also
applies to the shell helpers <a class="reference internal" href="../reference/method/db.collection.dropIndex.html#db.collection.dropIndex" title="db.collection.dropIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.dropIndex()</span></code></a> and
<a class="reference internal" href="../reference/method/db.collection.dropIndexes.html#db.collection.dropIndexes" title="db.collection.dropIndexes()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.dropIndexes()</span></code></a>.</p>
<ul class="simple">
<li>The indexes specified to <a class="reference internal" href="../reference/command/dropIndexes.html#dbcmd.dropIndexes" title="dropIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">dropIndexes</span></code></a> /
<a class="reference internal" href="../reference/method/db.collection.dropIndexes.html#db.collection.dropIndexes" title="db.collection.dropIndexes()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">dropIndexes()</span></code></a> must be the entire set of
in-progress builds associated to a given index builder, i.e. the
indexes built by a single <a class="reference internal" href="../reference/command/createIndexes.html#dbcmd.createIndexes" title="createIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">createIndexes</span></code></a> or
<a class="reference internal" href="../reference/method/db.collection.createIndexes.html#db.collection.createIndexes" title="db.collection.createIndexes()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.createIndexes()</span></code></a> operation.</li>
<li>The index specified to <a class="reference internal" href="../reference/method/db.collection.dropIndex.html#db.collection.dropIndex" title="db.collection.dropIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">dropIndex()</span></code></a> must be
the only index associated to the index builder, i.e. the indexes built
by a single <a class="reference internal" href="../reference/command/createIndexes.html#dbcmd.createIndexes" title="createIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">createIndexes</span></code></a> or
<a class="reference internal" href="../reference/method/db.collection.createIndexes.html#db.collection.createIndexes" title="db.collection.createIndexes()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.createIndexes()</span></code></a> operation.</li>
</ul>
<p>To drop a specific index out of a set of related in-progress builds,
wait until the index builds complete and specify that index to
<a class="reference internal" href="../reference/command/dropIndexes.html#dbcmd.dropIndexes" title="dropIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">dropIndexes</span></code></a> or its shell helpers.</p>
<p>For more complete documentation, see:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/command/dropIndexes.html#dropindexes-cmd-index-builds"><span class="std std-ref">Stop In-Progress Index Builds</span></a> for the <a class="reference internal" href="../reference/command/dropIndexes.html#dbcmd.dropIndexes" title="dropIndexes"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">dropIndexes</span></code></a> command.</li>
<li><a class="reference internal" href="../reference/method/db.collection.dropIndexes.html#dropindexes-method-index-builds"><span class="std std-ref">Stop In-Progress Index Builds</span></a> for the <a class="reference internal" href="../reference/method/db.collection.dropIndexes.html#db.collection.dropIndexes" title="db.collection.dropIndexes()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">dropIndexes()</span></code></a> method.</li>
<li><a class="reference internal" href="../reference/method/db.collection.dropIndex.html#dropindex-method-index-builds"><span class="std std-ref">Stop In-Progress Index Builds</span></a> for the <a class="reference internal" href="../reference/method/db.collection.dropIndex.html#db.collection.dropIndex" title="db.collection.dropIndex()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">dropIndex()</span></code></a> method.</li>
</ul>
</div>
<div class="section" id="drop-can-abort-in-progress-index-builds">
<h3><code class="docutils literal"><span class="pre">drop()</span></code> Can Abort In-Progress Index Builds<a class="headerlink" href="#drop-can-abort-in-progress-index-builds" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the <a class="reference internal" href="../reference/method/db.collection.drop.html#db.collection.drop" title="db.collection.drop()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.drop()</span></code></a> method and
<a class="reference internal" href="../reference/command/drop.html#dbcmd.drop" title="drop"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">drop</span></code></a> command abort any in-progress index builds on the
target collection before dropping the collection. Prior to MongoDB
4.4, attempting to drop a collection with in-progress index builds
results in an error, and the collection is not dropped.</p>
<p>For replica sets or shard replica sets, aborting an index on the primary
does not simultaneously abort secondary index builds. MongoDB attempts
to abort the in-progress builds for the specified indexes on the
<a class="reference internal" href="../reference/glossary.html#term-primary"><span class="xref std std-term">primary</span></a> and if successful creates an associated <code class="docutils literal"><span class="pre">abort</span></code>
<a class="reference internal" href="../reference/glossary.html#term-oplog"><span class="xref std std-term">oplog</span></a> entry. <a class="reference internal" href="../reference/glossary.html#term-secondary"><span class="xref std std-term">Secondary</span></a> members with
replicated in-progress builds wait for a commit or abort oplog entry
from the primary before either committing or aborting the index build.</p>
<p>For replica sets or shard replica sets, aborting an index on the primary
does not simultaneously abort secondary index builds. MongoDB attempts
to abort the in-progress builds for the specified indexes on the
<a class="reference internal" href="../reference/glossary.html#term-primary"><span class="xref std std-term">primary</span></a> and if successful creates an associated <code class="docutils literal"><span class="pre">abort</span></code>
<a class="reference internal" href="../reference/glossary.html#term-oplog"><span class="xref std std-term">oplog</span></a> entry. <a class="reference internal" href="../reference/glossary.html#term-secondary"><span class="xref std std-term">Secondary</span></a> members with
replicated in-progress builds wait for a commit or abort oplog entry
from the primary before either committing or aborting the index build.</p>
</div>
<div class="section" id="dropdatabase-can-abort-in-progress-index-builds">
<h3><code class="docutils literal"><span class="pre">dropDatabase</span></code> Can Abort In-Progress Index Builds<a class="headerlink" href="#dropdatabase-can-abort-in-progress-index-builds" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the <a class="reference internal" href="../reference/method/db.dropDatabase.html#db.dropDatabase" title="db.dropDatabase()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.dropDatabase()</span></code></a> method and
<a class="reference internal" href="../reference/command/dropDatabase.html#dbcmd.dropDatabase" title="dropDatabase"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">dropDatabase</span></code></a> command abort any in-progress index builds
on collections in the target database before dropping the database.
Aborting an index build has the same effect as dropping the built
index. Prior to MongoDB 4.4, attempting to drop a database that
contains a collection with an in-progress index build results in an
error, and the database is not dropped.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../core/index-creation.html#index-operations"><span class="std std-ref">Index Builds on Populated Collections</span></a></p>
</div>
</div>
<div class="section" id="deprecation-of-geohaystack-index-and-geosearch-command">
<h3>Deprecation of <code class="docutils literal"><span class="pre">geoHaystack</span></code> Index and <code class="docutils literal"><span class="pre">geoSearch</span></code> Command<a class="headerlink" href="#deprecation-of-geohaystack-index-and-geosearch-command" title="Permalink to this headline">¶</a></h3>
<p>MongoDB 4.4 deprecates the <a class="reference internal" href="../core/geohaystack.html"><span class="doc">geoHaystack</span></a> index and the
<a class="reference internal" href="../reference/command/geoSearch.html#dbcmd.geoSearch" title="geoSearch"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">geoSearch</span></code></a> command.  Use a <a class="reference internal" href="../core/2d.html"><span class="doc">2d index</span></a>
with <a class="reference internal" href="../reference/operator/aggregation/geoNear.html#pipe._S_geoNear" title="$geoNear"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$geoNear</span></code></a> or <a class="reference internal" href="../reference/operator/query/geoWithin.html#op._S_geoWithin" title="$geoWithin"><code class="xref mongodb mongodb-query docutils literal"><span class="pre">$geoWithin</span></code></a> instead.</p>
</div>
</div>
<div class="section" id="id35">
<h2>Removed Commands<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<p>MongoDB removes the following command(s) and <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell
helper(s):</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="25%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Removed Command</th>
<th class="head">Removed Helper</th>
<th class="head">Alternatives</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">cloneCollection</span></code></td>
<td><code class="docutils literal"><span class="pre">db.cloneCollection()</span></code></td>
<td><ul class="first last simple">
<li>Use <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongoexport</span></code> and
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongoimport</span></code>, or</li>
<li>Use the aggregation pipeline <a class="reference internal" href="../reference/operator/aggregation/out.html#pipe._S_out" title="$out"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$out</span></code></a> or
<a class="reference internal" href="../reference/operator/aggregation/merge.html#pipe._S_merge" title="$merge"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$merge</span></code></a> stages, or</li>
<li>Write a script using the drivers.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">planCacheListPlans</span></code></td>
<td><code class="docutils literal"><span class="pre">PlanCache.getPlansByQuery()</span></code></td>
<td><ul class="first simple">
<li>Use the aggregation pipeline stage <a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html#pipe._S_planCacheStats" title="$planCacheStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$planCacheStats</span></code></a> or</li>
<li>Use the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell helper method
<a class="reference internal" href="../reference/method/PlanCache.list.html#PlanCache.list" title="PlanCache.list()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">PlanCache.list()</span></code></a>. (Available starting in version 4.4)</li>
</ul>
<div class="last line-block">
<div class="line">See also <a class="reference internal" href="#agg-plancachesstats-changes"><span class="std std-ref">$planCacheStats Changes</span></a>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">planCacheListQueryShapes</span></code></td>
<td><code class="docutils literal"><span class="pre">PlanCache.listQueryShapes()</span></code></td>
<td><ul class="first simple">
<li>Use the aggregation pipeline stage <a class="reference internal" href="../reference/operator/aggregation/planCacheStats.html#pipe._S_planCacheStats" title="$planCacheStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$planCacheStats</span></code></a> or</li>
<li>Use the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell helper method
<a class="reference internal" href="../reference/method/PlanCache.list.html#PlanCache.list" title="PlanCache.list()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">PlanCache.list()</span></code></a>. (Available starting in version 4.4)</li>
</ul>
<div class="last line-block">
<div class="line">See also <a class="reference internal" href="#agg-plancachesstats-changes"><span class="std std-ref">$planCacheStats Changes</span></a>.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="networking">
<span id="rel-notes-networking"></span><h2>Networking<a class="headerlink" href="#networking" title="Permalink to this headline">¶</a></h2>
<div class="section" id="support-for-tcp-fast-open">
<span id="rel-notes-tcp-fast-open"></span><h3>Support for TCP Fast Open<a class="headerlink" href="#support-for-tcp-fast-open" title="Permalink to this headline">¶</a></h3>
<p>Starting with MongoDB 4.4, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> and
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> support TCP Fast Open (TFO) connections by
default. TFO requires both the client and the <code class="docutils literal"><span class="pre">mongod/mongos</span></code>
host machines support and enable TFO:</p>
<dl class="docutils">
<dt>Windows</dt>
<dd><p class="first">The following Windows operating systems support TFO:</p>
<ul class="last simple">
<li>Microsoft Windows Server 2016 or later.</li>
<li>Microsoft Windows 10 Update 1607 or later.</li>
</ul>
</dd>
<dt>macOS</dt>
<dd>macOS 10.11 (El Capitan) and later support TFO</dd>
<dt>Linux</dt>
<dd><p class="first">Linux operating systems running Linux Kernel 3.7 or later can
support inbound TFO connections.</p>
<p>Linux operating systems running Linux Kernel 4.11 or later can
support both inbound and outbound TFO connections.</p>
<p>Set the value of <code class="docutils literal"><span class="pre">/proc/sys/net/ipv4/tcp_fastopen</span></code> to enable
support for inbound and/or outbound TFO connections:</p>
<ul class="last simple">
<li>Set to <code class="docutils literal"><span class="pre">1</span></code> to enable only outbound TFO connections</li>
<li>Set to <code class="docutils literal"><span class="pre">2</span></code> to enable only inbound TFO connections</li>
<li>Set to <code class="docutils literal"><span class="pre">3</span></code> to enable inbound and outbound TFO connections.</li>
</ul>
</dd>
</dl>
<p>MongoDB 4.4 adds the following parameters for controlling
TFO:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../reference/parameters.html#param.tcpFastOpenServer" title="tcpFastOpenServer"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">tcpFastOpenServer</span></code></a></td>
<td><p class="first"><em>Default</em>: <code class="docutils literal"><span class="pre">true</span></code> (Enabled)</p>
<p class="last">Enables or disables support for inbound TFO connections to the
<code class="docutils literal"><span class="pre">mongod/mongos</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/parameters.html#param.tcpFastOpenClient" title="tcpFastOpenClient"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">tcpFastOpenClient</span></code></a></td>
<td><p class="first"><em>Default</em>: <code class="docutils literal"><span class="pre">true</span></code> (Enabled)</p>
<p><em>Linux Operating System Only</em></p>
<p class="last">Enables or disables support for outbound TFO connections
from the <code class="docutils literal"><span class="pre">mongod/mongos</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../reference/parameters.html#param.tcpFastOpenQueueSize" title="tcpFastOpenQueueSize"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">tcpFastOpenQueueSize</span></code></a></td>
<td><p class="first"><em>Default</em>: <code class="docutils literal"><span class="pre">1024</span></code></p>
<p class="last">Control the size of the queue of pending TFO connections.</p>
</td>
</tr>
</tbody>
</table>
<p>MongoDB 4.4 adds the following counters to the output of
<a class="reference internal" href="../reference/command/serverStatus.html#dbcmd.serverStatus" title="serverStatus"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">serverStatus</span></code></a> and <a class="reference internal" href="../reference/method/db.serverStatus.html#db.serverStatus" title="db.serverStatus()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.serverStatus()</span></code></a>:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Counter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.network.tcpFastOpen.kernelSetting" title="network.tcpFastOpen.kernelSetting"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">network.tcpFastOpen.kernelSetting</span></code></a></td>
<td><p class="first"><em>Linux only</em></p>
<p class="last">Indicates kernel support for TFO.</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.network.tcpFastOpen.serverSupported" title="network.tcpFastOpen.serverSupported"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">network.tcpFastOpen.serverSupported</span></code></a></td>
<td>Indicates operating system support for incoming TFO connections.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.network.tcpFastOpen.clientSupported" title="network.tcpFastOpen.clientSupported"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">network.tcpFastOpen.clientSupported</span></code></a></td>
<td>Indicates operating system support for outgoing TFO connections.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.network.tcpFastOpen.accepted" title="network.tcpFastOpen.accepted"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">network.tcpFastOpen.accepted</span></code></a></td>
<td>Indicates the total number of accepted incoming TFO connections
to the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>/<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> since the
<code class="docutils literal"><span class="pre">mongod/mongos</span></code> last started.</td>
</tr>
</tbody>
</table>
<p>A complete discussion of TFO is outside the scope of this documentation.
For more information on TFO, start with the following external
resources:</p>
<ul class="simple">
<li><a class="reference external" href="https://tools.ietf.org/html/rfc7413">RFC7413 TCP Fast Open</a></li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/TCP_Fast_Open">TCP Fast Open (en.wikipedia.org)</a></li>
</ul>
</div>
</div>
<div class="section" id="general-improvements">
<h2>General Improvements<a class="headerlink" href="#general-improvements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="blocking-sort-limit-increased">
<span id="rel-notes-sort-memory-limit"></span><h3>Blocking Sort Limit Increased<a class="headerlink" href="#blocking-sort-limit-increased" title="Permalink to this headline">¶</a></h3>
<p>If MongoDB cannot use an index or indexes to obtain the sort order for a
given <a class="reference internal" href="../reference/method/cursor.sort.html#cursor.sort" title="cursor.sort()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">cursor.sort()</span></code></a> operation, MongoDB must perform a blocking
sort on the data. A blocking sort indicates that MongoDB must consume
and process all input documents to the sort before returning results.
Blocking sorts do not block concurrent operations on the
collection or database.</p>
<p>Prior to MongoDB 4.4, MongoDB returned an error if a blocking sort
operations required more than 32 megabytes of system memory. Starting in
MongoDB 4.4, blocking sort operations increase the limit on system
memory to use for the sort operation to 100 megabytes. For blocking sort
operations which require more than 100 megabytes of system memory,
MongoDB returns an error <em>unless</em> the query specifies
<a class="reference internal" href="../reference/method/cursor.allowDiskUse.html#cursor.allowDiskUse" title="cursor.allowDiskUse()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">cursor.allowDiskUse()</span></code></a> (<em>New in MongoDB 4.4</em>).</p>
<p>For more information on sorting and index use, see
<a class="reference internal" href="../reference/method/cursor.sort.html#sort-index-use"><span class="std std-ref">Sort and Index Use</span></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="../reference/method/cursor.allowDiskUse.html#cursor.allowDiskUse" title="cursor.allowDiskUse()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">cursor.allowDiskUse()</span></code></a></li>
<li><a class="reference internal" href="../reference/limits.html#Sort-Operations" title="Sort Operations"><code class="xref mongodb mongodb-limit docutils literal"><span class="pre">Memory</span> <span class="pre">Limits</span> <span class="pre">on</span> <span class="pre">Sort</span> <span class="pre">Operations</span></code></a></li>
</ul>
</div>
</div>
<div class="section" id="find-can-use-temporary-files-to-support-large-non-indexed-sorts">
<h3><code class="docutils literal"><span class="pre">find</span></code> Can Use Temporary Files To Support Large Non-Indexed Sorts<a class="headerlink" href="#find-can-use-temporary-files-to-support-large-non-indexed-sorts" title="Permalink to this headline">¶</a></h3>
<p>MongoDB 4.4 adds a new option <a class="reference internal" href="../reference/command/find.html#find-cmd-allowdiskuse"><span class="std std-ref">allowDiskUse</span></a> to the <a class="reference internal" href="../reference/command/find.html#dbcmd.find" title="find"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">find</span></code></a> command. With
<a class="reference internal" href="../reference/command/find.html#find-cmd-allowdiskuse"><span class="std std-ref">allowDiskUse: true</span></a>, the operation can use
temporary files on disk when processing a non-indexed (“blocking”)
<a class="reference internal" href="../reference/command/find.html#find-cmd-sort"><span class="std std-ref">sort</span></a> operation that exceeds the
100 megabyte memory limit. Prior to MongoDB 4.4, a <a class="reference internal" href="../reference/command/find.html#dbcmd.find" title="find"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">find</span></code></a>
operation with a blocking sort failed if it exceeded the memory limit
while processing the sort.</p>
<p>For the <a class="reference internal" href="../reference/method/db.collection.find.html#db.collection.find" title="db.collection.find()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.find()</span></code></a> shell method with
<a class="reference internal" href="../reference/method/cursor.sort.html#cursor.sort" title="cursor.sort()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">cursor.sort()</span></code></a>, MongoDB 4.4 adds the
<a class="reference internal" href="../reference/method/cursor.allowDiskUse.html#cursor.allowDiskUse" title="cursor.allowDiskUse()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">cursor.allowDiskUse()</span></code></a> cursor modifier.</p>
<p><a class="reference internal" href="../reference/command/find.html#find-cmd-allowdiskuse"><span class="std std-ref">allowDiskUse</span></a> and
<a class="reference internal" href="../reference/method/cursor.allowDiskUse.html#cursor.allowDiskUse" title="cursor.allowDiskUse()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">cursor.allowDiskUse()</span></code></a> have no effect if MongoDB can satisfy
the sort using an <a class="reference internal" href="../tutorial/sort-results-with-indexes.html#index-sort"><span class="std std-ref">index</span></a>, <em>or</em> if the
blocking sort requires less than 100 megabytes of memory.</p>
<p>For instructions on enabling <a class="reference internal" href="../reference/command/find.html#find-cmd-allowdiskuse"><span class="std std-ref">allowDiskUse</span></a>
for queries issued through a MongoDB driver, defer to the documentation
for your preferred
<a href="#id36"><span class="problematic" id="id37">:driver:`MongoDB 4.4-compatible driver &lt;/&gt;`</span></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="../reference/limits.html#Sort-Operations" title="Sort Operations"><code class="xref mongodb mongodb-limit docutils literal"><span class="pre">Memory</span> <span class="pre">Limits</span> <span class="pre">On</span> <span class="pre">Sort</span> <span class="pre">Operations</span></code></a></li>
<li><a class="reference internal" href="../reference/method/cursor.sort.html#sort-index-use"><span class="std std-ref">Sort and Index Use</span></a></li>
</ul>
</div>
</div>
<div class="section" id="collection-namespace-limit">
<h3>Collection Namespace Limit<a class="headerlink" href="#collection-namespace-limit" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4,</p>
<ul class="simple">
<li>For <a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#view-fcv"><span class="std std-ref">featureCompatibilityVersion</span></a> set to <code class="docutils literal"><span class="pre">&quot;4.4&quot;</span></code> or
greater, MongoDB raises the limit for unsharded collections and views to
255 bytes, and to 235 bytes for sharded collections. For a collection or
a view, the namespace includes the database name, the dot (<code class="docutils literal"><span class="pre">.</span></code>)
separator, and the collection/view name
(e.g. <code class="docutils literal"><span class="pre">&lt;database&gt;.&lt;collection&gt;</span></code>),</li>
<li>For <a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#view-fcv"><span class="std std-ref">featureCompatibilityVersion</span></a> set to <code class="docutils literal"><span class="pre">&quot;4.2&quot;</span></code> or
earlier, the maximum length of unsharded collections and views namespace
remains 120 bytes and 100 bytes for sharded collection.</li>
</ul>
</div>
<div class="section" id="validation-data-throughput-information">
<h3>Validation Data Throughput Information<a class="headerlink" href="#validation-data-throughput-information" title="Permalink to this headline">¶</a></h3>
<p>Starting in version MongoDB 4.4,</p>
<ul class="simple">
<li>The <a class="reference internal" href="../reference/operator/aggregation/currentOp.html#pipe._S_currentOp" title="$currentOp"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$currentOp</span></code></a> and the <a class="reference internal" href="../reference/command/currentOp.html#dbcmd.currentOp" title="currentOp"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">currentOp</span></code></a> command
include <a class="reference internal" href="../reference/operator/aggregation/currentOp.html#_S_currentOp.dataThroughputAverage" title="$currentOp.dataThroughputAverage"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">dataThroughputAverage</span></code></a> and
<a class="reference internal" href="../reference/operator/aggregation/currentOp.html#_S_currentOp.dataThroughputLastSecond" title="$currentOp.dataThroughputLastSecond"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">dataThroughputLastSecond</span></code></a> information for
validate operations in progress.</li>
<li>The log messages for validate operations include
<code class="docutils literal"><span class="pre">dataThroughputAverage</span></code> and <code class="docutils literal"><span class="pre">dataThroughputLastSecond</span></code>
information.</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="4.4-compatibility.html#validate-method-signature"><span class="std std-ref">db.collection.validate() Parameter Change</span></a></p>
</div>
</div>
<div class="section" id="compact-behavior-change">
<h3><code class="docutils literal"><span class="pre">compact</span></code> Behavior Change<a class="headerlink" href="#compact-behavior-change" title="Permalink to this headline">¶</a></h3>
<div class="section" id="blocking">
<h4>Blocking<a class="headerlink" href="#blocking" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, <a class="reference internal" href="../reference/command/compact.html#dbcmd.compact" title="compact"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">compact</span></code></a> only blocks the following
metadata operations:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/method/db.collection.drop.html#db.collection.drop" title="db.collection.drop"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.drop</span></code></a></li>
<li><a class="reference internal" href="../reference/method/db.collection.createIndex.html#db.collection.createIndex" title="db.collection.createIndex"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.createIndex</span></code></a> and
<a class="reference internal" href="../reference/method/db.collection.createIndexes.html#db.collection.createIndexes" title="db.collection.createIndexes"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.createIndexes</span></code></a></li>
<li><a class="reference internal" href="../reference/method/db.collection.dropIndex.html#db.collection.dropIndex" title="db.collection.dropIndex"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.dropIndex</span></code></a> and
<a class="reference internal" href="../reference/method/db.collection.dropIndexes.html#db.collection.dropIndexes" title="db.collection.dropIndexes"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.dropIndexes</span></code></a></li>
</ul>
<p><a class="reference internal" href="../reference/command/compact.html#dbcmd.compact" title="compact"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">compact</span></code></a> does not block <a class="reference internal" href="../crud.html#crud"><span class="std std-ref">MongoDB CRUD Operations</span></a> for the database it is
currently operating on.</p>
<p>Previously, <a class="reference internal" href="../reference/command/compact.html#dbcmd.compact" title="compact"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">compact</span></code></a> blocked all operations for
the database it was operating on, including <a class="reference internal" href="../crud.html#crud"><span class="std std-ref">MongoDB CRUD Operations</span></a>, and was
therefore only appropriate for use during scheduled maintenance
periods.</p>
</div>
<div class="section" id="force-option">
<h4><code class="docutils literal"><span class="pre">force</span></code> Option<a class="headerlink" href="#force-option" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, the <code class="docutils literal"><span class="pre">force</span></code> flag forces <a class="reference internal" href="../reference/command/compact.html#dbcmd.compact" title="compact"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">compact</span></code></a>
to run on the <a class="reference internal" href="../reference/glossary.html#term-primary"><span class="xref std std-term">primary</span></a> in a <a class="reference internal" href="../reference/glossary.html#term-replica-set"><span class="xref std std-term">replica set</span></a>.</p>
<p>Previously, the <code class="docutils literal"><span class="pre">force</span></code> option, when set to <code class="docutils literal"><span class="pre">true</span></code> enabled
<a class="reference internal" href="../reference/command/compact.html#dbcmd.compact" title="compact"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">compact</span></code></a> to run on the <a class="reference internal" href="../reference/glossary.html#term-primary"><span class="xref std std-term">primary</span></a> in a <a class="reference internal" href="../reference/glossary.html#term-replica-set"><span class="xref std std-term">replica
set</span></a> and if set to <code class="docutils literal"><span class="pre">false</span></code>, returned an error when run on a
<a class="reference internal" href="../reference/glossary.html#term-primary"><span class="xref std std-term">primary</span></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../reference/command/compact.html#compact"><span class="std std-ref">compact</span></a></p>
</div>
</div>
</div>
<div class="section" id="mongod-repair-behavior-change">
<h3><code class="docutils literal"><span class="pre">mongod</span> <span class="pre">--repair</span></code> Behavior Change<a class="headerlink" href="#mongod-repair-behavior-change" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the <a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-repair"><code class="xref std std-option docutils literal"><span class="pre">mongod</span> <span class="pre">--repair</span></code></a> rebuilds all
indexes for the following:</p>
<ul class="simple">
<li>Collections with inconsistencies between the collection data and
one or more indexes.</li>
<li>Salvaged and modified collections.</li>
</ul>
<p>In earlier versions of MongoDB, the <a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-repair"><code class="xref std std-option docutils literal"><span class="pre">mongod</span> <span class="pre">--repair</span></code></a> option
rebuilt all indexes for all collections.</p>
</div>
<div class="section" id="serverstatus-output-change">
<h3><code class="docutils literal"><span class="pre">serverStatus</span></code> Output Change<a class="headerlink" href="#serverstatus-output-change" title="Permalink to this headline">¶</a></h3>
<div class="section" id="field-name-change">
<h4>Field Name Change<a class="headerlink" href="#field-name-change" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="../reference/command/serverStatus.html#dbcmd.serverStatus" title="serverStatus"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">serverStatus</span></code></a> returns
<a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.flowControl.locksPerKiloOp" title="flowControl.locksPerKiloOp"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">flowControl.locksPerKiloOp</span></code></a> instead of
<a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.flowControl.locksPerOp" title="flowControl.locksPerOp"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">flowControl.locksPerOp</span></code></a>.</p>
</div>
<div class="section" id="new-fields">
<h4>New Fields<a class="headerlink" href="#new-fields" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="../reference/command/serverStatus.html#dbcmd.serverStatus" title="serverStatus"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">serverStatus</span></code></a> includes the following new fields in its
output:</p>
<ul class="simple">
<li>Aggregation Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.aggStageCounters" title="metrics.aggStageCounters"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.aggStageCounters</span></code></a> <em>(Also available in 4.2.6+ and 4.0.19+)</em></li>
</ul>
</li>
<li>Connections Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.connections.exhaustIsMaster" title="connections.exhaustIsMaster"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">connections.exhaustIsMaster</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.connections.awaitingTopologyChanges" title="connections.awaitingTopologyChanges"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">connections.awaitingTopologyChanges</span></code></a></li>
</ul>
</li>
<li>Default Read Concern Write Concern Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.defaultRWConcern" title="defaultRWConcern"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">defaultRWConcern</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.defaultRWConcern.defaultReadConcern" title="defaultRWConcern.defaultReadConcern"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">defaultRWConcern.defaultReadConcern</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.defaultRWConcern.defaultReadConcern.level" title="defaultRWConcern.defaultReadConcern.level"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">defaultRWConcern.defaultReadConcern.level</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.defaultRWConcern.defaultWriteConcern" title="defaultRWConcern.defaultWriteConcern"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">defaultRWConcern.defaultWriteConcern</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.defaultRWConcern.defaultWriteConcern.w" title="defaultRWConcern.defaultWriteConcern.w"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">defaultRWConcern.defaultWriteConcern.w</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.defaultRWConcern.defaultWriteConcern.wtimeout" title="defaultRWConcern.defaultWriteConcern.wtimeout"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">defaultRWConcern.defaultWriteConcern.wtimeout</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.defaultRWConcern.updateOpTime" title="defaultRWConcern.updateOpTime"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">defaultRWConcern.updateOpTime</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.defaultRWConcern.updateWallClockTime" title="defaultRWConcern.updateWallClockTime"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">defaultRWConcern.updateWallClockTime</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.defaultRWConcern.localUpdateWallClockTime" title="defaultRWConcern.localUpdateWallClockTime"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">defaultRWConcern.localUpdateWallClockTime</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.getLastError.default" title="metrics.getLastError.default"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.getLastError.default</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.getLastError.default.unsatisfiable" title="metrics.getLastError.default.unsatisfiable"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.getLastError.default.unsatisfiable</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.getLastError.default.wtimeouts" title="metrics.getLastError.default.wtimeouts"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.getLastError.default.wtimeouts</span></code></a></li>
</ul>
</li>
<li>Latch Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.latchAnalysis" title="latchAnalysis"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">latchAnalysis</span></code></a></li>
</ul>
</li>
<li>Mirrored Reads Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.mirroredReads" title="mirroredReads"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">mirroredReads</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.mirroredReads.seen" title="mirroredReads.seen"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">mirroredReads.seen</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.mirroredReads.sent" title="mirroredReads.sent"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">mirroredReads.sent</span></code></a></li>
</ul>
</li>
<li>Query Execution Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.queryExecutor.collectionScans" title="metrics.queryExecutor.collectionScans"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.queryExecutor.collectionScans</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.queryExecutor.collectionScans.nonTailable" title="metrics.queryExecutor.collectionScans.nonTailable"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.queryExecutor.collectionScans.nonTailable</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.queryExecutor.collectionScans.total" title="metrics.queryExecutor.collectionScans.total"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.queryExecutor.collectionScans.total</span></code></a></li>
</ul>
</li>
<li>Replication Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.repl.network.replSetUpdatePosition.num" title="metrics.repl.network.replSetUpdatePosition.num"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.repl.network.replSetUpdatePosition.num</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.repl.network.getmores.numEmptyBatches" title="metrics.repl.network.getmores.numEmptyBatches"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.repl.network.getmores.numEmptyBatches</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.repl.network.oplogGetMoresProcessed" title="metrics.repl.network.oplogGetMoresProcessed"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.repl.network.oplogGetMoresProcessed</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.repl.network.oplogGetMoresProcessed.num" title="metrics.repl.network.oplogGetMoresProcessed.num"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.repl.network.oplogGetMoresProcessed.num</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.repl.network.oplogGetMoresProcessed.totalMillis" title="metrics.repl.network.oplogGetMoresProcessed.totalMillis"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.repl.network.oplogGetMoresProcessed.totalMillis</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.repl.syncSource.numSelections" title="metrics.repl.syncSource.numSelections"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.repl.syncSource.numSelections</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.repl.syncSource.numTimesChoseSame" title="metrics.repl.syncSource.numTimesChoseSame"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.repl.syncSource.numTimesChoseSame</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.repl.syncSource.numTimesChoseDifferent" title="metrics.repl.syncSource.numTimesChoseDifferent"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.repl.syncSource.numTimesChoseDifferent</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.metrics.repl.syncSource.numTimesCouldNotFind" title="metrics.repl.syncSource.numTimesCouldNotFind"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">metrics.repl.syncSource.numTimesCouldNotFind</span></code></a></li>
</ul>
</li>
<li>Network Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.network.numSlowDNSOperations" title="network.numSlowDNSOperations"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">network.numSlowDNSOperations</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.network.numSlowSSLOperations" title="network.numSlowSSLOperations"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">network.numSlowSSLOperations</span></code></a></li>
</ul>
</li>
<li>Security Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.security.authentication.mechanisms" title="security.authentication.mechanisms"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">security.authentication.mechanisms</span></code></a></li>
</ul>
</li>
<li>Sharding Metrics<ul>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.shardedIndexConsistency" title="shardedIndexConsistency"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">shardedIndexConsistency</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.shardingStatistics.rangeDeleterTasks" title="shardingStatistics.rangeDeleterTasks"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">shardingStatistics.rangeDeleterTasks</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.shardingStatistics.unfinishedMigrationFromPreviousPrimary" title="shardingStatistics.unfinishedMigrationFromPreviousPrimary"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">shardingStatistics.unfinishedMigrationFromPreviousPrimary</span></code></a></li>
<li><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.shardingStatistics.numHostsTargeted" title="shardingStatistics.numHostsTargeted"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">shardingStatistics.numHostsTargeted</span></code></a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="serverstatus-sharding-statistics-output-change">
<h3><code class="docutils literal"><span class="pre">serverStatus</span></code> Sharding Statistics Output Change<a class="headerlink" href="#serverstatus-sharding-statistics-output-change" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../reference/command/serverStatus.html#serverstatus.shardingStatistics.numHostsTargeted" title="shardingStatistics.numHostsTargeted"><code class="xref mongodb mongodb-serverstatus docutils literal"><span class="pre">shardingStatistics.numHostsTargeted</span></code></a>
which reports the number of shards targeted by CRUD operations and
aggregation commands. The relevant find, insert, update, delete or
aggregate metric will be incremented with each operation on a
cluster.</p>
</div>
<div class="section" id="replsetgetstatus-output-change">
<h3><code class="docutils literal"><span class="pre">replSetGetStatus</span></code> Output Change<a class="headerlink" href="#replsetgetstatus-output-change" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../reference/command/replSetGetStatus.html#dbcmd.replSetGetStatus" title="replSetGetStatus"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetGetStatus</span></code></a> returns the following new fields:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/command/replSetGetStatus.html#replSetGetStatus.tooStale" title="replSetGetStatus.tooStale"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">tooStale</span></code></a></li>
<li><a class="reference internal" href="../reference/command/replSetGetStatus.html#replSetGetStatus.votingMembersCount" title="replSetGetStatus.votingMembersCount"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">votingMembersCount</span></code></a></li>
<li><a class="reference internal" href="../reference/command/replSetGetStatus.html#replSetGetStatus.writableVotingMembersCount" title="replSetGetStatus.writableVotingMembersCount"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">writableVotingMembersCount</span></code></a></li>
<li><a class="reference internal" href="../reference/command/replSetGetStatus.html#replSetGetStatus.initialSyncStatus.syncSourceUnreachableSince" title="replSetGetStatus.initialSyncStatus.syncSourceUnreachableSince"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">initialSyncStatus.syncSourceUnreachableSince</span></code></a></li>
<li><a class="reference internal" href="../reference/command/replSetGetStatus.html#replSetGetStatus.initialSyncStatus.currentOutageDurationMillis" title="replSetGetStatus.initialSyncStatus.currentOutageDurationMillis"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">initialSyncStatus.currentOutageDurationMillis</span></code></a></li>
<li><a class="reference internal" href="../reference/command/replSetGetStatus.html#replSetGetStatus.initialSyncStatus.totalTimeUnreachableMillis" title="replSetGetStatus.initialSyncStatus.totalTimeUnreachableMillis"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">initialSyncStatus.totalTimeUnreachableMillis</span></code></a></li>
<li><a class="reference internal" href="../reference/command/replSetGetStatus.html#replSetGetStatus.initialSyncStatus.initialSyncAttempts" title="replSetGetStatus.initialSyncStatus.initialSyncAttempts"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">initialSyncAttempts.rollBackId</span></code></a></li>
<li><a class="reference internal" href="../reference/command/replSetGetStatus.html#replSetGetStatus.initialSyncStatus.initialSyncAttempts" title="replSetGetStatus.initialSyncStatus.initialSyncAttempts"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">initialSyncAttempts.operationsRetried</span></code></a></li>
<li><a class="reference internal" href="../reference/command/replSetGetStatus.html#replSetGetStatus.initialSyncStatus.initialSyncAttempts" title="replSetGetStatus.initialSyncStatus.initialSyncAttempts"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">initialSyncAttempts.totalTimeUnreachableMillis</span></code></a></li>
</ul>
</div>
<div class="section" id="db-auth-can-prompt-for-password">
<span id="rel-notes-db-auth-passwordprompt"></span><h3>db.auth() Can Prompt for Password<a class="headerlink" href="#db-auth-can-prompt-for-password" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell method
<a class="reference internal" href="../reference/method/db.auth.html#db-auth-syntax-username-password"><span class="std std-ref">db.auth(&lt;username&gt;, &lt;password&gt;)</span></a> prompts for the password if
you do not pass in the password or the <a class="reference internal" href="../reference/method/passwordPrompt.html#passwordPrompt" title="passwordPrompt()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">passwordPrompt()</span></code></a>
method for the <code class="docutils literal"><span class="pre">&lt;password&gt;</span></code>.</p>
</div>
<div class="section" id="support-for-natural-sort-on-views">
<h3>Support for <code class="docutils literal"><span class="pre">$natural</span></code> Sort on Views<a class="headerlink" href="#support-for-natural-sort-on-views" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, you can specify a <a class="reference internal" href="../reference/operator/meta/natural.html#metaOp._S_natural" title="$natural"><code class="xref mongodb mongodb-operator docutils literal"><span class="pre">$natural</span></code></a>
sort when running a <a class="reference internal" href="../reference/command/find.html#dbcmd.find" title="find"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">find</span></code></a> operation against a
<a class="reference internal" href="../core/views.html"><span class="doc">view</span></a>.</p>
</div>
<div class="section" id="support-for-diagnostic-backtrace-generation">
<h3>Support for Diagnostic Backtrace Generation<a class="headerlink" href="#support-for-diagnostic-backtrace-generation" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> and <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>
processes running on Linux will now log a backtrace for each of their
running threads upon receipt of a <code class="docutils literal"><span class="pre">SIGUSR2</span></code> signal. This backtrace can
be analyzed for diagnostic information or provided to MongoDB support as
needed. This functionality is currently available only on the <code class="docutils literal"><span class="pre">x86_64</span></code>
architecture. For more information on using this feature, see
<a class="reference internal" href="../tutorial/manage-mongodb-processes.html#sigusr2-diagnostic-backtrace"><span class="std std-ref">Generate a Backtrace</span></a>.</p>
</div>
<div class="section" id="container-aware-ftdc-reporting">
<h3>Container-aware FTDC Reporting<a class="headerlink" href="#container-aware-ftdc-reporting" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, <a class="reference internal" href="../administration/analyzing-mongodb-performance.html#ftdc-stub"><span class="std std-ref">FTDC</span></a> now reports utilization
data for a <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> running in a container from the
perspective of the container, as opposed to the host operating system.
See <a class="reference internal" href="../administration/analyzing-mongodb-performance.html#ftdc-stub"><span class="std std-ref">Full Time Diagnostic Data Capture</span></a> for more information.</p>
</div>
<div class="section" id="updated-ulimit-startup-warning">
<h3>Updated <code class="docutils literal"><span class="pre">ulimit</span></code> Startup Warning<a class="headerlink" href="#updated-ulimit-startup-warning" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> will log a startup
warning if a platform’s configured <code class="docutils literal"><span class="pre">ulimit</span></code> value for number of open
files is under <code class="docutils literal"><span class="pre">64000</span></code>. Previously, a warning would only be
logged if this value was under <code class="docutils literal"><span class="pre">1000</span></code>. See
<a class="reference internal" href="../reference/ulimit.html#recommended-ulimit-settings"><span class="std std-ref">Recommended ulimit Settings</span></a> for more information.</p>
</div>
<div class="section" id="new-replanreason-database-profiler-output-field">
<h3>New <code class="docutils literal"><span class="pre">replanReason</span></code> Database Profiler Output Field<a class="headerlink" href="#new-replanreason-database-profiler-output-field" title="Permalink to this headline">¶</a></h3>
<p>MongoDB 4.4 adds the <a class="reference internal" href="../reference/database-profiler.html#system.profile.replanReason" title="system.profile.replanReason"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">replanReason</span></code></a>
field to
<a class="reference internal" href="../tutorial/manage-the-database-profiler.html"><span class="doc">database profiler output</span></a>
and <a class="reference internal" href="../reference/log-messages.html"><span class="doc">diagnostic log messages</span></a>. The
<code class="docutils literal"><span class="pre">replanReason</span></code> field contains the reason the query system evicted a
<a class="reference internal" href="../core/query-plans.html#query-plans-query-optimization"><span class="std std-ref">cached plan</span></a>.</p>
</div>
<div class="section" id="dbstats-and-collstats-output">
<h3><code class="docutils literal"><span class="pre">dbStats</span></code> and <code class="docutils literal"><span class="pre">collStats</span></code> Output<a class="headerlink" href="#dbstats-and-collstats-output" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../reference/command/dbStats.html#dbcmd.dbStats" title="dbStats"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">dbStats</span></code></a> command and its <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell
helper <a class="reference internal" href="../reference/method/db.stats.html#db.stats" title="db.stats()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.stats()</span></code></a> return:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/command/dbStats.html#dbStats.totalSize" title="dbStats.totalSize"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">totalSize</span></code></a>, which is the sum of
<a class="reference internal" href="../reference/command/dbStats.html#dbStats.storageSize" title="dbStats.storageSize"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">storageSize</span></code></a> and <a class="reference internal" href="../reference/command/dbStats.html#dbStats.indexSize" title="dbStats.indexSize"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">indexSize</span></code></a>.</li>
</ul>
<p>The <a class="reference internal" href="../reference/command/collStats.html#dbcmd.collStats" title="collStats"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">collStats</span></code></a> command, its <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell
helper <a class="reference internal" href="../reference/method/db.collection.stats.html#db.collection.stats" title="db.collection.stats()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.stats()</span></code></a>, and the <a class="reference internal" href="../reference/operator/aggregation/collStats.html#pipe._S_collStats" title="$collStats"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$collStats</span></code></a>
aggregation stage return:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/command/collStats.html#collStats.totalSize" title="collStats.totalSize"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">totalSize</span></code></a>, which is the sum of
<a class="reference internal" href="../reference/command/collStats.html#collStats.storageSize" title="collStats.storageSize"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">storageSize</span></code></a> and <a class="reference internal" href="../reference/command/collStats.html#collStats.totalIndexSize" title="collStats.totalIndexSize"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">totalIndexSize</span></code></a>.</li>
<li><a class="reference internal" href="../reference/command/collStats.html#collStats.freeStorageSize" title="collStats.freeStorageSize"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">freeStorageSize</span></code></a>, which is the amount of storage
available for reuse.</li>
</ul>
</div>
<div class="section" id="hint-available-for-additional-database-commands">
<h3>Hint Available for Additional Database Commands<a class="headerlink" href="#hint-available-for-additional-database-commands" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, the following database commands can accept
a <code class="docutils literal"><span class="pre">hint</span></code> argument to specify the index to use:</p>
<ul class="simple">
<li>The <a class="reference internal" href="../reference/command/delete.html#dbcmd.delete" title="delete"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">delete</span></code></a> command and the associated
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell methods
<a class="reference internal" href="../reference/method/db.collection.deleteOne.html#db.collection.deleteOne" title="db.collection.deleteOne()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.deleteOne()</span></code></a> and
<a class="reference internal" href="../reference/method/db.collection.deleteMany.html#db.collection.deleteMany" title="db.collection.deleteMany()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.deleteMany()</span></code></a>.</li>
<li>The <a class="reference internal" href="../reference/command/findAndModify.html#dbcmd.findAndModify" title="findAndModify"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">findAndModify</span></code></a> command and the associated
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongo</span></code> shell methods:<ul>
<li><a class="reference internal" href="../reference/method/db.collection.findAndModify.html#db.collection.findAndModify" title="db.collection.findAndModify()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.findAndModify()</span></code></a>,</li>
<li><a class="reference internal" href="../reference/method/db.collection.findOneAndDelete.html#db.collection.findOneAndDelete" title="db.collection.findOneAndDelete()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.findOneAndDelete()</span></code></a>,</li>
<li><a class="reference internal" href="../reference/method/db.collection.findOneAndReplace.html#db.collection.findOneAndReplace" title="db.collection.findOneAndReplace()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.findOneAndReplace()</span></code></a>,</li>
<li><a class="reference internal" href="../reference/method/db.collection.findOneAndUpdate.html#db.collection.findOneAndUpdate" title="db.collection.findOneAndUpdate()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.findOneAndUpdate()</span></code></a></li>
</ul>
</li>
</ul>
<p>See:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/command/delete.html#dbcmd.delete" title="delete"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">delete</span></code></a></li>
<li><a class="reference internal" href="../reference/command/findAndModify.html#dbcmd.findAndModify" title="findAndModify"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">findAndModify</span></code></a></li>
</ul>
</div>
<div class="section" id="javascript-execution-on-mongos">
<h3>JavaScript Execution on <code class="docutils literal"><span class="pre">mongos</span></code><a class="headerlink" href="#javascript-execution-on-mongos" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, MongoDB allows JavaScript execution on
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instances. To disable JavaScript execution on a
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instance:</p>
<ul class="simple">
<li>Set
<a class="reference internal" href="../reference/configuration-options.html#security.javascriptEnabled" title="security.javascriptEnabled"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">security.javascriptEnabled</span></code></a> configuration option to false, or</li>
<li>Specify the <a class="reference internal" href="../reference/program/mongos.html#cmdoption-mongos-noscripting"><code class="xref std std-option docutils literal"><span class="pre">--noscripting</span></code></a>
command-line option.</li>
</ul>
<p>Earlier versions of MongoDB do not allow JavaScript execution on
<code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> instances.</p>
</div>
<div class="section" id="global-default-read-and-write-concern">
<h3>Global Default Read and Write Concern<a class="headerlink" href="#global-default-read-and-write-concern" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Requires <code class="docutils literal"><span class="pre">featureCompatibilityVersion</span></code> 4.4+</p>
<p class="last">Each <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> in the replica set or sharded cluster
<em>must</em> have <a class="reference internal" href="../reference/command/setFeatureCompatibilityVersion.html#set-fcv"><span class="std std-ref">featureCompatibilityVersion</span></a> set to at
least <code class="docutils literal"><span class="pre">4.4</span></code> to configure global default read and write concern.</p>
</div>
<p>Starting in MongoDB 4.4, replica sets and sharded clusters support
configuring global default read and write concern settings. Clients
which do not explicitly specify a given read or write concern setting
inherit the corresponding global default setting.</p>
<p>To configure default global default read or write concern, MongoDB adds
the <a class="reference internal" href="../reference/command/setDefaultRWConcern.html#dbcmd.setDefaultRWConcern" title="setDefaultRWConcern"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">setDefaultRWConcern</span></code></a> administrative command. For replica
sets, issue the command against the <a class="reference internal" href="../reference/glossary.html#term-primary"><span class="xref std std-term">primary</span></a> member. For sharded
clusters, issue the command from a <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code>.</p>
<p>To retrieve the global default read or write concern settings, MongoDB
adds the <a class="reference internal" href="../reference/command/getDefaultRWConcern.html#dbcmd.getDefaultRWConcern" title="getDefaultRWConcern"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">getDefaultRWConcern</span></code></a> administrative command.</p>
<div class="section" id="read-concern-provenance">
<h4>Read Concern Provenance<a class="headerlink" href="#read-concern-provenance" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, read concern objects may include a
<code class="docutils literal"><span class="pre">provenance</span></code> field, indicating where the read concern originated.</p>
<p>The following table shows the possible read concern <code class="docutils literal"><span class="pre">provenance</span></code>
values and their significance:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Provenance</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">clientSupplied</span></code></td>
<td>The read concern was specified in the application.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">customDefault</span></code></td>
<td>The read concern originated from a custom defined
default value. See <a class="reference internal" href="../reference/command/setDefaultRWConcern.html#dbcmd.setDefaultRWConcern" title="setDefaultRWConcern"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">setDefaultRWConcern</span></code></a>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">implicitDefault</span></code></td>
<td>The read concern originated from the server in absence
of all other read concern specifications.</td>
</tr>
</tbody>
</table>
<p>If a read operation is logged or profiled, the operation entry contains
the read concern object, including the <code class="docutils literal"><span class="pre">provenance</span></code> field.</p>
<p>MongoDB does not recommended specifying the <code class="docutils literal"><span class="pre">provenance</span></code> field in
requests to the server. This field should only be used for diagnostic
purposes.</p>
</div>
<div class="section" id="write-concern-provenance">
<h4>Write Concern Provenance<a class="headerlink" href="#write-concern-provenance" title="Permalink to this headline">¶</a></h4>
<p>Starting in MongoDB 4.4, write concern objects may include a
<code class="docutils literal"><span class="pre">provenance</span></code> field, indicating where the write concern originated.</p>
<p>The following table shows the possible write concern <code class="docutils literal"><span class="pre">provenance</span></code>
values and their significance:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Provenance</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">clientSupplied</span></code></td>
<td>The write concern was specified in the application.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">customDefault</span></code></td>
<td>The write concern originated from a custom defined
default value. See <a class="reference internal" href="../reference/command/setDefaultRWConcern.html#dbcmd.setDefaultRWConcern" title="setDefaultRWConcern"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">setDefaultRWConcern</span></code></a>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">getLastErrorDefaults</span></code></td>
<td>The write concern originated from the replica set’s
<a class="reference internal" href="../reference/replica-configuration.html#rsconf.settings.getLastErrorDefaults" title="settings.getLastErrorDefaults"><code class="xref mongodb mongodb-rsconf docutils literal"><span class="pre">settings.getLastErrorDefaults</span></code></a> field.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">implicitDefault</span></code></td>
<td>The write concern originated from the server in absence
of all other write concern specifications.</td>
</tr>
</tbody>
</table>
<p>If a write operation is logged or profiled, the operation entry contains
the write concern object, including the <code class="docutils literal"><span class="pre">provenance</span></code> field.</p>
<p>MongoDB does not recommended specifying the <code class="docutils literal"><span class="pre">provenance</span></code> field in
requests to the server. This field should only be used for diagnostic
purposes.</p>
</div>
</div>
<div class="section" id="currentop-output">
<h3><code class="docutils literal"><span class="pre">currentOp</span></code> Output<a class="headerlink" href="#currentop-output" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <a class="reference internal" href="../reference/operator/aggregation/currentOp.html#pipe._S_currentOp" title="$currentOp"><code class="xref mongodb mongodb-pipeline docutils literal"><span class="pre">$currentOp</span></code></a> includes
<a class="reference internal" href="../reference/operator/aggregation/currentOp.html#_S_currentOp.dataThroughputAverage" title="$currentOp.dataThroughputAverage"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">dataThroughputAverage</span></code></a> and
<a class="reference internal" href="../reference/operator/aggregation/currentOp.html#_S_currentOp.dataThroughputLastSecond" title="$currentOp.dataThroughputLastSecond"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">dataThroughputLastSecond</span></code></a> information when
reporting on validate operations in progress.</li>
<li>The <a class="reference internal" href="../reference/command/currentOp.html#dbcmd.currentOp" title="currentOp"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">currentOp</span></code></a> command includes
<a class="reference internal" href="../reference/command/currentOp.html#currentOp.dataThroughputAverage" title="currentOp.dataThroughputAverage"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">dataThroughputAverage</span></code></a> and
<a class="reference internal" href="../reference/command/currentOp.html#currentOp.dataThroughputLastSecond" title="currentOp.dataThroughputLastSecond"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">dataThroughputLastSecond</span></code></a> information when
reporting on validate operations in progress.</li>
</ul>
</div>
<div class="section" id="new-kmip-connection-parameters-for-mongod">
<h3>New KMIP Connection Parameters for <code class="docutils literal"><span class="pre">mongod</span></code><a class="headerlink" href="#new-kmip-connection-parameters-for-mongod" title="Permalink to this headline">¶</a></h3>
<p>MongoDB 4.4 Enterprise introduces two new configuration settings to
enhance the initial connection to a KMIP server, as part of Kerberos
authentication:</p>
<div class="section" id="connection-retries">
<h4>Connection Retries<a class="headerlink" href="#connection-retries" title="Permalink to this headline">¶</a></h4>
<p>To control the number of times the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code> retries a
failed initial connection to the KMIP server:</p>
<ul class="simple">
<li>Set the <a class="reference internal" href="../reference/configuration-options.html#security.kmip.connectRetries" title="security.kmip.connectRetries"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">security.kmip.connectRetries</span></code></a> configuration option,
or</li>
<li>Specify the <a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-kmipconnectretries"><code class="xref std std-option docutils literal"><span class="pre">mongod</span> <span class="pre">--kmipConnectRetries</span></code></a> command-line option.</li>
</ul>
</div>
<div class="section" id="connection-timeout">
<h4>Connection Timeout<a class="headerlink" href="#connection-timeout" title="Permalink to this headline">¶</a></h4>
<p>To control the timeout, in milliseconds, to wait for the initial
response from the KMIP server before giving up, or retrying:</p>
<ul class="simple">
<li>Set the <a class="reference internal" href="../reference/configuration-options.html#security.kmip.connectTimeoutMS" title="security.kmip.connectTimeoutMS"><code class="xref mongodb mongodb-setting docutils literal"><span class="pre">security.kmip.connectTimeoutMS</span></code></a> configuration
option, or</li>
<li>Specify the <a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod-kmipconnecttimeoutms"><code class="xref std std-option docutils literal"><span class="pre">mongod</span> <span class="pre">--kmipConnectTimeoutMS</span></code></a> command-line
option.</li>
</ul>
<p>These settings are available in MongoDB Enterprise only.</p>
</div>
</div>
<div class="section" id="new-startup-option-for-mongod">
<h3>New Startup Option for <code class="docutils literal"><span class="pre">mongod</span></code><a class="headerlink" href="#new-startup-option-for-mongod" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../reference/parameters.html#param.processUmask" title="processUmask"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">processUmask</span></code></a> startup option for <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongod</span></code>
allows you to set permissions through <a class="reference external" href="https://en.wikipedia.org/wiki/Umask">umask</a> for groups and other users when
<a class="reference internal" href="../reference/parameters.html#param.honorSystemUmask" title="honorSystemUmask"><code class="xref mongodb mongodb-parameter docutils literal"><span class="pre">honorSystemUmask</span></code></a> is set to <code class="docutils literal"><span class="pre">false</span></code>.</p>
</div>
<div class="section" id="mapreduce-ignores-verbose-option">
<h3><code class="docutils literal"><span class="pre">mapReduce</span></code> Ignores <code class="docutils literal"><span class="pre">verbose</span></code> Option<a class="headerlink" href="#mapreduce-ignores-verbose-option" title="Permalink to this headline">¶</a></h3>
<p>Starting with MongoDB 4.4, the <a class="reference internal" href="../reference/command/mapReduce.html#dbcmd.mapReduce" title="mapReduce"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">mapReduce</span></code></a> command and the
<a class="reference internal" href="../reference/method/db.collection.mapReduce.html#db.collection.mapReduce" title="db.collection.mapReduce()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.mapReduce()</span></code></a> shell method ignore the
<a class="reference internal" href="../reference/command/mapReduce.html#cmd-mapreduce-verbose"><span class="std std-ref">verbose</span></a> option.</p>
</div>
<div class="section" id="explain-support-for-mapreduce">
<h3><code class="docutils literal"><span class="pre">explain</span></code> Support for <code class="docutils literal"><span class="pre">mapReduce</span></code><a class="headerlink" href="#explain-support-for-mapreduce" title="Permalink to this headline">¶</a></h3>
<p>Starting with MongoDB 4.4, you can use the <a class="reference internal" href="../reference/command/explain.html#dbcmd.explain" title="explain"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">explain</span></code></a> command
or the <a class="reference internal" href="../reference/method/db.collection.explain.html#db.collection.explain" title="db.collection.explain()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.explain()</span></code></a> shell method to preview the
results of <a class="reference internal" href="../reference/command/mapReduce.html#dbcmd.mapReduce" title="mapReduce"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">mapReduce</span></code></a> or
<a class="reference internal" href="../reference/method/db.collection.mapReduce.html#db.collection.mapReduce" title="db.collection.mapReduce()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.mapReduce()</span></code></a>.</p>
</div>
<div class="section" id="improvements-to-explain-results">
<h3>Improvements to <code class="docutils literal"><span class="pre">explain</span></code> Results<a class="headerlink" href="#improvements-to-explain-results" title="Permalink to this headline">¶</a></h3>
<p>Starting in version 4.4:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/explain-results.html"><span class="doc">Explain results</span></a> for commands run
on sharded clusters include a top-level <a class="reference internal" href="../reference/explain-results.html#serverinfo"><span class="std std-ref">serverInfo</span></a>
object for the <code class="xref mongodb mongodb-binary docutils literal"><span class="pre">mongos</span></code> in addition to the <code class="docutils literal"><span class="pre">serverInfo</span></code>
objects returned for each shard. This is also available in versions
4.2.2, 4.0.14, and 3.6.16.</li>
<li><a class="reference internal" href="../reference/explain-results.html"><span class="doc">Explain results</span></a> include the
<a class="reference internal" href="../reference/explain-results.html#serverinfo"><span class="std std-ref">serverInfo</span></a> object when
<a class="reference internal" href="../reference/explain-results.html#explain.queryPlanner.optimizedPipeline" title="explain.queryPlanner.optimizedPipeline"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">optimizedPipeline</span></code></a> is <code class="docutils literal"><span class="pre">true</span></code>. In
previous versions of MongoDB, <code class="docutils literal"><span class="pre">explain</span></code> results would occasionally
not include the <code class="docutils literal"><span class="pre">serverInfo</span></code> object when
<a class="reference internal" href="../reference/explain-results.html#explain.queryPlanner.optimizedPipeline" title="explain.queryPlanner.optimizedPipeline"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">optimizedPipeline</span></code></a> was <code class="docutils literal"><span class="pre">true</span></code>. This is
also available in versions 4.2.2, 4.0.14, and 3.6.16.</li>
<li><a class="reference internal" href="../reference/explain-results.html"><span class="doc">Explain results</span></a> for aggregation include
the <a class="reference internal" href="../reference/explain-results.html#explain.executionStats.nReturned" title="explain.executionStats.nReturned"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">nReturned</span></code></a> and
<a class="reference internal" href="../reference/explain-results.html#explain.executionStats.executionStages.executionTimeMillisEstimate" title="explain.executionStats.executionStages.executionTimeMillisEstimate"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">executionTimeMillisEstimate</span></code></a> fields
for each <a class="reference internal" href="../aggregation.html"><span class="doc">pipeline stage</span></a> when you run
<a class="reference internal" href="../reference/method/db.collection.explain.html#db.collection.explain" title="db.collection.explain()"><code class="xref mongodb mongodb-method docutils literal"><span class="pre">db.collection.explain().aggregate()</span></code></a>
method in <code class="docutils literal"><span class="pre">executionStats</span></code> and <code class="docutils literal"><span class="pre">allPlansExecution</span></code> modes.</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../reference/explain-results.html"><span class="doc">Explain results</span></a>.</p>
</div>
</div>
<div class="section" id="comment-option-available-to-all-database-commands">
<h3><code class="docutils literal"><span class="pre">comment</span></code> Option Available to all Database Commands<a class="headerlink" href="#comment-option-available-to-all-database-commands" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, all database commands support specifying a
<code class="docutils literal"><span class="pre">comment</span></code> field, in the following fashion:</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<div class="last button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">runCommand</span><span class="p">(</span> <span class="p">{</span> <span class="o">&lt;</span><span class="nx">command</span><span class="o">&gt;</span> <span class="p">,</span> <span class="s2">&quot;comment&quot;</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">any</span> <span class="nx">BSON</span> <span class="nx">type</span><span class="o">&gt;</span> <span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<p>Once set, the comment appears alongside records of the command in the
following locations:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/log-messages.html#log-messages-ref"><span class="std std-ref">mongod log messages</span></a>, in the
<code class="docutils literal"><span class="pre">attr.command.cursor.comment</span></code> field.</li>
<li><a class="reference internal" href="../reference/database-profiler.html#profiler"><span class="std std-ref">Database profiler</span></a> output, in the <a class="reference internal" href="../reference/database-profiler.html#system.profile.command" title="system.profile.command"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">command.comment</span></code></a> field.</li>
<li><a class="reference internal" href="../reference/command/currentOp.html#dbcmd.currentOp" title="currentOp"><code class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">currentOp</span></code></a> output, in the <a class="reference internal" href="../reference/command/currentOp.html#currentOp.command" title="currentOp.command"><code class="xref mongodb mongodb-data docutils literal"><span class="pre">command.comment</span></code></a> field.</li>
</ul>
<p>A comment must be a valid <a class="reference internal" href="../reference/bson-types.html#bson-types"><span class="std std-ref">BSON object</span></a>
(string, integer, array, etc).</p>
</div>
<div class="section" id="improvements-to-positional-operator">
<h3>Improvements to Positional <code class="docutils literal"><span class="pre">$</span></code> Operator<a class="headerlink" href="#improvements-to-positional-operator" title="Permalink to this headline">¶</a></h3>
<p>Starting in MongoDB 4.4, when using the positional <a class="reference internal" href="../reference/operator/projection/positional.html#proj._S_" title="$"><code class="xref mongodb mongodb-projection docutils literal"><span class="pre">$</span></code></a>
operator, you can specify different array fields between the query
document and projection document.</p>
<p>For example, if you insert the following document into a collection:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">foo</span><span class="p">.</span><span class="nx">insertOne</span><span class="p">(</span> <span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span> <span class="p">],</span> <span class="nx">b</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">]</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>Starting in MongoDB 4.4, you can use the following query to project
only the first element from field <code class="docutils literal"><span class="pre">b</span></code> for a document that matches
the query specified on field <code class="docutils literal"><span class="pre">a</span></code>:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">foo</span><span class="p">.</span><span class="nx">findOne</span><span class="p">(</span> <span class="p">{</span> <span class="nx">a</span><span class="o">:</span> <span class="s2">&quot;one&quot;</span> <span class="p">},</span> <span class="p">{</span> <span class="s2">&quot;b.$&quot;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">To ensure expected behavior, the arrays used in the query document
and the projection document must be the same length. If the arrays are
different lenghts, the operation may error in certain scenarios.</p>
</div>
<p>In previous versions of MongoDB, this operation fails because the array
field being limited <strong>must</strong> appear in the query document.</p>
</div>
</div>
<div class="section" id="changes-affecting-compatibility">
<h2>Changes Affecting Compatibility<a class="headerlink" href="#changes-affecting-compatibility" title="Permalink to this headline">¶</a></h2>
<p>Some changes can affect compatibility and may require user actions. For
a detailed list of compatibility changes, see
<a class="reference internal" href="4.4-compatibility.html"><span class="doc">Compatibility Changes in MongoDB 4.4</span></a>.</p>
</div>
<div class="section" id="upgrade-procedures">
<span id="upgrade"></span><h2>Upgrade Procedures<a class="headerlink" href="#upgrade-procedures" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Feature Compatibility Version</p>
<p>To upgrade from 4.2 deployment, the 4.2 deployment must have
<code class="docutils literal"><span class="pre">featureCompatibilityVersion</span></code> set to <code class="docutils literal"><span class="pre">4.2</span></code>. To check the version:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">db</span><span class="p">.</span><span class="nx">adminCommand</span><span class="p">(</span> <span class="p">{</span> <span class="nx">getParameter</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">featureCompatibilityVersion</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>For specific details on verifying and setting the
<code class="docutils literal"><span class="pre">featureCompatibilityVersion</span></code> as well as information on other
prerequisites/considerations for upgrades, refer to the individual
upgrade instructions:</p>
<ul class="last simple">
<li><a class="reference internal" href="4.4-upgrade-standalone.html"><span class="doc">Upgrade a Standalone to 4.4</span></a></li>
<li><a class="reference internal" href="4.4-upgrade-replica-set.html"><span class="doc">Upgrade a Replica Set to 4.4</span></a></li>
<li><a class="reference internal" href="4.4-upgrade-sharded-cluster.html"><span class="doc">Upgrade a Sharded Cluster to 4.4</span></a></li>
</ul>
</div>
<p>If you need guidance on upgrading to 4.4, <a class="reference external" href="https://www.mongodb.com/products/consulting?tck=docs_server">MongoDB professional services</a> offer
major version upgrade support to help ensure a smooth transition
without interruption to your MongoDB application.</p>
</div>
<div class="section" id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<p>To download MongoDB 4.4, go to the <a class="reference external" href="https://www.mongodb.com/try/download?tck=docs_server">MongoDB Download Center</a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="https://github.com/mongodb/mongo/blob/v4.4/distsrc/THIRD-PARTY-NOTICES">All Third Party License Notices</a>.</li>
</ul>
</div>
</div>
<div class="section" id="known-issues">
<span id="id38"></span><h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="14%" />
<col width="67%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">In Version</th>
<th class="head">Issues</th>
<th class="head">Status</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>4.4.0</td>
<td><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-45042">SERVER-45042</a>: MongoDB Server Installation MSI for both
Community and Enterprise no longer contain binaries for
the <a href="#id39"><span class="problematic" id="id40">:dbtools:`MongoDB Database Tools &lt;&gt;`</span></a>. For more information,
see <a class="reference internal" href="4.4-compatibility.html#tools-compatibility"><span class="std std-ref">Tools Changes</span></a>.</td>
<td>Unresolved</td>
</tr>
<tr class="row-odd"><td>4.4.0</td>
<td><a class="reference external" href="https://jira.mongodb.org/browse/SERVER-49694">SERVER-49694</a>: On a sharded cluster, <a class="reference internal" href="../core/read-preference.html#nearest" title="nearest"><code class="xref mongodb mongodb-readmode docutils literal"><span class="pre">nearest</span></code></a>
reads or <a class="reference internal" href="../core/sharded-cluster-query-router.html#mongos-hedged-reads"><span class="std std-ref">hedged reads</span></a> may not be
routed to a near shard replica.</td>
<td>Fixed in 4.4.1</td>
</tr>
<tr class="row-even"><td>4.4.0</td>
<td><a class="reference external" href="https://jira.mongodb.org/browse/WT-6623">WT-6623</a>: Set the connection level file id in recovery
file scan.</td>
<td>Fixed in 4.4.1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="report-an-issue">
<h2>Report an Issue<a class="headerlink" href="#report-an-issue" title="Permalink to this headline">¶</a></h2>
<p>To report an issue, see
<a class="reference external" href="https://github.com/mongodb/mongo/wiki/Submit-Bug-Reports">https://github.com/mongodb/mongo/wiki/Submit-Bug-Reports</a> for
instructions on how to file a JIRA ticket for the MongoDB server or one
of the related projects.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="4.4-compatibility.html">Compatibility Changes in MongoDB 4.4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#removed-commands">Removed Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#removed-parameters">Removed Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#tools-changes">Tools Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#replica-sets">Replica Sets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#rollback-directory">Rollback Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#replsetgetstatus-output-field-changes"><code class="docutils literal"><span class="pre">replSetGetStatus</span></code> Output Field Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#replica-configuration-document-changes">Replica Configuration Document Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#initial-sync-restrictions-on-operations">Initial Sync Restrictions on Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#custom-getlasterrordefaults-values-deprecated">Custom <code class="docutils literal"><span class="pre">getLastErrorDefaults</span></code> Values Deprecated</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#projection-compatibility-changes">Projection Compatibility Changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#set-fields-to-new-values">Set Fields to New Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#elemmatch-projection-field-order"><code class="docutils literal"><span class="pre">$elemMatch</span></code> Projection Field Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#slice-of-embedded-array"><code class="docutils literal"><span class="pre">$slice</span></code> of Embedded Array</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#path-collision-restrictions">Path Collision Restrictions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="4.4-compatibility.html#path-collision-embedded-documents-and-its-fields">Path Collision: Embedded Documents and Its Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="4.4-compatibility.html#path-collision-slice-of-an-array-and-embedded-fields">Path Collision: <code class="docutils literal"><span class="pre">$slice</span></code> of an Array and Embedded Fields</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#prefixed-field-path-restriction"><code class="docutils literal"><span class="pre">$</span></code>-Prefixed Field Path Restriction</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#positional-operator-placement-restriction"><code class="docutils literal"><span class="pre">$</span></code> Positional Operator Placement Restriction</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#positional-operator-and-slice-restriction"><code class="docutils literal"><span class="pre">$</span></code> Positional Operator and <code class="docutils literal"><span class="pre">$slice</span></code> Restriction</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#empty-field-name-projection-restriction">Empty Field Name Projection Restriction</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#text-search-metadata-meta-textscore-query-requirement">Text Search Metadata { $meta: “textScore” } Query Requirement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#sort-changes"><code class="docutils literal"><span class="pre">$sort</span></code> Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#map-reduce-changes">Map Reduce Changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#map-reduce-output-change">Map-Reduce Output Change</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#map-function-s-emit-limit">Map Function’s Emit Limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#remove-support-for-bson-type-javascript-code-with-scope">Remove support for BSON Type JavaScript code with scope</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#structured-logging">Structured Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#removal-of-rs-getlog-value">Removal of <code class="docutils literal"><span class="pre">rs</span></code> getLog value</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#timestamp-format">Timestamp Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#maxlogsizekb-parameter">maxLogSizeKB Parameter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#general-changes">General Changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#db-collection-validate-parameter-change">db.collection.validate() Parameter Change</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#full-validation-on-oplog">Full Validation on <code class="docutils literal"><span class="pre">oplog</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#mmapv1-cleanup">MMAPv1 Cleanup</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-compatibility.html#deprecations">Deprecations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="4.4-compatibility.html#geospatial">Geospatial</a></li>
<li class="toctree-l4"><a class="reference internal" href="4.4-compatibility.html#bson-type-javascript-code-with-scope">BSON Type JavaScript code with scope</a></li>
<li class="toctree-l4"><a class="reference internal" href="4.4-compatibility.html#sharding">Sharding</a></li>
<li class="toctree-l4"><a class="reference internal" href="4.4-compatibility.html#lookaside-table-overflow-file-size-limit">Lookaside Table Overflow File Size Limit</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-compatibility.html#feature-compatibility">4.4 Feature Compatibility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="4.4-upgrade-standalone.html">Upgrade a Standalone to 4.4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-standalone.html#upgrade-recommendations-and-checklists">Upgrade Recommendations and Checklists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#upgrade-version-path">Upgrade Version Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#check-driver-compatibility">Check Driver Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#preparedness">Preparedness</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#downgrade-consideration">Downgrade Consideration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-standalone.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#confirm-clean-shutdown">Confirm Clean Shutdown</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#feature-compatibility-version">Feature Compatibility Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#consider-converting-to-replica-set">Consider Converting to Replica Set</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-standalone.html#download-newversion-binaries">Download 4.4 Binaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#via-package-manager">Via Package Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#manually">Manually</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-standalone.html#upgrade-process">Upgrade Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#replace-existing-oldversion-binaries-with-the-newversion-binaries">Replace existing 4.2 binaries with the 4.4 binaries.</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-standalone.html#enable-backwards-incompatible-newversion-features">Enable backwards-incompatible 4.4 features.</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-standalone.html#additional-upgrade-procedures">Additional Upgrade Procedures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="4.4-upgrade-replica-set.html">Upgrade a Replica Set to 4.4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-replica-set.html#upgrade-recommendations-and-checklists">Upgrade Recommendations and Checklists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#upgrade-version-path">Upgrade Version Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#check-driver-compatibility">Check Driver Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#preparedness">Preparedness</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#downgrade-consideration">Downgrade Consideration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-replica-set.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#all-members-version">All Members Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#confirm-clean-shutdown">Confirm Clean Shutdown</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#feature-compatibility-version">Feature Compatibility Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#replica-set-member-state">Replica Set Member State</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-replica-set.html#download-newversion-binaries">Download 4.4 Binaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#via-package-manager">Via Package Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#manually">Manually</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-replica-set.html#upgrade-process">Upgrade Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#upgrade-secondary-members-of-the-replica-set">Upgrade secondary members of the replica set.</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#step-down-the-replica-set-primary">Step down the replica set primary.</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#upgrade-the-primary">Upgrade the primary.</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-replica-set.html#enable-backwards-incompatible-newversion-features">Enable backwards-incompatible 4.4 features.</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-replica-set.html#additional-upgrade-procedures">Additional Upgrade Procedures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html">Upgrade a Sharded Cluster to 4.4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#upgrade-recommendations-and-checklists">Upgrade Recommendations and Checklists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#upgrade-version-path">Upgrade Version Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#check-driver-compatibility">Check Driver Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#preparedness">Preparedness</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#downgrade-consideration">Downgrade Consideration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#all-members-version">All Members Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#confirm-clean-shutdown">Confirm Clean Shutdown</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#feature-compatibility-version">Feature Compatibility Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#replica-set-member-state">Replica Set Member State</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#back-up-the-config-database">Back up the <code class="docutils literal"><span class="pre">config</span></code> Database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#download-newversion-binaries">Download 4.4 Binaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#use-package-manager">Use Package Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#download-newversion-binaries-manually">Download 4.4 Binaries Manually</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#upgrade-process">Upgrade Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#disable-the-balancer">Disable the Balancer.</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#upgrade-the-config-servers">Upgrade the config servers.</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#upgrade-the-shards">Upgrade the shards.</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#upgrade-the-mongos-instances">Upgrade the <code class="docutils literal"><span class="pre">mongos</span></code> instances.</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#re-enable-the-balancer">Re-enable the balancer.</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#enable-backwards-incompatible-newversion-features">Enable backwards-incompatible 4.4 features.</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-upgrade-sharded-cluster.html#additional-upgrade-procedures">Additional Upgrade Procedures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="4.4-downgrade.html">Downgrade 4.4 to 4.2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="4.4-downgrade.html#downgrade-path">Downgrade Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.4-downgrade.html#create-backup">Create Backup</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.4-downgrade.html#downgrade-feature-compatibility-version-fcv">Downgrade Feature Compatibility Version (fCV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.4-downgrade.html#remove-backwards-incompatible-features">Remove Backwards Incompatible Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="4.4-downgrade.html#procedures">Procedures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="4.4-changelog.html">4.4 Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id1">4.4.15 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#sharding">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#query">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#build-and-packaging">Build and Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#internals">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id3">4.4.14 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id5">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#ttl">TTL</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id6">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id7">4.4.13 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id9">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#replication">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id10">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#storage">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id11">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id12">4.4.12 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id14">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id15">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id16">4.4.11 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id18">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id19">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id20">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#aggregation">Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id21">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#operations">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id22">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id23">4.4.10 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#security">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id25">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id26">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id27">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id28">Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id29">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id30">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id31">4.4.9 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id33">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id34">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id35">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id36">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id37">Build and Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id38">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id39">4.4.8 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id41">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id42">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id43">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id44">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id45">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id46">Build and Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id47">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id48">4.4.7 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id50">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id51">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id52">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id53">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#write-operations">Write Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id54">Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id55">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id56">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id57">Build and Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id58">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id59">4.4.6 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id61">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id62">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id63">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id64">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id65">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id66">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id67">4.4.5 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id69">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id70">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id71">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id72">Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id73">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id74">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id75">Build and Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id76">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id77">4.4.4 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id79">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id80">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id81">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id82">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id83">Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id84">Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="4.4-changelog.html#wiredtiger">WiredTiger</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id85">Build and Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id86">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id87">4.4.3 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id89">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id90">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id91">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id92">Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id93">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id94">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id95">Build and Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id96">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id97">4.4.2 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id99">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id100">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id101">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id102">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id103">Write Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id104">Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#catalog">Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id105">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id106">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id107">Build and Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id108">Internals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.4-changelog.html#id109">4.4.1 Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id111">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id112">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id113">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id114">Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id115">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id116">Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id117">Build and Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4-changelog.html#id118">Internals</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

                
    <div id="btnv">
      <span class="btn-arrow-left">&larr; &nbsp;</span>
      <a class="btn-prev-text" href="5.0-changelog.html" title="Previous Section: 5.0 Changelog"><span>5.0 Changelog</span></a>
      <a class="btn-next-text" href="4.4-compatibility.html" title="Next Section: Compatibility Changes in MongoDB 4.4"><span>Compatibility Changes in MongoDB 4.4</span></a>
      <span class="btn-arrow-right">&nbsp;&rarr;</span>
    </div>
                  <div class="footer">
                    <div class="copyright">
                      <p>&copy; MongoDB, Inc 2008-present. MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc.</p>
                    </div>
                  </div>
              </div></div>
            </div>
        </div>
    </div>
    <div class="right-column">
      <div class="wrapper"> <div id='mongodb-docs-1'>
   <script type='text/javascript'>
      googletag.cmd.push(function() { googletag.display('mongodb-docs-1'); });
   </script>
</div>
            <div class="social">
               <a class="slack-icon" href="https://slackpass.io/mongo-db?jmp=docs" title="https://slackpass.io/mongo-db?jmp=docs"><i class="fab fa-slack" aria-hidden="true"></i></a>
               <a class="twitter-icon" href="https://twitter.com/MongoDB" title="https://twitter.com/MongoDB"><i class="fab fa-twitter-square"></i></a>
               <a class="youtube-icon" href="https://www.youtube.com/user/MongoDB" title="https://www.youtube.com/user/MongoDB"><i class="fab fa-youtube-square"></i></a>
               <a class="facebook-icon" href="https://www.facebook.com/mongodb" title="https://www.facebook.com/mongodb"><i class="fab fa-facebook-square"></i></a>
               <a class="stack-overflow-icon" href="https://stackoverflow.com/tags/mongodb/info" title="https://stackoverflow.com/tags/mongodb/info"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a>
            </div>
        

      </div>
    </div>
    
      <div id="rating-panel"></div>
    
    <div class="clearfix"></div>
  </div>
<div id="navbar" data-navprops='{"links": [{"url": "https://www.mongodb.com/docs/manual/","text": "Server","active": true},{"url": "https://www.mongodb.com/docs/drivers/","text": "Drivers"},{"url": "https://www.mongodb.com/docs/cloud/","text": "Cloud"},{"url": "https://www.mongodb.com/docs/tools/","text": "Tools"},{"url": "https://www.mongodb.com/docs/guides/","text": "Guides"}], "baseUrl": "https://www.mongodb.com/docs"}'></div>

  <script src="../_static/navbar.min.js"></script>

  

  <script type="text/javascript">
  // Bootstrap array of links that should trigger a full page reload
  window.docsExcludedNav = ['/administration', '/administration/production-checklist', '/administration/indexes-management', '/aggregation', '/applications/geospatial-indexes', '/applications/indexes', '/contributors/getting-started', '/core/2d', '/core/2dsphere', '/core/auditing', '/core/authentication', '/core/authorization', '/core/backups', '/core/read-isolation-consistency-recency', '/core/databases-and-collections', '/core/geohaystack', '/core/index-single', '/core/index-compound', '/core/index-creation', '/core/index-hashed', '/core/index-multikey', '/core/index-partial', '/core/index-sparse', '/core/index-text', '/core/index-ttl', '/core/index-unique', '/core/index-wildcard', '/core/journaling', '/core/kerberos', '/core/map-reduce', '/core/operational-segregation', '/core/query-optimization', '/core/read-preference', '/core/replica-set-architectures', '/core/replica-set-high-availability', '/core/replica-set-members', '/core/replica-set-secondary', '/core/transactions', '/geospatial-queries', '/replication', '/core/sharded-cluster-components', '/core/wiredtiger', '/core/write-operations-atomicity', '/crud', '/indexes', '/installation', '/introduction', '/mongo', '/products/bi-connector', '/reference/command', '/reference/collation', '/text-search', '/tutorial/manage-the-database-profiler', '/core/index-text', '/reference/bson-types', '/reference/configuration-options', '/reference/indexes', '/reference/method', '/reference/operator/aggregation', '/reference/operator/query', '/reference/operator/query-modifier', '/reference/operator/update', '/reference/replication', '/reference/read-concern', '/reference/security', '/reference/sharding', '/reference/write-concern', '/release-notes/2.4', '/release-notes/2.6', '/release-notes/2.8', '/release-notes/3.0', '/release-notes/3.2', '/release-notes/3.4', '/release-notes/3.6', '/release-notes/4.0', '/release-notes/4.2', '/release-notes/4.4', '/release-notes/5.0', '/security', '/sharding', '/changeStreams', '/core/zone-sharding', '/core/hashed-sharding', '/core/ranged-sharding', '/storage', '/tutorial/change-sharded-cluster-wiredtiger', '/tutorial/insert-documents', '/tutorial/query-documents', '/tutorial/remove-documents', '/tutorial/update-documents', '/tutorial/enable-authentication', '/tutorial/install-mongodb-on-ubuntu', '/tutorial/install-mongodb-on-windows', '/tutorial/install-mongodb-on-red-hat', '/tutorial/install-mongodb-on-debian', '/tutorial/install-mongodb-on-suse', '/tutorial/install-mongodb-on-amazon', '/tutorial/install-mongodb-enterprise-on-ubuntu', '/tutorial/install-mongodb-enterprise-on-windows', '/tutorial/install-mongodb-enterprise-on-red-hat', '/tutorial/install-mongodb-enterprise-on-debian', '/tutorial/install-mongodb-enterprise-on-suse', '/tutorial/install-mongodb-enterprise-on-amazon', '/tutorial/install-mongodb-on-os-x'];
  </script></body>
</html>